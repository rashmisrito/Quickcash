import{j as e,f as ke,R as c,u as Pe}from"./index-C7uDDRzi.js";import{i as Se,j as Q,a as P,B as U}from"./App-DlbqwX0_.js";import{h as $e}from"./moment-Cl4UOzQZ.js";import{P as S}from"./index-hEMCMpH5.js";import{d as De}from"./Delete-DpahORMc.js";import{T as Te,a as Me,d as X,b as Z}from"./FirstPage-CPAGEHSw.js";import{C as w}from"./ColorButton-ek59cplY.js";import{r as Be}from"./createSvgIcon-D3EdHNeB.js";import{d as ee}from"./KeyboardArrowLeft-qQvVTVt5.js";import{d as te}from"./KeyboardArrowRight-CZ8ymu6k.js";import{d as ze}from"./KeyboardBackspace-CMiK9GPp.js";import{B as g}from"./Box-DuB8RHF0.js";import{G as $,u as Re}from"./Grid-BSdJsjIu.js";import{T as Ie}from"./Typography-Bqz4o4Sm.js";import{T as ae,a as se,b as Ve}from"./TableHead-Bd9qBWdY.js";import{P as ie}from"./Menu-DLoDL8Vj.js";import{T as h}from"./TableRow-BMXI6SLn.js";import{T as i}from"./TableCell-B1sDmbQp.js";import{T as le}from"./TableBody-BFALaQoR.js";import{D as Ae,a as _e}from"./DialogContent-DkyOs5Wr.js";import{D as He}from"./DialogTitle-Bt5OrTqc.js";import{D as Le}from"./DialogContentText-1QqK5Dht.js";import{T as Oe}from"./TextField-IfJfvW4r.js";import{S as We}from"./Select-DVBf2x5a.js";import{M as re}from"./MenuItem-BEeRBPo2.js";import{D as qe}from"./DialogActions-T_ZB_B2r.js";import{I as D}from"./IconButton-8zMA2-sK.js";import{s as Ee}from"./styled-DpNLFuLo.js";import"./Tablelvl2Context-CGZbN2Bw.js";import"./createSvgIcon-CvjaZCwn.js";import"./Toolbar-penBkzvF.js";import"./Button-bVqxygml.js";import"./ButtonBase-Cb7r6f8i.js";import"./TransitionGroupContext-BuEQjJx-.js";import"./isMuiElement-MrDrvzNs.js";import"./Backdrop-92jRYuW8.js";import"./utils-D1Bwf65I.js";import"./FormControl-Bz1rNlOw.js";import"./dividerClasses-Bc8akPt1.js";import"./listItemTextClasses-BL6EH0EV.js";var A={},Ne=Se;Object.defineProperty(A,"__esModule",{value:!0});var ne=A.default=void 0,Fe=Ne(Be()),Ye=e;ne=A.default=(0,Fe.default)((0,Ye.jsx)("path",{d:"M22 24H2v-4h20zM13.06 5.19l3.75 3.75L7.75 18H4v-3.75zm4.82 2.68-3.75-3.75 1.83-1.83c.39-.39 1.02-.39 1.41 0l2.34 2.34c.39.39.39 1.02 0 1.41z"}),"BorderColor");function oe(l){const n=Re(),{count:p,page:o,rowsPerPage:m,onPageChange:x}=l,f=d=>{x(d,0)},j=d=>{x(d,o-1)},T=d=>{x(d,o+1)},y=d=>{x(d,Math.max(0,Math.ceil(p/m)-1))};return e.jsxs(g,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(D,{onClick:f,disabled:o===0,"aria-label":"first page",children:n.direction==="rtl"?e.jsx(X,{}):e.jsx(Z,{})}),e.jsx(D,{onClick:j,disabled:o===0,"aria-label":"previous page",children:n.direction==="rtl"?e.jsx(te,{}):e.jsx(ee,{})}),e.jsx(D,{onClick:T,disabled:o>=Math.ceil(p/m)-1,"aria-label":"next page",children:n.direction==="rtl"?e.jsx(ee,{}):e.jsx(te,{})}),e.jsx(D,{onClick:y,disabled:o>=Math.ceil(p/m)-1,"aria-label":"last page",children:n.direction==="rtl"?e.jsx(Z,{}):e.jsx(X,{})})]})}oe.propTypes={count:S.number.isRequired,onPageChange:S.func.isRequired,page:S.number.isRequired,rowsPerPage:S.number.isRequired};const Ge=[{id:"date",label:"Date",minWidth:170},{id:"name",label:"Name",minWidth:100},{id:"number",label:"Card Number",minWidth:100},{id:"cvc",label:"CVC",minWidth:100},{id:"expiry",label:"Expiry",minWidth:100},{id:"status",label:"Status",minWidth:100},{id:"action",label:"Action",minWidth:120}];function Je(l,n,p,o,m,x,f){return{id:l,date:n,name:p,number:o,cvc:m,expiry:x,status:f}}const Ke=Ee("div")(({theme:l})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"right",height:"100%","& .ant-empty-img-1":{fill:l.palette.mode==="light"?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:l.palette.mode==="light"?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:l.palette.mode==="light"?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:l.palette.mode==="light"?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:l.palette.mode==="light"?"0.8":"0.08",fill:l.palette.mode==="light"?"#f5f5f5":"#fff"}}));function Qe(){return e.jsxs(Ke,{children:[e.jsx("svg",{width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:e.jsxs("g",{fill:"none",fillRule:"evenodd",children:[e.jsxs("g",{transform:"translate(24 31.67)",children:[e.jsx("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),e.jsx("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),e.jsx("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),e.jsx("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),e.jsx("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),e.jsxs("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[e.jsx("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),e.jsx("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),e.jsx(g,{sx:{mt:1},children:"No Data found"})]})}function _t(){var E,N,F,Y,G,J,K;const[l]=ke(),[n,p]=c.useState(""),[o,m]=c.useState(""),[x,f]=c.useState(),[j,T]=c.useState(),[y,d]=c.useState(""),[_,H]=c.useState(""),[ce,M]=c.useState(!1),[L,O]=c.useState(""),C="api",de=t=>{M(!0),he(t),f(t)},he=async t=>{await P.get(`/${C}/v1/card/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(a=>{a.data.status=="201"&&(m(a.data.data.name),O(a.data.data.cardNumber),p(a.data.data.cvv),d(a.data.data.expiry),H(a.data.data.status))}).catch(a=>{console.log("error",a)})};c.useEffect(()=>{B()},[]);const B=async()=>{var a;const t=Q(localStorage.getItem("token"));await P.get(`/${C}/v1/card/list/${(a=t==null?void 0:t.data)==null?void 0:a.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(r=>{r.data.status=="201"&&T(r.data.data)}).catch(r=>{console.log("error",r)})};let z=[];z=[j==null?void 0:j.map(t=>Je(t._id,t.createdAt,t.name,t.cardNumber,t.cvv,t.expiry,t.status))].sort((t,a)=>t.date<a.date?-1:1);const u=z[0]||[],W=()=>{M(!1),I(!1),f("")},[R,q]=c.useState(0),[v,pe]=c.useState(5),me=t=>{q(t)},xe=t=>{pe(parseInt(t.target.value,10)),q(0)},k=(t,a)=>{a=="error"?U.error(t,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):U.success(t,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},ue=async t=>{var a=confirm("Want to delete?");a&&await P.delete(`/${C}/v1/card/delete/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(r=>{r.data.status=="201"&&(k("Card is successfully deleted","success"),B())}).catch(r=>{console.log("error",r),k(r.response.message,"error")})},[s,I]=c.useState(!1),ge=(t,a)=>{var r=[];return t==""&&r.push({name:"Name is required"}),a.length==0&&r.push({cvv:"CVV is required"}),a.length!=3&&r.push({cvv:"CVV length should be 3"}),console.log("errros",r),r},fe=async t=>{var r;console.log(typeof n,n);const a=ge(o,n);if(a.length>0)I(a);else{I(!1);const V=Q(localStorage.getItem("token"));await P.patch(`/${C}/v1/card/update/${t}`,{name:o,card_id:t,user:(r=V==null?void 0:V.data)==null?void 0:r.id,cardnumber:L,expiry:y,cvv:n,status:_},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(b=>{b.data.status=="201"&&(k(b.data.message,"success"),B(),M(!1))}).catch(b=>{console.log("error",b),k(b.response.data.message,"error")})}};function je(t=""){return t.replace(/\D+/g,"")}function ve(t){const a=je(t);return a.length>=3?`${a.slice(0,2)}/${a.slice(2,4)}`:a}const be=t=>{const a=ve(t);d(a)},ye=Pe(),Ce=t=>{t.target.value=t.target.value.replace(/[^0-9]/g,""),p(t.target.value)};return e.jsxs(e.Fragment,{children:[e.jsx(g,{sx:{marginTop:"12px",fontSize:"15px"},children:e.jsxs($,{sx:{display:"flex",flexDirection:"column",gap:"20px",borderRadius:".5rem",color:"black",fontWeight:"700",border:`${l?"2px solid lightblue":"2px solid transparent"}`,background:`${l?"transparent":"white"}`,padding:"10px 12px"},children:[e.jsx(Ie,{sx:{color:`${l?"white":"black"}`},children:e.jsx(ze,{sx:{cursor:"pointer"},onClick:()=>ye("/cards")})}),e.jsx(g,{sx:{overflow:"auto"},children:e.jsx(g,{sx:{width:"100%",display:"table",tableLayout:"fixed"},children:e.jsx(ae,{component:ie,children:e.jsxs(se,{sx:{minWidth:500},"aria-label":"custom pagination table",children:[e.jsx(Ve,{children:e.jsx(h,{className:`${l?"avatarDark":"avatarLight"}`,children:Ge.map(t=>e.jsx(i,{style:{minWidth:t.minWidth},children:t.label},t.id))})}),e.jsxs(le,{children:[(v>0?u==null?void 0:u.slice(R*v,R*v+v):u).map(t=>e.jsxs(h,{children:[e.jsx(i,{component:"th",scope:"row",children:$e(t==null?void 0:t.date).format("YYYY-MM-DD")}),e.jsx(i,{style:{width:50},component:"th",scope:"row",children:t==null?void 0:t.name}),e.jsx(i,{style:{width:160},component:"th",scope:"row",children:t==null?void 0:t.number}),e.jsx(i,{style:{width:160},component:"th",scope:"row",children:t==null?void 0:t.cvc}),e.jsx(i,{style:{width:160},component:"th",scope:"row",children:t==null?void 0:t.expiry}),e.jsx(i,{style:{width:160},component:"th",scope:"row",children:(t==null?void 0:t.status)==!0?"Active":"In Active"}),e.jsx(i,{component:"th",scope:"row",children:e.jsxs($,{sx:{display:"flex",flexDirection:"row",gap:"10px"},children:[e.jsx($,{children:e.jsx(De,{sx:{cursor:"pointer"},onClick:()=>ue(t==null?void 0:t.id)})}),e.jsx($,{children:e.jsx(ne,{sx:{cursor:"pointer"},onClick:()=>de(t==null?void 0:t.id)})})]})})]},t==null?void 0:t.date)),(u==null?void 0:u.length)==0&&e.jsx(h,{style:{height:53*u},children:e.jsx(i,{colSpan:7,children:e.jsx(Qe,{})})})]}),e.jsx(Te,{sx:{background:"white"},children:e.jsx(h,{children:e.jsx(Me,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:7,count:z.length,rowsPerPage:v,page:R,slotProps:{select:{inputProps:{"aria-label":"rows per page"},native:!0}},sx:{color:"black"},onPageChange:me,onRowsPerPageChange:xe,ActionsComponent:oe})})})]})})})})]})}),e.jsxs(Ae,{open:ce,onClose:W,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(He,{id:"alert-dialog-title",className:`${l?"avatarDark":"avatarLight"}`,children:"Edit Card Details"}),e.jsx(_e,{children:e.jsx(Le,{id:"alert-dialog-description",children:e.jsx(g,{sx:{overflow:"auto"},children:e.jsx(g,{sx:{width:"100%",display:"table",tableLayout:"fixed"},children:e.jsx(ae,{component:ie,children:e.jsx(se,{sx:{height:200},"aria-label":"simple table",children:e.jsxs(le,{sx:{height:"200px"},children:[e.jsxs(h,{children:[e.jsx(i,{children:"Card Name"}),e.jsxs(i,{sx:{color:"white"},children:[e.jsx("input",{type:"text",id:"name",value:o,style:{width:"100%",height:"40px",border:`${(E=s==null?void 0:s[0])!=null&&E.name?"1px solid red":"1px solid silver"}`},name:"name",onChange:t=>m(t.target.value)}),((N=s==null?void 0:s[0])==null?void 0:N.name)&&e.jsx("span",{style:{color:"red"},children:(F=s==null?void 0:s[0])==null?void 0:F.name})]})]}),e.jsxs(h,{children:[e.jsx(i,{children:"Card Number"}),e.jsx(i,{children:e.jsx("input",{style:{width:"100%",color:`${l?"white":"black"}`,height:"40px",border:"1px solid silver"},type:"number",value:L,name:"cardNumber",onChange:t=>O(t.target.value),disabled:!0})})]}),e.jsxs(h,{children:[e.jsx(i,{children:"CVV"}),e.jsxs(i,{children:[e.jsx(Oe,{value:n,inputProps:{maxLength:3},onInput:t=>Ce(t)}),e.jsx("br",{}),((Y=s==null?void 0:s[0])==null?void 0:Y.cvv)&&e.jsx("span",{style:{color:"red"},children:(G=s==null?void 0:s[0])==null?void 0:G.cvv})," "," ",e.jsx("br",{}),((J=s==null?void 0:s[1])==null?void 0:J.cvv)&&e.jsx("span",{style:{color:"red"},children:(K=s==null?void 0:s[1])==null?void 0:K.cvv})]})]}),e.jsxs(h,{children:[e.jsx(i,{children:"Expiry Date"}),e.jsx(i,{children:e.jsx("input",{style:{width:"100%",color:`${l?"white":"black"}`,height:"40px",border:"1px solid silver"},min:`${new Date().toISOString().split("T")[0]}`,value:y,name:"expiry",onChange:t=>be(t.target.value),disabled:!0})})]}),e.jsxs(h,{children:[e.jsx(i,{children:"Card Status"}),e.jsx(i,{children:e.jsxs(We,{value:_,name:"status",onChange:t=>H(t.target.value),children:[e.jsx(re,{value:"true",children:"Active"}),e.jsx(re,{value:"false",children:"In Active"})]})})]})]})})})})})})}),e.jsxs(qe,{children:[e.jsx(w,{onClick:()=>fe(x),children:"Save"}),e.jsx(w,{onClick:W,variant:"contained",children:"Close"})]})]})]})}export{_t as default};
