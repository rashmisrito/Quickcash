import{R as o,f as ae,r as te,j as a}from"./index-CGCJRBXs.js";import{a as S,B as A}from"./App-XreTAmzn.js";import{h as se}from"./moment-Cl4UOzQZ.js";import{P as D}from"./index-D4i6MgDl.js";import{T as ne,a as re,d as I,b as V}from"./FirstPage-BKQpZ07i.js";import{d as E}from"./KeyboardArrowLeft-i5DtCEUm.js";import{d as q}from"./KeyboardArrowRight-DTwXVoMT.js";import{C as v,b as le}from"./ColorButton-DU_nmFNW.js";import{T as oe,a as ce,b as z,c as m}from"./Tr-DGe9hdZ0.js";/* empty css                                  */import{B as T}from"./Box-BfZ9aPM0.js";import{G as c,u as ie}from"./Grid-CN4_8jt6.js";import{T as de}from"./TableBody-kXsojO-5.js";import{S as pe}from"./Switch-Dlnv2i6N.js";import{S as he}from"./Select-hHeL8oeK.js";import{M as xe}from"./MenuItem-DT3WvV_t.js";import{T as ue}from"./TextField-Bhii07AO.js";import{D as ge,a as me}from"./DialogContent-hdUF_Hv_.js";import{I as R}from"./IconButton-DdTwUNw0.js";import{s as fe}from"./styled-VyqOG4MM.js";import"./Tablelvl2Context-B2jmvGEu.js";import"./Menu-nsvb1963.js";import"./Backdrop-CfdoqMb9.js";import"./utils-vkrW-C7n.js";import"./TransitionGroupContext-DCu7Y_zK.js";import"./createSvgIcon-CWJBf_dQ.js";import"./ButtonBase--q0F1ziJ.js";import"./TableCell-BSK8M-MP.js";import"./Toolbar-m-EyFJSu.js";import"./createSvgIcon-DkNK3VsP.js";import"./isMuiElement-C_WCXon2.js";import"./Button-DmrIAVQi.js";import"./SwitchBase-DpfsYpNO.js";import"./index-J02NhpFH.js";import"./dividerClasses-CL_qDVcm.js";import"./listItemTextClasses-BWrrQlVX.js";import"./FormControl-y3ZRJ1PJ.js";function Y(n){const i=ie(),{count:u,page:r,rowsPerPage:g,onPageChange:d}=n,s=p=>{d(p,0)},j=p=>{d(p,r-1)},B=p=>{d(p,r+1)},y=p=>{d(p,Math.max(0,Math.ceil(u/g)-1))};return a.jsxs(T,{sx:{flexShrink:0,ml:2.5},children:[a.jsx(R,{onClick:s,disabled:r===0,"aria-label":"first page",children:i.direction==="rtl"?a.jsx(I,{}):a.jsx(V,{})}),a.jsx(R,{onClick:j,disabled:r===0,"aria-label":"previous page",children:i.direction==="rtl"?a.jsx(q,{}):a.jsx(E,{})}),a.jsx(R,{onClick:B,disabled:r>=Math.ceil(u/g)-1,"aria-label":"next page",children:i.direction==="rtl"?a.jsx(E,{}):a.jsx(q,{})}),a.jsx(R,{onClick:y,disabled:r>=Math.ceil(u/g)-1,"aria-label":"last page",children:i.direction==="rtl"?a.jsx(V,{}):a.jsx(I,{})})]})}Y.propTypes={count:D.number.isRequired,onPageChange:D.func.isRequired,page:D.number.isRequired,rowsPerPage:D.number.isRequired};const je=[{id:"date",label:"Date",minWidth:170},{id:"code",label:"Currency",minWidth:100},{id:"rates",label:"Rates",minWidth:100},{id:"default",label:"Default Status",minWidth:100},{id:"action",label:"Action",minWidth:120}];function ye(n,i,u,r,g,d,s){return{id:n,date:i,currencyName:u,base_code:r,rates:g,defaultc:d,status:s}}const be=fe("div")(({theme:n})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"right",height:"100%","& .ant-empty-img-1":{fill:n.palette.mode==="light"?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:n.palette.mode==="light"?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:n.palette.mode==="light"?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:n.palette.mode==="light"?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:n.palette.mode==="light"?"0.8":"0.08",fill:n.palette.mode==="light"?"#f5f5f5":"#fff"}}));function Ce(){return a.jsxs(be,{children:[a.jsx("svg",{width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:a.jsxs("g",{fill:"none",fillRule:"evenodd",children:[a.jsxs("g",{transform:"translate(24 31.67)",children:[a.jsx("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),a.jsx("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),a.jsx("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),a.jsx("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),a.jsx("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),a.jsxs("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[a.jsx("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),a.jsx("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),a.jsx(T,{sx:{mt:1},children:"No Data found"})]})}function ra(){const[n,i]=o.useState(!1),[u,r]=o.useState([]),g=e=>{r(e),i(!0)},d=()=>{i(!1)},[s]=ae(),[j,B]=o.useState(),[y,p]=o.useState([]);o.useState("all");const b="api";te.useEffect(()=>{$(),G()},[]);const $=async()=>{await S.get(`/${b}/v1/currency/list`).then(e=>{var t;e.data.status=="201"&&B((t=e==null?void 0:e.data)==null?void 0:t.data)}).catch(e=>{console.log("error",e)})},G=async()=>{await S.get(`/${b}/v1/currency/currency-list`).then(e=>{var t;e.data.status=="201"&&p((t=e==null?void 0:e.data)==null?void 0:t.data)}).catch(e=>{console.log("error",e)})},f=(e,t)=>{t=="error"?A.error(e,{position:"top-left",autoClose:6900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):A.success(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},X=async()=>{await S.post(`/${b}/v1/currency/add`,{base_code:O,currencyName:Z},{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(e=>{var t;e.data.status=="201"&&(N(!1),H(""),_(""),f((t=e==null?void 0:e.data)==null?void 0:t.message,"Success"),$())}).catch(e=>{var t,l;console.log("error",e),f((l=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:l.message,"error")})},J=async(e,t)=>{var l=confirm("Are you sure to delete currency");l==!0&&await S.post(`/${b}/v1/currency/delete/${e}`,{base_code:t},{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(h=>{var P;h.data.status=="201"&&($(),f((P=h==null?void 0:h.data)==null?void 0:P.message,"Success"))}).catch(h=>{var P,L;console.log("error",h),f((L=(P=h==null?void 0:h.response)==null?void 0:P.data)==null?void 0:L.message,"error")})};let W=[];W=[j==null?void 0:j.map(e=>ye(e==null?void 0:e._id,e==null?void 0:e.createdAt,e==null?void 0:e.currencyName,e==null?void 0:e.base_code,e==null?void 0:e.conversion_rates[0],e==null?void 0:e.defaultc,e==null?void 0:e.status))].sort((e,t)=>e.date<t.date?-1:1);const x=W[0]||[],[M,F]=o.useState(0),[C,K]=o.useState(5),Q=(e,t)=>{console.log("New Page",e),F(t)},U=e=>{K(parseInt(e.target.value,10)),F(0)},[O,H]=o.useState(""),[Z,_]=o.useState(""),[k,N]=o.useState(!1),w=e=>{const t=e.split("-");H(t[0]),_(t[1])},ee=async e=>{var t;await S.patch(`/${b}/v1/currency/update/${(t=e==null?void 0:e.target)==null?void 0:t.value}`,{isDefault:e.target.checked},{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(l=>{l.data.status=="201"&&(f(l.data.message,"success"),$())}).catch(l=>{console.log("error",l),f(l.response.data.message,"error")})};return a.jsxs(a.Fragment,{children:[a.jsxs(T,{sx:{marginLeft:{md:"7%"},marginTop:{xs:"0px",md:"12px"},fontSize:"15px",width:{md:"91%"}},children:[a.jsx(c,{sx:{display:"flex",justifyContent:"flex-end",marginBottom:"12px"},children:!k&&a.jsx(v,{onClick:()=>N(!k),children:"Create Currency"})}),k?null:a.jsx(a.Fragment,{children:a.jsx(c,{sx:{display:"flex",flexDirection:"column",gap:"20px",borderRadius:".5rem",fontWeight:"700",background:`${s?"#183153":"white"}`,color:`${s?"white":"black"}`,padding:"3px 3px"},children:a.jsxs(oe,{style:{background:`${s?"":"#F2F3FE"}`,color:`${s?"white":"black"}`},children:[a.jsx(ce,{children:a.jsx(z,{className:`${s?"avatarDark":"avatarLight"}`,children:je.map(e=>a.jsx(m,{width:"220",style:{padding:"12px",background:"#8657E5",color:"white"},children:e.label},e.id))})}),a.jsxs(de,{children:[(C>0?x==null?void 0:x.slice(M*C,M*C+C):x).map(e=>a.jsxs(z,{children:[a.jsx(m,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:se(e==null?void 0:e.date).format("YYYY-MM-DD")}),a.jsx(m,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:a.jsx("span",{style:{border:"1px solid green",padding:"12px",borderRadius:"20px",background:`${s?"green":""}`},children:e==null?void 0:e.base_code})}),a.jsx(m,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:a.jsx(v,{onClick:()=>g(e==null?void 0:e.rates),children:"View Rates"})}),a.jsx(m,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:a.jsx(pe,{checked:(e==null?void 0:e.defaultc)==!0,value:e==null?void 0:e.id,onChange:ee,color:"warning",inputProps:{"aria-label":"controlled"}})}),a.jsx(m,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:a.jsx(le,{onClick:()=>J(e==null?void 0:e.id,e==null?void 0:e.base_code),children:"Delete"})})]},e==null?void 0:e.date)),(x==null?void 0:x.length)==0&&a.jsx(z,{children:a.jsx(m,{colSpan:6,children:a.jsx(Ce,{})})})]}),a.jsx(ne,{sx:{background:`${s?"white":""}`,color:"black"},children:a.jsx(z,{children:a.jsx(re,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:6,count:x.length,rowsPerPage:C,page:M,slotProps:{select:{inputProps:{"aria-label":"rows per page"},native:!0}},sx:{color:"black"},onPageChange:Q,onRowsPerPageChange:U,ActionsComponent:Y})})})]})})}),k?a.jsxs(T,{sx:{background:"white",padding:"12px 16px"},children:[a.jsx(c,{children:a.jsx(v,{onClick:()=>N(!k),children:"Back"})}),a.jsxs(c,{container:!0,sx:{marginTop:"20px"},spacing:2,children:[a.jsxs(c,{item:!0,xs:12,sm:6,children:[a.jsx("label",{htmlFor:"Currency Name",children:"Currency Name"}),a.jsx(he,{onChange:e=>w(e.target.value),sx:{color:`${s?"white":"black"}`},fullWidth:!0,children:y==null?void 0:y.map((e,t)=>a.jsx(xe,{value:`${e==null?void 0:e.CurrencyCode}-${e==null?void 0:e.CurrencyName}`,sx:{color:`${s?"white":"black"}`},children:e==null?void 0:e.CurrencyName},t))})]}),a.jsxs(c,{item:!0,xs:12,sm:6,children:[a.jsx("label",{htmlFor:"Currency Code",children:"Currency Code"}),a.jsx(ue,{id:"currencyCode",name:"currencyCode",value:O,fullWidth:!0,disabled:!0})]}),a.jsx(c,{item:!0,xs:12,sm:12,children:a.jsx(v,{onClick:()=>X(),children:"Submit"})})]})]}):null]}),a.jsxs(ge,{open:n,fullWidth:!0,maxWidth:"md",onClose:d,sx:{position:"absolute",zIndex:"99999",backdropFilter:"blur(12px)"},children:[a.jsxs(c,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"12px 14px"},children:[a.jsx(c,{sx:{color:`${s?"white":"black"}`},children:"Currency Rates"}),a.jsx(c,{children:a.jsx(v,{onClick:d,children:"X"})})]}),a.jsx(me,{children:a.jsx("table",{width:"100%",border:1,style:{borderCollapse:"collapse"},children:a.jsx("tbody",{children:Object.entries(u).map(([e,t])=>a.jsx(a.Fragment,{children:a.jsxs("tr",{children:[a.jsx("td",{style:{color:`${s?"white":"black"}`,padding:"12px"},children:e}),a.jsx("td",{style:{color:`${s?"white":"black"}`,padding:"12px"},children:t})]},e)}))})})})]})]})}export{ra as default};
