import{k as I,u as T,f as B,R as l,r as D,j as e}from"./index-DWLfyV7i.js";import{a as j,n as P,j as Q,B as b}from"./App-DrtOZD42.js";import{C as S}from"./ColorButton-zYRWfhx1.js";import{d as _}from"./CloudUpload-pQ7SghnW.js";import{d as q}from"./KeyboardBackspace-B0CDdpKp.js";import{d as O}from"./DoneOutlineOutlined-iGO7Cb7F.js";import{T as F}from"./Toolbar-BcyIqHFS.js";import{B as L}from"./Box-DVjlkC-E.js";import{T as A}from"./Typography-BbgNLZ5J.js";import{G as i}from"./Grid-C5WZ5yPx.js";import{T as E}from"./TextField-zPXjT3u6.js";import{C as H}from"./Card-CaGcc8YV.js";import{C as z}from"./CardHeader-Cf42GqgE.js";import{A as G}from"./Avatar-BboZul_l.js";import{R as U,a as C}from"./RadioGroup-CE1oKDa4.js";import{F as v}from"./FormControlLabel-D7CUr9kq.js";import"./styled-UvVi3zCA.js";import"./Button-BwJo4BJ8.js";import"./ButtonBase-DuAtvFfD.js";import"./TransitionGroupContext-CPZXwPBU.js";import"./createSvgIcon-j2CwpMz4.js";import"./createSvgIcon-Bxm2ewFX.js";import"./isMuiElement-DaoDYf4M.js";import"./FormControl-BXsli751.js";import"./Select-B6J5njAN.js";import"./Menu-qMneCLiP.js";import"./Backdrop-BFkPp487.js";import"./utils-6TVLZy64.js";import"./index-kO-n-79N.js";import"./useSlot-DbQXK8bF.js";import"./SwitchBase-Cuej0o_I.js";import"./Stack-7i-iYPaL.js";import"./styled-DNCzWk1t.js";import"./createStyled-BzPMoOi7.js";function Re(){const o=I(),m=T(),[n]=B(),[d,c]=l.useState(""),[p,y]=l.useState(""),u="api",[a,w]=l.useState({preview:"",raw:""});D.useEffect(()=>{N(o==null?void 0:o.id)},[o==null?void 0:o.id]);const N=async t=>{await j.get(`/${u}/v1/qrcode/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(r=>{r.data.status=="201"&&(c(r.data.data.title),h(r.data.data.IsDefault),y(r.data.data.image))}).catch(r=>{console.log("error",r)})},g=(t,r)=>{r=="error"?b.error(t,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):b.success(t,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},k=async t=>{var f;t.preventDefault();const r=Q(localStorage.getItem("token"));await j.patch(`/${u}/v1/qrcode/update/${o==null?void 0:o.id}`,{user:(f=r==null?void 0:r.data)==null?void 0:f.id,title:d,qrCodeImage:a==null?void 0:a.raw,isDefault:x},{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(s=>{s.data.status=="201"&&(g(s.data.message,"success"),m("/settings?filter=Payment_Qr_Code"))}).catch(s=>{console.log("error",s),g(s.response.data.message,"error")})},[x,h]=l.useState("yes"),R=t=>{h(t.target.value)},$=t=>{t.target.files.length&&w({preview:URL.createObjectURL(t.target.files[0]),raw:t.target.files[0]})};return e.jsx(e.Fragment,{children:e.jsx(F,{sx:{display:"flex",flexDirection:"column",borderRadius:".5rem",p:"10px",background:{xs:`${n?"#183153":"white"}`,sm:`${n?"":"white"}`}},children:e.jsxs(L,{sx:{marginTop:"0%",borderRadius:".5rem"},children:[e.jsx(A,{children:e.jsx(q,{sx:{cursor:"pointer",marginBottom:"10px",color:`${n?"white":"black"}`},onClick:()=>m("/settings?filter=Payment_Qr_Code")})}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsxs(i,{item:!0,xs:12,sm:12,children:[e.jsx("label",{children:"Title"}),e.jsx(E,{required:!0,id:"name",name:"name",fullWidth:!0,onChange:t=>c(t.target.value),sx:{border:"1px solid silver"},value:d,inputProps:{shrink:!0}})]}),e.jsx(i,{item:!0,xs:12,sm:12,children:e.jsxs(H,{sx:{marginBottom:"10px",maxWidth:345},children:[e.jsx(z,{avatar:e.jsx(G,{sx:{bgcolor:P[500]},"aria-label":"recipe",children:"QR"}),title:"Upload Payment QR-Code"}),e.jsxs("div",{className:"Neon Neon-theme-dragdropbox",children:[e.jsx("input",{style:{zIndex:"999",opacity:"0",width:"100%",height:"100%",background:"silver",position:"absolute",right:"0px; left: 0px",marginRight:"auto",marginLeft:"auto"},name:"files[]",id:"filer_input2",type:"file",onChange:$}),p?e.jsx("img",{crossOrigin:"anonymous",src:`https://quickcash.oyefin.com/qrcode/${p}`,alt:"payment QR-Code image",width:"100%",height:"100%"}):a.preview?e.jsx("img",{src:a.preview,alt:"dummy",width:"100%",height:"100%"}):e.jsx("div",{className:"Neon-input-dragDrop",children:e.jsxs("div",{className:"Neon-input-inner",children:[e.jsx("div",{className:"Neon-input-icon",children:e.jsx("i",{className:"fa fa-file-image-o"})}),e.jsx("div",{className:"Neon-input-text"}),e.jsx("a",{className:"Neon-input-choose-btn blue",children:e.jsx(_,{style:{cursor:"pointer"}})})]})})]})]})}),e.jsxs(i,{item:!0,xs:12,sm:12,sx:{marginLeft:"24px",marginTop:"12px",background:`${n?"white":""}`,color:"black"},children:[e.jsx("label",{children:"Default:"}),e.jsxs(U,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:x,onChange:R,children:[e.jsx(v,{value:"yes",control:e.jsx(C,{}),label:"Yes"}),e.jsx(v,{value:"no",control:e.jsx(C,{}),label:"No"})]})]}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(S,{color:"primary",onClick:t=>k(t),children:[e.jsx(O,{sx:{mr:1}}),"Submit"]})})]})]})})})}export{Re as default};
