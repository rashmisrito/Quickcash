import{f as k,u as B,R as c,j as e}from"./index-C7uDDRzi.js";import{n as F,j as $,a as I,B as h}from"./App-DlbqwX0_.js";import{C as D}from"./ColorButton-ek59cplY.js";import{d as O}from"./CloudUpload-BktvWSmE.js";import{d as S}from"./KeyboardBackspace-CMiK9GPp.js";import{d as H}from"./DoneOutlineOutlined-CbPyxpe1.js";import{u as L}from"./useValidation-CxwCDOQu.js";import{T as P}from"./Toolbar-penBkzvF.js";import{B as A}from"./Box-DuB8RHF0.js";import{T as Q}from"./Typography-Bqz4o4Sm.js";import{G as m}from"./Grid-BSdJsjIu.js";import{T as V,F as _}from"./TextField-IfJfvW4r.js";import{C as q}from"./Card-BiLxSCYH.js";import{C as G}from"./CardHeader-CLodL6jU.js";import{A as U}from"./Avatar-BcZaD7Qf.js";import{F as W}from"./FormControl-Bz1rNlOw.js";import{R as z,a as g}from"./RadioGroup-Bx5mAFlX.js";import{F as f}from"./FormControlLabel-BFbVu_t-.js";import"./styled-DpNLFuLo.js";import"./Button-bVqxygml.js";import"./ButtonBase-Cb7r6f8i.js";import"./TransitionGroupContext-BuEQjJx-.js";import"./createSvgIcon-D3EdHNeB.js";import"./createSvgIcon-CvjaZCwn.js";import"./isMuiElement-MrDrvzNs.js";import"./Select-DVBf2x5a.js";import"./Menu-DLoDL8Vj.js";import"./Backdrop-92jRYuW8.js";import"./utils-D1Bwf65I.js";import"./index-COV97QJW.js";import"./useSlot-DrEK-L9N.js";import"./SwitchBase-F3oRA7lj.js";import"./Stack-DmJXJuix.js";import"./styled-Ceg76Xqq.js";import"./createStyled-CkGSHkYG.js";function Be(){const[l]=k(),{errors:n,validate:o}=L(),p=B(),[d,j]=c.useState(""),[s,b]=c.useState({preview:"",raw:""}),v="api",u=(r,a)=>{a=="error"?h.error(r,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):h.success(r,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},C=async r=>{var a;if(r.preventDefault(),!o("title",d)&&!o("files[]",s.raw)){const i=$(localStorage.getItem("token"));await I.post(`/${v}/v1/qrcode/add`,{user:(a=i==null?void 0:i.data)==null?void 0:a.id,title:d,qrCodeImage:s==null?void 0:s.raw,isDefault:x},{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(t=>{t.data.status=="201"&&(u(t.data.message,"success"),p("/settings"))}).catch(t=>{console.log("error",t),u(t.response.data.message,"error")})}else o("title",d)&&o("title",d),o("files[]",s.raw)&&o("files[]",s.raw)},[x,w]=c.useState("yes"),y=r=>{w(r.target.value)},N=r=>{r.target.files.length&&(b({preview:URL.createObjectURL(r.target.files[0]),raw:r.target.files[0]}),T(r))},R=r=>{const{name:a,value:i}=r.target,t=o(a,i);console.log(t)},T=r=>{const{name:a,files:i}=r.target,t=o(a,i[0]);console.log(t)};return e.jsx(e.Fragment,{children:e.jsx(P,{sx:{display:"flex",flexDirection:"column",borderRadius:".5rem",p:"10px",background:{xs:`${l?"#183153":"white"}`,sm:`${l?"":"white"}`},width:{xs:"100%",lg:"80%"}},children:e.jsxs(A,{sx:{marginTop:"0%",borderRadius:".5rem"},children:[e.jsx(Q,{children:e.jsx(S,{sx:{cursor:"pointer",marginBottom:"10px",color:`${l?"white":"black"}`},onClick:()=>p("/settings")})}),e.jsxs(m,{container:!0,spacing:3,children:[e.jsxs(m,{item:!0,xs:12,sm:12,children:[e.jsx("label",{children:"Title"}),e.jsx(V,{required:!0,id:"name",name:"title",fullWidth:!0,sx:{border:`${l?"1px solid white":""}`},onChange:r=>j(r.target.value),onBlur:R,error:!!n.title,helperText:n.title,inputProps:{shrink:!0}})]}),e.jsx(m,{item:!0,xs:12,sm:12,children:e.jsxs(q,{sx:{marginBottom:"10px",maxWidth:345},children:[e.jsx(G,{avatar:e.jsx(U,{sx:{bgcolor:F[500]},"aria-label":"recipe",children:"QR"}),title:"Upload Payment QR-Code"}),e.jsxs("div",{className:"Neon Neon-theme-dragdropbox",children:[e.jsx("input",{style:{zIndex:"999",opacity:"0",width:"100%",height:"100%",background:"silver",position:"absolute",right:"0px; left: 0px",marginRight:"auto",marginLeft:"auto"},name:"files[]",id:"filer_input2",type:"file",onChange:N}),e.jsx(W,{fullWidth:!0,error:!!n["files[]"],children:n["files[]"]&&e.jsx(_,{children:n["files[]"]})}),s.preview?e.jsx("img",{src:s.preview,alt:"dummy",width:"100%",height:"100%"}):e.jsx("div",{className:"Neon-input-dragDrop",children:e.jsxs("div",{className:"Neon-input-inner",children:[e.jsx("div",{className:"Neon-input-icon",children:e.jsx("i",{className:"fa fa-file-image-o"})}),e.jsx("div",{className:"Neon-input-text"}),e.jsx("a",{className:"Neon-input-choose-btn blue",children:e.jsx(O,{style:{cursor:"pointer"}})})]})})]})]})}),e.jsxs(m,{item:!0,xs:12,sm:12,sx:{marginLeft:"24px",marginTop:"12px",background:`${l?"white":""}`,color:"black"},children:[e.jsx("label",{children:"Default:"}),e.jsxs(z,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:x,onChange:y,children:[e.jsx(f,{value:"yes",control:e.jsx(g,{}),label:"Yes"}),e.jsx(f,{value:"no",control:e.jsx(g,{}),label:"No"})]})]}),e.jsx(m,{item:!0,xs:12,children:e.jsxs(D,{color:"primary",onClick:r=>C(r),children:[e.jsx(H,{sx:{mr:1}})," Submit"]})})]})]})})})}export{Be as default};
