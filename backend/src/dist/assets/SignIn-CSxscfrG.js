import{j as e,u as T,R as h,r as b,L as p}from"./index-BoluCWJx.js";import{i as _,a as g,B as C,c as q}from"./App-DmzB4KYc.js";import{u as R}from"./useValidation-DZ4dpcXb.js";import{A as $}from"./AuthContext-COScJVHe.js";import{d as W}from"./Visibility-BsKUHnXG.js";import{r as z}from"./createSvgIcon-DDiySQ4J.js";import{T as E}from"./ThemeProvider-C-U-cgaF.js";import{G as o}from"./Grid-CDAIVjPl.js";import{P as M}from"./Menu-BmC6YJiv.js";import{T as N}from"./TextField-BjXLReKG.js";import{O as V}from"./Select-aus-Z7PH.js";import{I as H}from"./InputAdornment-BH4H-f9U.js";import{I as G}from"./IconButton-CHMrJ6Gi.js";import{F as Q}from"./FormControlLabel-CcoHAiZW.js";import{C as U}from"./Checkbox-BIz9sux_.js";import{B as Y}from"./Button-CGTIOcYX.js";import{T as J}from"./Typography-DPkJNBsU.js";import"./createSvgIcon-i4Ddu0pI.js";import"./styled-BE7uoR5C.js";import"./TransitionGroupContext-D5Gal4xy.js";import"./isMuiElement-Bzzx93h0.js";import"./ButtonBase-Cc0NCTY7.js";import"./Backdrop-BiRxOpLA.js";import"./utils-PFTex4TT.js";import"./FormControl-BiEJnuIY.js";import"./Stack-CPSNaoGK.js";import"./styled-C0obRrxL.js";import"./createStyled-B6TKEMzY.js";import"./SwitchBase-Cr2Iechv.js";var f={},K=_;Object.defineProperty(f,"__esModule",{value:!0});var k=f.default=void 0,X=K(z()),Z=e;k=f.default=(0,X.default)((0,Z.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff");function ee(l){return e.jsxs(J,{variant:"body2",color:"text.secondary",align:"center",...l,children:["Copyright Â© ",e.jsx(p,{color:"inherit",to:"/",style:{textDecoration:"none"},children:"Quick Cash"})," ",new Date().getFullYear(),"."]})}const te=q();function Be(){const l=T(),{errors:r,validate:i}=R(),[m,S]=h.useState(""),[u,I]=h.useState(""),[j,D]=h.useState(!1),{authenticated:P,setAuthenticated:w}=b.useContext($),F=()=>D(t=>!t),x="api";b.useEffect(()=>{localStorage.getItem("token")&&A()},[]);const A=async()=>{await g.post(`/${x}/v1/user/auth`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(t=>{t.data.status==201&&(w(!0),l("/home"))}).catch(t=>{console.log("error",t),s(t.response.data.message,"error")})},B=async()=>{!i("email",m)&&!i("password",u)?await g.post(`/${x}/v1/user/login`,{email:m,password:u}).then(t=>{t.status==200&&(L(t.data.data._id),w(!0),console.log(P),localStorage.setItem("user","loggedin"),localStorage.setItem("token",t.data.token),s(`${t.data.data.name} is Logged In Successfully!!!`,"success"),l("/home?currency=all"))}).catch(t=>{s(t.response.data.message,"error"),console.log("Login api error",t)}):(i("email",m)&&s(r.email,"error"),i("password",u)&&s(r.password,"error"))},L=async t=>{var a,d,c,y;await g.post(`/${x}/v1/session/add`,{user:t,device:(c=(d=(a=navigator==null?void 0:navigator.userAgentData)==null?void 0:a.brands)==null?void 0:d[0])==null?void 0:c.brand,OS:(y=navigator==null?void 0:navigator.userAgentData)==null?void 0:y.platform,status:1,isActiveNow:1}).then(n=>{n.data.status==201&&localStorage.setItem("usersessionid",n.data.data._id)}).catch(n=>{s(n.response.data.message,"error"),console.log("Login api error",n)})},s=(t,a)=>{a=="error"?C.error(t,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):C.success(t,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},v=t=>{const{name:a,value:d}=t.target,c=i(a,d);console.log(c)},O=t=>{t.preventDefault()};return e.jsx(E,{theme:te,children:e.jsxs(o,{container:!0,sx:{alignItems:"",height:"100vh"},children:[e.jsx(o,{item:!0,sm:7,md:8,sx:{display:{xs:"none",sm:"block"}},children:e.jsx("img",{src:"https://quickcash.oyefin.com/loginbg.png",width:"90%",height:"690px",style:{overflow:"hidden"}})}),e.jsx(o,{item:!0,xs:12,sm:5,md:4,className:"background-imagedd",sx:{padding:"12px",backgroundImage:{xs:"none",sm:"url(https://quickcash.oyefin.com/kl.png)"},backgroundRepeat:"no-repeat",height:"100vh",backgroundSize:"cover"},component:M,elevation:3,square:!0,children:e.jsxs(o,{sx:{display:"flex",flexDirection:"column",padding:"12px",backdropFilter:"blur(3px)",marginTop:{md:"120px"}},children:[e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs(o,{sx:{fontWeight:"700",fontSize:{xs:"30px",sm:"36px"}},children:["Welcome to ",e.jsx("span",{className:"float",style:{color:"#1976D2"},children:"Quick Cash"})]}),e.jsx(o,{sx:{fontSize:"16px"},children:"Please sign-in to your account and start the journey"})]}),e.jsx(o,{sx:{padding:"12px 2px"},children:e.jsx(N,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:t=>{S(t.target.value)},onBlur:v,error:!!r.email,helperText:r.email})}),e.jsx(o,{sx:{padding:"12px 2px"},children:e.jsx(V,{required:!0,fullWidth:!0,name:"password",label:"Password",placeholder:"Password",type:j?"text":"password",id:"password",autoComplete:"current-password",onChange:t=>{I(t.target.value)},sx:{background:"white"},onBlur:v,error:!!r.password,endAdornment:e.jsx(H,{position:"end",children:e.jsx(G,{"aria-label":"toggle password visibility",onClick:F,onMouseDown:O,edge:"end",children:j?e.jsx(k,{}):e.jsx(W,{})})})})}),r!=null&&r.password?e.jsx(e.Fragment,{children:e.jsx(o,{style:{color:"red",display:"flex",padding:"12px"},children:r.password})}):null,e.jsxs(o,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap",padding:"12px 2px"},children:[e.jsx(o,{children:e.jsx(Q,{control:e.jsx(U,{value:"remember",color:"primary"}),label:"Remember me"})}),e.jsx(o,{children:e.jsx(p,{to:"/forgot-password",style:{textDecoration:"none",color:"#696CFF"},children:"Forgot password?"})})]}),e.jsx(o,{children:e.jsx(Y,{type:"button",onClick:()=>B(),fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"})}),e.jsxs(o,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(o,{children:e.jsx(p,{to:"/register",style:{textDecoration:"none"},children:"New on our platform?"})}),e.jsx(o,{children:e.jsx(p,{to:"/register",style:{textDecoration:"none",color:"#696CFF",marginLeft:"6px"},children:"Create an account"})})]}),e.jsx(o,{children:e.jsx(ee,{sx:{mt:8,mb:4}})})]})})]})})}export{Be as default};
