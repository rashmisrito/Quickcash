import{j as e,u as Te,r as a,f as Fe,R as Be}from"./index-CPyIBKv5.js";import{j as Ee,a as T,g as F}from"./App-CPA_Lu-d.js";import{u as We}from"./useAccount-tLjo2vcd.js";import{d as B}from"./KeyboardArrowRight-Ds7yJ1IK.js";import{d as G,b as Re,C as _,a as Ne}from"./ColorButton-p_8AmmsY.js";import{B as Oe}from"./Backdrop-5VrCmbBJ.js";import{C as w}from"./CircularProgress-CnrtTxNb.js";import{G as o}from"./Grid-ijiQ2gXa.js";import{c as Pe}from"./createSvgIcon-CJCtbkVa.js";import{T as J}from"./Typography-32GqnDkD.js";import{B as He}from"./Box-Cts58nYT.js";import{T as E}from"./TextField-CGe-lY_w.js";import{S as W}from"./Select-Cu2oDfAu.js";import{M as R}from"./MenuItem-BOkCQE_H.js";import{D as Le,a as Ue}from"./DialogContent-DGobNMNn.js";import{D as ze}from"./DialogTitle-LBj4pwAt.js";import{D as Me}from"./DialogContentText-Dg3Pataw.js";import{D as Ye}from"./DialogActions-CGO26BuF.js";import{S as Ge}from"./Slide-BqJoCk_T.js";import"./createSvgIcon-DK6HOpVs.js";import"./styled-D3btvjLo.js";import"./TransitionGroupContext-DpwKRQDB.js";import"./isMuiElement-CtMSz7xH.js";import"./ButtonBase-lj8ryPQQ.js";import"./Button-mU0fsZ6C.js";import"./utils-27lUOG69.js";import"./FormControl-Cfr3bcUw.js";import"./Menu-DzGOcUhD.js";import"./dividerClasses-a3rAEu9c.js";import"./listItemTextClasses-DgiHFli8.js";const _e=Pe(e.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z"}),"KeyboardArrowLeft"),Je=Be.forwardRef(function(N,m){return e.jsx(Ge,{direction:"up",ref:m,...N})});function It(){var de;const C=Te(),[N,m]=a.useState(!1),[I,x]=a.useState(!1),f=["SOL","BNB","BTC","DOGE","ADA","BCH"],D="api",u=Ee(localStorage.getItem("token")),{list:y}=We((de=u==null?void 0:u.data)==null?void 0:de.id),[n,K]=a.useState("buy"),[g,V]=a.useState(0),[i,O]=a.useState(""),[p,P]=a.useState(""),[q,X]=a.useState(0),[H,Q]=a.useState(0),[Z,$]=a.useState(!1),[v,L]=a.useState(0),[A,U]=a.useState(0),[r]=Fe(),[ye,z]=a.useState(!1),[je,Se]=a.useState(!1),[h,ee]=a.useState(0),[c,te]=a.useState(0),[oe,re]=a.useState(0),[j,M]=a.useState(0),[se,Y]=a.useState(0),le=()=>{z(!1)};a.useEffect(()=>{localStorage.getItem("ccryptofees")&&(V(localStorage.getItem("camount")),O(localStorage.getItem("ccurrency")),P(localStorage.getItem("ccoin")),X(localStorage.getItem("cnoofcoins")),Q(localStorage.getItem("crate")),L(localStorage.getItem("ccryptofees")),U(localStorage.getItem("cexchangefees")),ee(localStorage.getItem("sellcoin")),te(localStorage.getItem("sellcurrency")),re(localStorage.getItem("sellamount")),M(localStorage.getItem("sellnoofcoins")),K(localStorage.getItem("cside")),$(!0)),localStorage.getItem("cside")=="sell"&&localStorage.getItem("sellcoin")&&xe(localStorage.getItem("sellcoin"))},[]);const ae=t=>{K(t)},be=t=>{t.length==0||Math.sign(t)!=-1?(V(t),i!=""&&p!=""&&k(p,i,t)):alert("Negative value is not allowed")},we=t=>{M(t),localStorage.setItem("sellnoofcoins",t),h!=""&&c!=""&&t!=0&&ce(h,c,t)},ne=t=>{n=="buy"?Ie(t)?(z(!0),Se(t)):(O(t),g!=0&&p!=""&&k(p,t,g)):h!=""?j>0?(te(t),localStorage.setItem("sellcurrency",t),ce(h,t,j)):alert("You have not sufficient number of coins to sell"):alert("Make sure you have select coin")},Ce=t=>{O(t),z(!1),k(p,t,g)},Ie=t=>!(t=="EUR"||t=="USD"||t=="AUD"||t=="JPY"),ie=t=>{g==0&&i==""&&n=="buy"?(alert("Make sure you have fill amount and currency field"),P("")):(n=="buy"?P(t):ee(t),n=="buy"?k(t,i,g):xe(t))},k=async(t,s,d)=>{x(!0),await T.post(`/${D}/v1/crypto/fetch-calculation`,{coin:t,amount:d,currency:s,side:n},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(l=>{var S,b,pe,me,ge,he,fe,ue;l.data.status=="201"&&(Q((b=(S=l==null?void 0:l.data)==null?void 0:S.data)==null?void 0:b.rate),U((me=(pe=l==null?void 0:l.data)==null?void 0:pe.data)==null?void 0:me.exchangeFees),L((he=(ge=l==null?void 0:l.data)==null?void 0:ge.data)==null?void 0:he.cryptoFees),X((ue=(fe=l==null?void 0:l.data)==null?void 0:fe.data)==null?void 0:ue.numberofCoins),setTimeout(()=>{x(!1),$(!0)},1e3))}).catch(l=>{x(!1),console.log("error",l)})},ce=async(t,s,d)=>{x(!0),await T.post(`/${D}/v1/crypto/fetch-symbolprice`,{coin:t,currency:s,noOfCoins:d},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(l=>{l.data.status=="201"&&(x(!1),re(l.data.data.amount),L(l.data.data.cryptoFees),U(l.data.data.exchangeFees),$(!0))}).catch(l=>{x(!1),M(0),Y(0),$(!1),console.log("error",l)})},xe=async t=>{x(!0),await T.get(`/${D}/v1/crypto/fetch-coins/${t+"_TEST"}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(s=>{var d;s.data.status=="201"&&(x(!1),Y((d=s==null?void 0:s.data)==null?void 0:d.data))}).catch(s=>{x(!1),Y(0),console.log("error",s)})},De=async()=>{var t;await T.get(`/${D}/v1/crypto/getWalletAddress/${p}_TEST/${(t=u==null?void 0:u.data)==null?void 0:t.email}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(s=>{var d,l,S,b;s.data.status=="200"&&localStorage.setItem("cwalletAddress",(b=(S=(l=(d=s==null?void 0:s.data)==null?void 0:d.data)==null?void 0:l.addresses)==null?void 0:S[0])==null?void 0:b.address)}).catch(s=>{console.log("error",s),localStorage.setItem("cwalletAddress","")})},$e=t=>{m(!0),localStorage.setItem("camount",g),localStorage.setItem("ccoin",p),localStorage.setItem("ccurrency",i),localStorage.setItem("cnoofcoins",q),localStorage.setItem("cside",n),localStorage.setItem("ccryptofees",v),localStorage.setItem("cexchangefees",A),localStorage.setItem("crate",H),De(),setTimeout(()=>{m(!1),C(t)},2e3)},ve=t=>{m(!0),se>j?(localStorage.setItem("sellamount",oe),localStorage.setItem("sellcoin",h),localStorage.setItem("sellcurrency",c),localStorage.setItem("sellnoofcoins",j),localStorage.setItem("cside",n),localStorage.setItem("ccryptofees",v),localStorage.setItem("cexchangefees",A),setTimeout(()=>{m(!1),C(t)},2e3)):(alert("You don't have enough coins to sell"),m(!1))},Ae=()=>{localStorage.removeItem("camount"),localStorage.removeItem("ccoin"),localStorage.removeItem("ccryptofees"),localStorage.removeItem("cexchangefees"),localStorage.removeItem("cnoofcoins"),localStorage.removeItem("crate"),localStorage.removeItem("cside"),localStorage.removeItem("cwalletAddress"),localStorage.removeItem("sellcoin"),localStorage.removeItem("sellcurrency"),localStorage.removeItem("sellnoofcoins"),localStorage.removeItem("sellamount"),C("/crypto")},ke=()=>{localStorage.removeItem("camount"),localStorage.removeItem("ccoin"),localStorage.removeItem("ccryptofees"),localStorage.removeItem("cexchangefees"),localStorage.removeItem("cnoofcoins"),localStorage.removeItem("crate"),localStorage.removeItem("cwalletAddress"),localStorage.removeItem("sellcoin"),localStorage.removeItem("sellcurrency"),localStorage.removeItem("sellnoofcoins"),localStorage.removeItem("sellamount"),window.location.href="/crypto/buysell"};return e.jsxs(e.Fragment,{children:[e.jsx(Oe,{sx:t=>({color:"#fff",zIndex:t.zIndex.drawer+1}),open:N,children:e.jsx(w,{color:"inherit"})}),e.jsxs(o,{sx:{display:"flex",background:{xs:`${r?"#183153":"white"}`},color:`${r?"white":" black"}`,flexDirection:"column",border:"1px solid white",boxShadow:`${r?"":"2px 10px 10px #8888883b"}`,borderRadius:".5rem",p:"10px",marginTop:{xs:"-10px",md:"20px"},marginLeft:{xs:"0%",md:"2%"},width:{xs:"100%",lg:"95%"}},children:[e.jsxs(o,{sx:{marginTop:{xs:"-10px",sm:"20px"},display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[e.jsx(o,{children:e.jsx(G,{onClick:()=>Ae(),sx:{margin:"10px",width:"110px",height:"60px",border:`${r?"1px solid white":""}`,background:`${r?"#183153":""}`,marginLeft:{xs:"0%",md:"2%"}},startIcon:e.jsx(_e,{}),disableElevation:!0,children:"BACK"})}),e.jsx(o,{children:localStorage.getItem("ccryptofees")&&e.jsx(Re,{onClick:()=>ke(),sx:{margin:"10px",width:"110px",height:"60px",border:`${r?"1px solid red":""}`,marginLeft:{xs:"0%",md:"2%"}},children:"RESET"})})]}),e.jsx(J,{variant:"h5",sx:{padding:"16px",textAlign:"center",fontWeight:"700",color:`${r?"white":" black"}`},children:"CRYPTO EXCHANGE"}),e.jsx(J,{sx:{padding:"10px",textAlign:"center",color:`${r?"white":" black"}`},children:"Step: 1 of 3"}),e.jsx(J,{variant:"h6",sx:{textAlign:"center"},children:"Setup Currency"}),e.jsxs(o,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"12px",marginTop:"12px"},children:[e.jsx(o,{sx:{border:"3px solid blue",width:"10%",height:"5px",borderRadius:"12px",background:"blue"}}),e.jsx(o,{sx:{border:"3px solid #DDD3FD",width:"10%",height:"5px",borderRadius:"12px",background:"#DDD3FD"}}),e.jsx(o,{sx:{border:"3px solid #DDD3FD",width:"10%",height:"5px",borderRadius:"12px",background:"#DDD3FD"}})]}),e.jsx(o,{sx:{display:"flex",justifyContent:"center",textAlign:"center",marginTop:"-18%",padding:"20%",marginBottom:{xs:"10px",md:"0px"},fontSize:{xs:"12px",md:"15px"}},children:"Exchange crypto manually from the comfort of your home, quickly, safely with minimal fees."}),e.jsx(o,{children:e.jsx(He,{sx:{marginTop:"-18%",display:"flex",flexDirection:"row",justifyContent:"center"},children:e.jsxs(o,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"20px"},children:[e.jsx(o,{onClick:()=>ae("buy"),sx:{background:`${n=="buy"?"#635BFE":"white"}`,border:`${n=="sell"?"1px solid #635BFE":"1px solid white"}`,color:`${n=="buy"?"white":"#635BFE"}`,cursor:"pointer",textAlign:"center",padding:"5px",width:"120px",borderRadius:"19px"},children:"Crypto Buy"}),e.jsx(o,{onClick:()=>ae("sell"),sx:{background:`${n=="sell"?"#635BFE":"white"}`,border:`${n=="sell"?"1px solid white":"1px solid #635BFE"}`,color:`${n=="sell"?"white":"#635BFE"}`,cursor:"pointer",textAlign:"center",padding:"5px",width:"120px",borderRadius:"19px"},children:"Crypto Sell"})]})})}),n=="buy"?e.jsx(e.Fragment,{children:e.jsxs(o,{container:!0,sx:{display:"flex",marginTop:{xs:"5%",sm:"-5%",md:"-16%"},flexDirection:"column",justifyContent:"center",gap:"20px"},children:[e.jsxs(o,{item:!0,xs:12,sx:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"21px"},children:[e.jsxs(o,{item:!0,xs:12,sm:4,sx:{padding:"5%"},children:[e.jsx("label",{children:"Amount"}),e.jsx(E,{className:"crypto_textfield",sx:{border:`${r?"1px solid white":" "}`},value:g,type:"number",pattern:"[0-9]*",inputMode:"numeric",onChange:t=>be(t.target.value),fullWidth:!0})]}),e.jsxs(o,{item:!0,xs:12,sm:4,sx:{padding:"5%"},children:[e.jsx("label",{children:"Currency"}),e.jsx(W,{placeholder:"Select Currency",sx:{minWidth:"120px",border:`${r?"1px solid white":" "}`,color:`${r?"white":""}`},value:i,onChange:t=>ne(t.target.value),fullWidth:!0,children:y==null?void 0:y.map((t,s)=>e.jsx(R,{value:t==null?void 0:t.currency,sx:{color:`${r?"white":"black"}`},children:t==null?void 0:t.currency},s+1))})]})]}),e.jsxs(o,{item:!0,xs:12,sx:{display:"flex",flexDirection:"row",justifyContent:"center",flexWrap:"wrap",marginTop:"12px",gap:"20px"},children:[i=="USD"||i=="EUR"||i=="AUD"||i=="JPY"?null:e.jsxs(o,{sx:{fontWeight:"700"},children:["Exchange Fees: ",F(i),A]}),e.jsxs(o,{sx:{fontWeight:"700"},children:["Crypto Fees: ",F(i),v]}),e.jsxs(o,{sx:{fontWeight:"700",textAlign:"center"},children:["Estimated rate: ",H||"0.000000"]})]}),e.jsxs(o,{item:!0,xs:12,sx:{display:"flex",marginTop:{xs:"5%",sm:"-5%",md:"-5%"},flexDirection:"row",justifyContent:"center",gap:"21px"},children:[e.jsxs(o,{item:!0,xs:12,sm:4,sx:{padding:"5%"},children:[e.jsx("label",{children:"You Get"}),e.jsx(E,{sx:{border:`${r?"1px solid white":" "}`},placeholder:"0.00",value:q,fullWidth:!0})]}),e.jsxs(o,{item:!0,xs:12,sm:4,sx:{padding:"5%",marginBottom:"10px"},children:[e.jsx("label",{children:"Coin"}),e.jsx(W,{sx:{border:`${r?"1px solid white":" "}`},value:p,onChange:t=>ie(t.target.value),fullWidth:!0,children:f==null?void 0:f.map((t,s)=>e.jsx(R,{value:t,children:e.jsxs(o,{sx:{display:"flex",flexDirection:"row",justifyContent:"normal",alignItems:"center",gap:"10px"},children:[e.jsx(o,{children:e.jsx("img",{loading:"lazy",style:{padding:"1px",cursor:"pointer",height:"30px",width:"30px",borderRadius:"50px"},src:`https://assets.coincap.io/assets/icons/${t.replace("_TEST","").toLowerCase()}@2x.png`,alt:`${t}`})}),e.jsx(o,{sx:{color:`${r?"white":" black"}`},children:t})]})},s))})]})]}),e.jsx(o,{item:!0,xs:12,sx:{display:"flex",flexDirection:"row",justifyContent:"center",marginBottom:"20px"},children:e.jsx(o,{item:!0,xs:12,sm:7,children:Z?e.jsx(_,{sx:{width:"100%",minWidth:"230px",height:"60px",border:`${r?"1px solid white":""}`,background:`${r?"#183153":""}`},endIcon:e.jsx(B,{}),onClick:()=>$e("/crypto/confirm"),children:I?e.jsx(e.Fragment,{children:e.jsxs(o,{sx:{display:"flex",flexDirection:"row",gap:"10px",alignItems:"center"},children:[e.jsx(o,{children:"fetching...  "}),e.jsx(o,{children:e.jsx(w,{color:"secondary"})})]})}):"Proceed"}):e.jsx(G,{sx:{width:"100%",minWidth:"230px",height:"60px",border:`${r?"1px solid white":""}`,background:`${r?"#183153":""}`},endIcon:e.jsx(B,{}),disableElevation:!0,children:I?e.jsx(e.Fragment,{children:e.jsxs(o,{sx:{display:"flex",flexDirection:"row",gap:"10px",alignItems:"center"},children:[e.jsx(o,{children:"fetching...  "}),e.jsx(o,{children:e.jsx(w,{color:"secondary"})})]})}):"Proceed"})})})]})}):e.jsx(e.Fragment,{children:e.jsxs(o,{container:!0,sx:{display:"flex",marginTop:{xs:"5%",sm:"-5%",md:"-16%"},flexDirection:"column",justifyContent:"center",gap:"20px"},children:[e.jsxs(o,{item:!0,xs:12,sx:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"21px"},children:[e.jsxs(o,{item:!0,xs:12,sm:4,sx:{padding:"5%"},children:[e.jsx("label",{children:"No Of Coins"}),e.jsx(E,{className:"crypto_textfield",sx:{border:`${r?"1px solid white":" "}`},type:"number",value:j,pattern:"[0-9]*",inputMode:"numeric",onChange:t=>we(t.target.value),fullWidth:!0})]}),e.jsxs(o,{item:!0,xs:12,sm:4,sx:{padding:"5%"},children:[e.jsx("label",{children:"Coin"}),e.jsx(W,{sx:{border:`${r?"1px solid white":" "}`,maxHeight:"58px"},value:h,onChange:t=>ie(t.target.value),fullWidth:!0,children:f==null?void 0:f.map((t,s)=>e.jsx(R,{value:t,children:e.jsxs(o,{sx:{display:"flex",flexDirection:"row",justifyContent:"normal",alignItems:"center",gap:"10px"},children:[e.jsx(o,{children:e.jsx("img",{loading:"lazy",style:{padding:"1px",cursor:"pointer",height:"30px",width:"30px",borderRadius:"50px"},src:`https://assets.coincap.io/assets/icons/${t.replace("_TEST","").toLowerCase()}@2x.png`,alt:`${t}`})}),e.jsx(o,{sx:{color:`${r?"white":" black"}`},children:t})]})},s))})]})]}),e.jsxs(o,{item:!0,xs:12,sx:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:"12px",flexWrap:"wrap",gap:"20px"},children:[e.jsxs(o,{children:["No. Of Coins Available : ",se," ",h]}),c=="USD"||c=="EUR"||c=="AUD"||c=="JPY"?null:e.jsxs(o,{sx:{fontWeight:"700"},children:["Exchange Fees: ",F(c),A]}),e.jsxs(o,{sx:{fontWeight:"700"},children:["Crypto Fees: ",F(c),v]})]}),e.jsxs(o,{item:!0,xs:12,sx:{display:"flex",marginTop:{xs:"5%",sm:"-5%",md:"-5%"},flexDirection:"row",justifyContent:"center",gap:"21px"},children:[e.jsxs(o,{item:!0,xs:12,sm:4,sx:{padding:"5%"},children:[e.jsx("label",{children:"You Get"}),e.jsx(E,{sx:{border:`${r?"1px solid white":" "}`},placeholder:"0.00",value:oe,fullWidth:!0})]}),e.jsxs(o,{item:!0,xs:12,sm:4,sx:{padding:"5%",marginBottom:"10px"},children:[e.jsx("label",{children:"Currency"}),e.jsx(W,{placeholder:"Select Currency",sx:{minWidth:"120px",border:`${r?"1px solid white":" "}`,color:`${r?"white":""}`},value:c,onChange:t=>ne(t.target.value),fullWidth:!0,children:y==null?void 0:y.map((t,s)=>e.jsx(R,{value:t==null?void 0:t.currency,sx:{color:`${r?"white":"black"}`},children:t==null?void 0:t.currency},s+1))})]})]}),e.jsx(o,{item:!0,xs:12,sx:{display:"flex",flexDirection:"row",justifyContent:"center",marginBottom:"20px"},children:e.jsx(o,{item:!0,xs:12,sm:7,children:Z?e.jsx(_,{sx:{width:"100%",minWidth:"230px",height:"60px",border:`${r?"1px solid white":""}`,background:`${r?"#183153":""}`},endIcon:e.jsx(B,{}),onClick:()=>ve("/crypto/confirm"),children:I?e.jsx(e.Fragment,{children:e.jsxs(o,{sx:{display:"flex",flexDirection:"row",gap:"10px",alignItems:"center"},children:[e.jsx(o,{children:"fetching...  "}),e.jsx(o,{children:e.jsx(w,{color:"secondary"})})]})}):"Proceed"}):e.jsx(G,{sx:{width:"100%",minWidth:"230px",height:"60px",border:`${r?"1px solid white":""}`,background:`${r?"#183153":""}`},endIcon:e.jsx(B,{}),disableElevation:!0,children:I?e.jsx(e.Fragment,{children:e.jsxs(o,{sx:{display:"flex",flexDirection:"row",gap:"10px",alignItems:"center"},children:[e.jsx(o,{children:"fetching...  "}),e.jsx(o,{children:e.jsx(w,{color:"secondary"})})]})}):"Proceed"})})})]})})]}),e.jsxs(Le,{open:ye,TransitionComponent:Je,keepMounted:!0,onClose:le,"aria-describedby":"alert-dialog-slide-description",children:[e.jsx(ze,{children:"Alert Note"}),e.jsx(Ue,{children:e.jsxs(Me,{sx:{color:`${r?"white":"black"}`},id:"alert-dialog-slide-description",children:["Crypto is not available on selected currency You have to convert currency into USD in order to proceed.",e.jsx("br",{}),e.jsx("br",{}),"I am agree to convert my currency to USD in order to Buy/Sell Crypto"]})}),e.jsxs(Ye,{children:[e.jsx(_,{onClick:le,children:"Disagree"}),e.jsx(Ne,{onClick:()=>Ce(je),children:"Agree"})]})]})]})}export{It as default};
