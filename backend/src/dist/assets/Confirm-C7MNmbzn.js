import{u as $,r as p,f as A,j as e}from"./index-C7uDDRzi.js";import{j as f,a as u,B as j}from"./App-DlbqwX0_.js";import{d as B}from"./KeyboardArrowLeft-qQvVTVt5.js";import{C as d,d as D}from"./ColorButton-ek59cplY.js";import{d as g}from"./KeyboardArrowRight-CZ8ymu6k.js";import{B as E}from"./Backdrop-92jRYuW8.js";import{C as R}from"./CircularProgress-t0XaucnZ.js";import{G as t}from"./Grid-BSdJsjIu.js";import{T as h}from"./Typography-Bqz4o4Sm.js";import{S as W}from"./Select-DVBf2x5a.js";import{M as L}from"./MenuItem-BEeRBPo2.js";import{T as O}from"./TextField-IfJfvW4r.js";import"./createSvgIcon-D3EdHNeB.js";import"./createSvgIcon-CvjaZCwn.js";import"./styled-DpNLFuLo.js";import"./TransitionGroupContext-BuEQjJx-.js";import"./isMuiElement-MrDrvzNs.js";import"./ButtonBase-Cb7r6f8i.js";import"./Button-bVqxygml.js";import"./utils-D1Bwf65I.js";import"./Menu-DLoDL8Vj.js";import"./dividerClasses-Bc8akPt1.js";import"./listItemTextClasses-BL6EH0EV.js";import"./FormControl-Bz1rNlOw.js";function ne(){var S;const y=$(),[i,b]=p.useState(540),m="api",[a]=A();p.useEffect(()=>{if(!i)return;const o=setInterval(()=>{b(s=>s-1)},1e3);return()=>clearInterval(o)},[i]);const w=(540-i)/540;function F(o){var s=~~(o/3600),l=~~(o%3600/60),r=~~o%60,c="";return s>0&&(c+=""+s+":"+(l<10?"0":"")),c+=""+String(l).padStart(2,"0")+":"+(r<10?"0":""),c+=""+r,c}const[v,n]=p.useState(!1),C=async()=>{var s,l;n(!0);const o=f(localStorage.getItem("token"));await u.post(`/${m}/v1/walletaddressrequest/add`,{user:(s=o==null?void 0:o.data)==null?void 0:s.id,coin:`${localStorage.getItem("ccoin")}_TEST`,email:(l=o==null?void 0:o.data)==null?void 0:l.email},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(r=>{r.data.status=="201"&&setTimeout(()=>{var c;n(!1),localStorage.setItem("cwalletAddress",(c=r==null?void 0:r.data)==null?void 0:c.data)},300)}).catch(r=>{console.log("error",r),n(!1),x(r.response.data.message,"error")})},k=async()=>{var s;n(!0);const o=f(localStorage.getItem("token"));await u.post(`/${m}/v1/crypto/add`,{user:(s=o==null?void 0:o.data)==null?void 0:s.id,coin:`${localStorage.getItem("ccoin")}_TEST`,paymentType:"Bank Transfer",amount:localStorage.getItem("camount"),noOfCoins:parseFloat(localStorage.getItem("cnoofcoins")).toFixed(7),side:localStorage.getItem("cside"),walletAddress:localStorage.getItem("cwalletAddress"),currencyType:localStorage.getItem("ccurrency"),fee:parseFloat(localStorage.getItem("cexchangefees"))+parseFloat(localStorage.getItem("ccryptofees")),status:"pending"},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(l=>{l.data.status=="201"&&setTimeout(()=>{var r,c;n(!1),localStorage.removeItem("camount"),localStorage.removeItem("ccoin"),localStorage.removeItem("ccryptofees"),localStorage.removeItem("cexchangefees"),localStorage.removeItem("cnoofcoins"),localStorage.removeItem("crate"),localStorage.removeItem("cside"),localStorage.removeItem("cwalletAddress"),window.location.href=`/crypto/complete/${(c=(r=l==null?void 0:l.data)==null?void 0:r.data)==null?void 0:c._id}`},1e3)}).catch(l=>{console.log("error",l),n(!1),x(l.response.data.message,"error")})},T=async()=>{var s;const o=parseFloat(localStorage.getItem("sellamount"))-(parseFloat(localStorage.getItem("cexchangefees"))+parseFloat(localStorage.getItem("ccryptofees")));if(Math.sign(o)==-1)alert("Amount should not be in negative");else{n(!0);const l=f(localStorage.getItem("token"));await u.post(`/${m}/v1/crypto/sell`,{user:(s=l==null?void 0:l.data)==null?void 0:s.id,coin:`${localStorage.getItem("sellcoin")}_TEST`,amount:parseFloat(localStorage.getItem("sellamount")),noOfCoins:parseFloat(localStorage.getItem("sellnoofcoins")),side:"sell",currencyType:localStorage.getItem("sellcurrency"),fee:parseFloat(localStorage.getItem("cexchangefees"))+parseFloat(localStorage.getItem("ccryptofees")),status:"pending"},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(r=>{r.data.status=="201"&&setTimeout(()=>{var c,I;n(!1),localStorage.removeItem("camount"),localStorage.removeItem("ccoin"),localStorage.removeItem("ccryptofees"),localStorage.removeItem("cexchangefees"),localStorage.removeItem("cnoofcoins"),localStorage.removeItem("crate"),localStorage.removeItem("cside"),localStorage.removeItem("cwalletAddress"),localStorage.removeItem("sellcoin"),localStorage.removeItem("sellcurrency"),localStorage.removeItem("sellnoofcoins"),localStorage.removeItem("sellamount"),window.location.href=`/crypto/complete/${(I=(c=r==null?void 0:r.data)==null?void 0:c.data)==null?void 0:I._id}`},1e3)}).catch(r=>{console.log("error",r),n(!1),x(r.response.data.message,"error")})}},x=(o,s)=>{s=="error"?j.error(o,{position:"top-center",autoClose:7e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):j.success(o,{position:"top-center",autoClose:7e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})};return e.jsxs(e.Fragment,{children:[e.jsx(E,{sx:o=>({color:"#fff",zIndex:o.zIndex.drawer+1}),open:v,children:e.jsx(R,{color:"inherit"})}),e.jsxs(t,{container:!0,sx:{display:"flex",background:{xs:`${a?"#183153":"white"}`},color:`${a?"white":" black"}`,flexDirection:"column",border:"1px solid white",boxShadow:`${a?"":"2px 10px 10px #8888883b"}`,borderRadius:".5rem",p:"10px",marginTop:{xs:"-10px",md:"20px"},marginLeft:{xs:"0%",md:"2%"},width:{xs:"100%",lg:"95%"}},children:[e.jsxs(h,{variant:"h5",sx:{padding:"16px",textAlign:"center",fontWeight:"700"},children:["CRYPTO ",localStorage.getItem("cside").toUpperCase()]}),e.jsx(h,{sx:{padding:"10px",textAlign:"center",color:`${a?"white":"black"}`},children:"Step: 2 of 3"}),e.jsxs(h,{variant:"h6",sx:{textAlign:"center"},children:["Confirm ",(S=localStorage.getItem("cside"))==null?void 0:S.toUpperCase()]}),e.jsxs(t,{item:!0,xs:12,sx:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"12px",marginTop:"12px"},children:[e.jsx(t,{sx:{border:"3px solid blue",width:"10%",height:"5px",borderRadius:"12px",background:"blue"}}),e.jsx(t,{sx:{border:"3px solid blue",width:"10%",height:"5px",borderRadius:"12px",background:"#DDD3FD"}}),e.jsx(t,{sx:{border:"3px solid #DDD3FD",width:"10%",height:"5px",borderRadius:"12px",background:"#DDD3FD"}})]}),e.jsx(t,{item:!0,xs:12,sx:{display:"flex",flexDirection:"row",marginTop:"20px",justifyContent:"center",alignItems:"center",padding:"0%",marginBottom:{xs:"10px",md:"0px"},fontSize:{xs:"12px",md:"15px"}},children:e.jsxs(t,{sx:{width:"50%"},children:[e.jsxs(t,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"3px"},children:[e.jsx(t,{children:"Time Remaining:"}),e.jsx(t,{children:i!=0?F(i):e.jsx("span",{style:{color:"red"},children:"Expired"})})]}),e.jsx(t,{children:e.jsx("div",{style:{backgroundColor:"#ddd",height:5,borderRadius:"20px"},children:e.jsx("div",{style:{width:`${w*100}%`,height:"100%",backgroundColor:"#FFAF30"}})})})]})}),e.jsx(t,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center",textAlign:"center",padding:"6%",marginBottom:{xs:"10px",md:"0px"},fontSize:{xs:"12px",md:"15px"}},children:e.jsxs(t,{container:!0,sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"center"},children:[e.jsx(t,{item:!0,xs:10,sm:5,md:5,sx:{marginLeft:"10px",background:`${a?"":"#F5F6FA"}`,border:`${a?"1px solid white":""}`,borderRadius:"5px",padding:"25px"},children:localStorage.getItem("cside")=="buy"?e.jsxs(t,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",gap:"10px"},children:[e.jsx(t,{children:"Amount"}),e.jsxs(t,{sx:{},children:[localStorage.getItem("camount")," ",e.jsx("span",{style:{color:"#635BFE"},children:localStorage.getItem("ccurrency")})]}),e.jsxs(t,{children:["Fees = ",parseFloat(localStorage.getItem("cexchangefees"))+parseFloat(localStorage.getItem("ccryptofees"))," ",localStorage.getItem("ccurrency")]}),e.jsxs(t,{children:["Total Amount = ",parseFloat(localStorage.getItem("cexchangefees"))+parseFloat(localStorage.getItem("ccryptofees"))+parseFloat(localStorage.getItem("camount"))," ",localStorage.getItem("ccurrency")]})]}):e.jsxs(t,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",gap:"10px"},children:[e.jsx(t,{children:"No Of Coins"}),e.jsxs(t,{sx:{},children:[localStorage.getItem("sellnoofcoins")," ",e.jsx("span",{style:{color:"#635BFE"},children:localStorage.getItem("sellcoin")})]}),e.jsxs(t,{children:["Fees = ",parseFloat(localStorage.getItem("cexchangefees"))+parseFloat(localStorage.getItem("ccryptofees"))," ",localStorage.getItem("sellcurrency")]}),e.jsxs(t,{children:["Amount for ",localStorage.getItem("sellnoofcoins")," ",localStorage.getItem("sellcoin")," = ",parseFloat(localStorage.getItem("sellamount"))," ",localStorage.getItem("sellcurrency")]})]})}),e.jsx(g,{sx:{marginTop:{xs:"30px",sm:"70px",md:"89px"},display:{xs:"none",sm:"block"},marginLeft:"5px",border:"1px solid white",position:"absolute",borderRadius:"50%",background:`${a?"black":"white"}`}}),localStorage.getItem("cside")=="buy"?e.jsx(t,{item:!0,xs:10,sm:5,md:5,sx:{marginLeft:{xs:"10px",sm:"0px"},background:`${a?"":"#635BFE"}`,border:`${a?"1px solid white":""}`,borderRadius:"5px",padding:"25px"},children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",gap:"10px",color:"white"},children:[e.jsx(t,{children:"You will get"}),e.jsxs(t,{sx:{},children:[localStorage.getItem("cnoofcoins")," ",e.jsx("span",{style:{color:"#FFAF30"},children:localStorage.getItem("ccoin")})]}),e.jsxs(t,{children:["1",localStorage.getItem("ccurrency")," = ",localStorage.getItem("crate")," ",localStorage.getItem("ccoin")]})]})}):e.jsx(t,{item:!0,xs:10,sm:5,md:5,sx:{marginLeft:{xs:"10px",sm:"0px"},background:`${a?"":"#635BFE"}`,border:`${a?"1px solid white":""}`,borderRadius:"5px",padding:"25px"},children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",gap:"10px",color:"white"},children:[e.jsx(t,{children:"You will get"}),e.jsx(t,{children:"Total Amount = Amount - Fees"}),e.jsxs(t,{sx:{},children:[localStorage.getItem("sellcurrency"),localStorage.getItem("cnoofcoins")," ",e.jsx("span",{style:{color:"#FFAF30"},children:parseFloat(localStorage.getItem("sellamount"))-(parseFloat(localStorage.getItem("cexchangefees"))+parseFloat(localStorage.getItem("ccryptofees")))})]})]})})]})}),e.jsxs(t,{item:!0,xs:8.8,sx:{display:"flex",flexDirection:"column",marginLeft:"14%",justifyContent:"center",gap:"20px"},children:[localStorage.getItem("cside")=="buy"&&e.jsxs(t,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignContent:"center",gap:"21px"},children:[e.jsxs(t,{children:[e.jsx("label",{children:"Transfer Type"}),e.jsx(W,{value:"Bank Transfer",sx:{border:`${a?"1px solid white":""}`},fullWidth:!0,children:e.jsx(L,{value:"Bank Transfer",sx:{color:`${a?"white":"black"}`},children:"Bank Transfer"})})]}),e.jsxs(t,{children:[e.jsx("label",{children:"Wallet Address"}),e.jsx(O,{sx:{border:`${a?"1px solid white":""}`},placeholder:"0.00",value:localStorage.getItem("cwalletAddress"),fullWidth:!0}),localStorage.getItem("cwalletAddress")==""&&e.jsx(d,{sx:{marginTop:"12px"},onClick:()=>C(),children:"Request Wallet Address"})]})]}),e.jsxs(t,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginBottom:"20px",gap:"10px"},children:[e.jsx(d,{startIcon:e.jsx(B,{}),sx:{color:"white",background:`${a?"":"#635BFE"}`},onClick:()=>y("/crypto/buysell"),fullWidth:!0,children:"Back"}),localStorage.getItem("cside")=="buy"?localStorage.getItem("cwalletAddress")!=""?e.jsx(d,{sx:{background:`${a?"":"#635BFE"}`},endIcon:e.jsx(g,{}),onClick:()=>k(),fullWidth:!0,children:"Confirm"}):e.jsx(D,{sx:{background:`${a?"":"#635BFE"}`},endIcon:e.jsx(g,{}),fullWidth:!0,children:"Confirm"}):e.jsx(d,{sx:{background:`${a?"":"#635BFE"}`},endIcon:e.jsx(g,{}),onClick:()=>T(),fullWidth:!0,children:"Confirm"})]})]})]})]})}export{ne as default};
