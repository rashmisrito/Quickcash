import{c as W,R as i,r as N,u as O,j as e,L as g}from"./index-CPyIBKv5.js";import{c as R,a as h,B as b}from"./App-CPA_Lu-d.js";import{i as $}from"./index-DLUslAsi.js";import{R as E}from"./index.esm-6R10Dmjy.js";import{u as q}from"./useValidation-B4G4aiSA.js";import{T as z}from"./ThemeProvider-GTCz9GK0.js";import{G as s}from"./Grid-ijiQ2gXa.js";import{P as H}from"./Menu-DzGOcUhD.js";import{T as x}from"./TextField-CGe-lY_w.js";import{F as G}from"./FormControl-Cfr3bcUw.js";import{B as Q}from"./Button-mU0fsZ6C.js";import{T as U}from"./Typography-32GqnDkD.js";import"./styled-D3btvjLo.js";import"./Backdrop-5VrCmbBJ.js";import"./utils-27lUOG69.js";import"./TransitionGroupContext-DpwKRQDB.js";import"./createSvgIcon-CJCtbkVa.js";import"./ButtonBase-lj8ryPQQ.js";import"./Select-Cu2oDfAu.js";import"./isMuiElement-CtMSz7xH.js";function V(o){return e.jsxs(U,{variant:"body2",color:"text.secondary",align:"center",...o,children:["Copyright Â© ",e.jsx(g,{color:"inherit",to:"/",style:{textDecoration:"none"},children:"Quick Cash"})," ",new Date().getFullYear(),"."]})}const _=R();function he(){const o=W(),{errors:l,validate:n}=q(),[p,w]=i.useState(""),[C,S]=i.useState(""),k=t=>{w(t)},T=async()=>{await h.get("https://api.ipify.org/?format=json").then(t=>{var a;return S((a=t==null?void 0:t.data)==null?void 0:a.ip)})};N.useEffect(()=>{T()},[]);const f=(t,a)=>{a=="error"?b.error(t,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):b.success(t,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},A=O(),[B,F]=i.useState(),[m,D]=i.useState(),[u,I]=i.useState(),y="api",L=async t=>{if(!n("email",m)&&!n("password",u)){const a=$.getAllInfoByISO(p);t.preventDefault(),await h.post(`/${y}/v1/user/register`,{name:B,email:m,password:u,country:p,currency:a==null?void 0:a.currency,referalCode:o!=null&&o.search?o==null?void 0:o.search.replace("?code=",""):""},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(r=>{r.data.status=="201"&&(P(r.data.data._id),setTimeout(()=>{f(r.data.message,"success"),localStorage.setItem("token",r.data.token),A("/home")},100))}).catch(r=>{console.log("error",r),f(r.response.data.message,"error")})}else n("email",m),n("password",u)},P=async t=>{var a,r,c,v;await h.post(`/${y}/v1/session/add`,{user:t,device:(c=(r=(a=navigator==null?void 0:navigator.userAgentData)==null?void 0:a.brands)==null?void 0:r[0])==null?void 0:c.brand,OS:(v=navigator==null?void 0:navigator.userAgentData)==null?void 0:v.platform,ipAddress:C,status:1,isActiveNow:1}).then(d=>{d.data.status==201&&localStorage.setItem("usersessionid",d.data.data._id)}).catch(d=>{console.log("Login api error",d)})},j=t=>{const{name:a,value:r}=t.target,c=n(a,r);console.log(c)};return e.jsx(z,{theme:_,children:e.jsxs(s,{container:!0,sx:{alignItems:"",height:"100vh"},children:[e.jsx(s,{item:!0,sm:7,md:8,sx:{display:{xs:"none",sm:"block"}},children:e.jsx("img",{src:"https://quickcash.oyefin.com/registerbg.png",width:"90%",height:"690px",style:{overflow:"hidden"}})}),e.jsx(s,{item:!0,xs:12,sm:5,md:4,className:"background-imagedd",sx:{padding:"12px",backgroundImage:{xs:"url(https://quickcash.oyefin.com/registerbg.png)",sm:"url(https://quickcash.oyefin.com/kl.png)"},backgroundRepeat:"no-repeat",height:"100vh",backgroundSize:"cover"},component:H,elevation:3,square:!0,children:e.jsxs(s,{sx:{display:"flex",flexDirection:"column",padding:"12px",backdropFilter:"blur(3px)",marginTop:{md:"120px"}},children:[e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs(s,{sx:{fontWeight:"700",fontSize:{xs:"30px",sm:"36px"}},children:["Welcome to ",e.jsx("span",{className:"float",style:{color:"#1976D2"},children:"Quick Cash"})]}),e.jsx(s,{sx:{fontSize:"16px",marginBottom:"12px"},children:"Register your account"})]}),e.jsx(s,{sx:{padding:"12px 2px"},children:e.jsx(x,{autoComplete:"given-name",name:"name",required:!0,fullWidth:!0,id:"name",label:"Full Name",onChange:t=>F(t.target.value),autoFocus:!0})}),e.jsx(s,{sx:{padding:"12px 2px"},children:e.jsx(x,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",onChange:t=>{D(t.target.value)},onBlur:j,error:!!l.email,helperText:l.email,autoComplete:"email"})}),e.jsx(s,{sx:{padding:"12px 2px"},children:e.jsx(x,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:t=>{I(t.target.value)},onBlur:j,error:!!l.password,helperText:l.password,autoComplete:"new-password"})}),e.jsx(s,{children:e.jsx(G,{fullWidth:!0,children:e.jsx(E,{selected:p,onSelect:t=>k(t),className:"menu-flags",searchable:!0,showOptionLabel:!0,showSelectedLabel:!0})})}),e.jsx(s,{children:e.jsx(Q,{type:"button",onClick:t=>L(t),fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"})}),e.jsxs(s,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(s,{children:e.jsx(g,{to:"/myapp/web",style:{textDecoration:"none"},children:"Already have an account?"})}),e.jsx(s,{children:e.jsx(g,{to:"/myapp/web",style:{textDecoration:"none",color:"#696CFF",marginLeft:"6px"},children:"Sign in instead"})})]}),e.jsx(s,{children:e.jsx(V,{sx:{mt:2,mb:2}})})]})})]})})}export{he as default};
