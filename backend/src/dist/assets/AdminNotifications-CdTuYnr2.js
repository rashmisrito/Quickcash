import{u as He,r as H,f as We,R as r,j as e}from"./index-B9qwR40S.js";import{a as D,j as he,B as ge}from"./App-CFR6fik0.js";import{h as me}from"./moment-Cl4UOzQZ.js";import{P as T}from"./index-DT2UdaRk.js";import{d as Ie}from"./MoreVert-Iy9KTSaP.js";import{T as Fe,a as Oe,d as ue,b as fe}from"./FirstPage-CnED-xBk.js";import{C as S}from"./ColorButton-av-QDLqY.js";import{d as je}from"./KeyboardArrowLeft-e3tUOFQz.js";import{d as ye}from"./KeyboardArrowRight-C-bhOL4W.js";import{R as _e}from"./quill.snow-B8M8-l5n.js";import{T as qe,a as Ee,b as P,c as j}from"./Tr-Dbhtf0ak.js";/* empty css                                  */import{B as M}from"./Box-DjrMrGfB.js";import{G as i,u as Ve}from"./Grid-BIlHrh_s.js";import{T as Ue}from"./TableBody-D7cXea7d.js";import{I as $}from"./IconButton-Dq6tDNV5.js";import{a as Ye}from"./Menu-H6tylDrM.js";import{M as be}from"./MenuItem-C_v2NxOH.js";import{S as Ge}from"./Select-XPPy0NoH.js";import{T as L}from"./TextField-DIvH6pZa.js";import{D as Ke,a as Qe}from"./DialogContent-BtrMaPNm.js";import{D as Je}from"./DialogTitle-J8WdMaVs.js";import{D as Xe}from"./DialogActions-DlRCRjin.js";import{s as Ze}from"./styled-BsGwS7pf.js";import"./createSvgIcon-BUt4voxn.js";import"./createSvgIcon-CcoZBy8v.js";import"./TransitionGroupContext-Cv1NJVlO.js";import"./isMuiElement-D5GR-K16.js";import"./ButtonBase-zmZ_D00R.js";import"./Tablelvl2Context-61ZLNN4C.js";import"./TableCell-B4YREpT2.js";import"./Toolbar-CygE0b_a.js";import"./Button-aV3rdW9B.js";import"./Backdrop-Oj7HNN4g.js";import"./utils-DDNWiXs5.js";import"./dividerClasses-BNeE3VJI.js";import"./listItemTextClasses-BhtcCChC.js";import"./FormControl-BMtTfMYN.js";import"./Typography-BgIXEw26.js";const we=()=>{const l=He(),[d,h]=H.useState([]),s="api";H.useEffect(()=>{g()},[]);const g=async()=>{localStorage.getItem("admintoken")?await D.get(`/${s}/v1/admin/userslist`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(c=>{var f;c.data.status==201&&h((f=c==null?void 0:c.data)==null?void 0:f.data)}).catch(c=>{console.log("Account List Hook API Error",c)}):l("/admin")};return{userList:d}};function ke(l){const d=Ve(),{count:h,page:s,rowsPerPage:g,onPageChange:c}=l,f=p=>{c(p,0)},W=p=>{c(p,s-1)},y=p=>{c(p,s+1)},C=p=>{c(p,Math.max(0,Math.ceil(h/g)-1))};return e.jsxs(M,{sx:{flexShrink:0,ml:2.5},children:[e.jsx($,{onClick:f,disabled:s===0,"aria-label":"first page",children:d.direction==="rtl"?e.jsx(ue,{}):e.jsx(fe,{})}),e.jsx($,{onClick:W,disabled:s===0,"aria-label":"previous page",children:d.direction==="rtl"?e.jsx(ye,{}):e.jsx(je,{})}),e.jsx($,{onClick:y,disabled:s>=Math.ceil(h/g)-1,"aria-label":"next page",children:d.direction==="rtl"?e.jsx(je,{}):e.jsx(ye,{})}),e.jsx($,{onClick:C,disabled:s>=Math.ceil(h/g)-1,"aria-label":"last page",children:d.direction==="rtl"?e.jsx(fe,{}):e.jsx(ue,{})})]})}ke.propTypes={count:T.number.isRequired,onPageChange:T.func.isRequired,page:T.number.isRequired,rowsPerPage:T.number.isRequired};const et=[{id:"date",label:"Date",minWidth:170},{id:"message",label:"Message",minWidth:100},{id:"notifytype",label:"Type",minWidth:100},{id:"action",label:"Actions",minWidth:120}];function tt(l,d,h,s){return{id:l,date:d,message:h,notifyType:s}}const at=Ze("div")(({theme:l})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"right",height:"100%","& .ant-empty-img-1":{fill:l.palette.mode==="light"?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:l.palette.mode==="light"?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:l.palette.mode==="light"?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:l.palette.mode==="light"?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:l.palette.mode==="light"?"0.8":"0.08",fill:l.palette.mode==="light"?"#f5f5f5":"#fff"}}));function st(){return e.jsxs(at,{children:[e.jsx("svg",{width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:e.jsxs("g",{fill:"none",fillRule:"evenodd",children:[e.jsxs("g",{transform:"translate(24 31.67)",children:[e.jsx("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),e.jsx("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),e.jsx("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),e.jsx("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),e.jsx("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),e.jsxs("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[e.jsx("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),e.jsx("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),e.jsx(M,{sx:{mt:1},children:"No Data found"})]})}function Et(){var J,X,Z,w,ee,te,ae,se,ne,ie,le,oe,re,ce,de,pe;const l=()=>{_(!1),N(null)},{userList:d}=we(),h={toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]]},[s]=We(),[g,c]=r.useState(),[f,W]=r.useState("all"),y="api";H.useEffect(()=>{I()},[f]);const[C,p]=r.useState(""),I=async t=>{var o;const n=he(localStorage.getItem("admintoken"));await D.get(`/${y}/v1/admin/notification/list/${(o=n==null?void 0:n.data)==null?void 0:o.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(x=>{x.data.status=="201"&&c(x.data.data)}).catch(x=>{console.log("error",x)})};let F=[];F=[g==null?void 0:g.map(t=>tt(t==null?void 0:t._id,t==null?void 0:t.createdAt,t==null?void 0:t.message,t==null?void 0:t.notifyType))].sort((t,n)=>t.date<n.date?-1:1);const m=F[0]||[],[R,O]=r.useState(0),[b,$e]=r.useState(5),Ce=(t,n)=>{console.log("New Page",t),O(n)},ve=t=>{$e(parseInt(t.target.value,10)),O(0)},[B,_]=r.useState(!1),Te=t=>{_(!0),Pe(t)},[A,q]=r.useState(""),[E,V]=r.useState(""),[U,Y]=r.useState(""),[a,Se]=r.useState([]),[u,G]=r.useState({preview:"",raw:""}),Pe=async t=>{await D.get(`/${y}/v1/admin/notification//admingetData/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(n=>{var o,x,k,xe;console.log((k=(x=(o=n==null?void 0:n.data)==null?void 0:o.data)==null?void 0:x[0])==null?void 0:k.documentType),n.data.status==201&&Se((xe=n==null?void 0:n.data)==null?void 0:xe.data)}).catch(n=>{console.log("error",n)})},K=(t,n)=>{n=="error"?ge.error(t,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):ge.success(t,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},[Q,N]=r.useState(null),[De,Me]=r.useState(""),Re=!!Q,Be=t=>{var n=t.currentTarget.value.split("-");Me(n[0]),N(t.currentTarget)},Ae=()=>{N(null)},[v,z]=r.useState(!1),Ne=async()=>{var n;const t=he(localStorage.getItem("admintoken"));await D.post(`/${y}/v1/admin/notification/add`,{user:A||((n=t==null?void 0:t.data)==null?void 0:n.id),title:U,tags:E,attachment:u==null?void 0:u.raw,message:C,notifyFrom:"admin",notifyType:A?"user":"all"},{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(o=>{var x,k;((x=o==null?void 0:o.data)==null?void 0:x.status)==201&&(Y(""),V(""),p(""),q(""),z(!1),G({preview:"",raw:""}),K((k=o==null?void 0:o.data)==null?void 0:k.message,"Success"),I())}).catch(o=>{console.log(o),K(o.response.data.message,"error")})},ze=t=>{t.target.files.length&&G({preview:URL.createObjectURL(t.target.files[0]),raw:t.target.files[0]})};function Le(t){if(t){var n=t[0].split(",");return n}}return r.useState([]),e.jsxs(e.Fragment,{children:[e.jsxs(M,{sx:{marginLeft:{md:"7%"},background:`${s?"#183153":"white"}`,color:`${s?"white":"black"}`,padding:{xs:"0px",md:"12px 14px"},marginTop:{xs:"-12px",md:"12px"},fontSize:"15px",width:{md:"91%"}},children:[e.jsx(i,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:"12px"},children:e.jsx(i,{children:v?e.jsx(S,{onClick:()=>z(!v),children:"Back"}):e.jsx(S,{onClick:()=>z(!v),children:"Create Notification"})})}),v?e.jsx(e.Fragment,{children:e.jsx(M,{sx:{marginTop:"12px"},children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsxs(i,{item:!0,xs:12,children:[e.jsx("label",{children:"User (Optional)"}),e.jsx(Ge,{fullWidth:!0,name:"user",sx:{border:`${s?"1px solid white":""}`},onChange:t=>q(t.target.value),children:d==null?void 0:d.map((t,n)=>e.jsx(be,{value:t==null?void 0:t._id,sx:{color:`${s?"white":""}`},children:t==null?void 0:t.name},n))})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsx("label",{children:"Title"}),e.jsx(L,{fullWidth:!0,value:U,sx:{border:`${s?"1px solid white":""}`},onChange:t=>Y(t.target.value)})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsx("label",{children:"Tags"}),e.jsx(L,{fullWidth:!0,value:E,sx:{border:`${s?"1px solid white":""}`},onChange:t=>V(t.target.value)})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsx("label",{children:"Upload Image"}),e.jsx(L,{type:"file",name:"files[]",fullWidth:!0,onChange:ze}),u!=null&&u.preview?e.jsx("img",{src:u.preview,alt:"dummy",width:"300px",height:"200px",style:{marginBottom:"12px"},onError:({currentTarget:t})=>{t.onerror=null,t.src="https://quickcash.oyefin.com/otherdocs.png"}}):null]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsx("label",{children:"Content"}),e.jsx(_e,{value:C,onChange:p,modules:h,style:{color:"black"}})]}),e.jsx(i,{item:!0,xs:12,children:e.jsx(i,{sx:{display:"flex",flexDirection:"row",gap:"12px",justifyContent:"space-between"},children:e.jsx(i,{children:e.jsx(S,{onClick:()=>Ne(),children:"Send"})})})})]})})}):e.jsx(e.Fragment,{children:e.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:"20px",borderRadius:".5rem",color:"black",fontWeight:"700",padding:"3px 3px"},children:e.jsxs(qe,{style:{background:`${s?"":"#F2F3FE"}`,color:`${s?"white":"black"}`},children:[e.jsx(Ee,{children:e.jsx(P,{className:`${s?"avatarDark":"avatarLight"}`,children:et.map(t=>e.jsx(j,{width:"220",style:{padding:"12px",background:"#8657E5",color:"white"},children:t.label},t.id))})}),e.jsxs(Ue,{children:[(b>0?m==null?void 0:m.slice(R*b,R*b+b):m).map(t=>e.jsxs(P,{children:[e.jsx(j,{scope:"row",children:me(t==null?void 0:t.date).format("YYYY-MM-DD")}),e.jsx(j,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:e.jsx("div",{className:"html",style:{lineHeight:1.6},dangerouslySetInnerHTML:{__html:t==null?void 0:t.message}})}),e.jsxs(j,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:[(t==null?void 0:t.notifyType)==="general"||(t==null?void 0:t.notifyType)=="all"&&e.jsx("span",{style:{border:"1px solid green",padding:"12px",borderRadius:"20px",background:`${s?"green":""}`},children:"General"}),(t==null?void 0:t.notifyType)==="user"&&e.jsx("span",{style:{border:"1px solid green",padding:"12px",borderRadius:"20px",background:`${s?"green":""}`},children:"User Wise"}),(t==null?void 0:t.notifyType)==="cancelled"&&e.jsx("span",{style:{border:"1px solid red",padding:"12px",borderRadius:"20px",background:`${s?"red":""}`},children:"Cancelled"}),(t==null?void 0:t.notifyType)==="declined"&&e.jsx("span",{style:{border:"1px solid red",padding:"12px",borderRadius:"20px",background:`${s?"red":""}`},children:"Decline"}),(t==null?void 0:t.notifyType)==="transaction"&&e.jsx("span",{style:{border:"1px solid green",padding:"12px",borderRadius:"20px",background:`${s?"green":""}`},children:"Transaction"}),((t==null?void 0:t.notifyType)==="pending"||(t==null?void 0:t.notifyType)=="Pending")&&e.jsx("span",{style:{border:"1px solid orange",padding:"12px",borderRadius:"20px",background:`${s?"orange":""}`},children:"Pending"})]}),e.jsxs(j,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:[e.jsx($,{"aria-label":"more",value:`${t==null?void 0:t.id}-${t==null?void 0:t.status}-${t==null?void 0:t.recurring}-${t==null?void 0:t.invoice_number}`,id:`long-button${t==null?void 0:t.id}`,"aria-controls":B?`long-menu${t==null?void 0:t.id}`:void 0,"aria-expanded":B?"true":void 0,"aria-haspopup":"true",onClick:Be,sx:{color:`${s?"white":"black"}`},children:e.jsx(Ie,{})}),e.jsx(Ye,{id:`long-menu${t==null?void 0:t.id}`,MenuListProps:{"aria-labelledby":`long-button${t==null?void 0:t.id}`},anchorEl:Q,open:Re,onClose:Ae,children:e.jsx(be,{onClick:()=>Te(De),children:e.jsx("span",{className:`${s?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"View"})})},t==null?void 0:t.id)]})]},t==null?void 0:t.date)),(m==null?void 0:m.length)==0&&e.jsx(P,{children:e.jsx(j,{colSpan:5,children:e.jsx(st,{})})})]}),e.jsx(Fe,{sx:{background:`${s?"white":""}`,color:"black"},children:e.jsx(P,{children:e.jsx(Oe,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:5,count:m.length,rowsPerPage:b,page:R,slotProps:{select:{inputProps:{"aria-label":"rows per page"},native:!0}},sx:{color:"black"},onPageChange:Ce,onRowsPerPageChange:ve,ActionsComponent:ke})})})]})})})]}),e.jsxs(Ke,{fullWidth:!0,maxWidth:"xl",open:B,onClose:l,children:[e.jsx(Je,{sx:{color:`${s?"white":"black"}`},children:"Notification Details"}),e.jsx(Qe,{sx:{color:`${s?"white":"black"}`},children:e.jsx("table",{border:1,width:"100%",style:{borderCollapse:"collapse"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"12px 14px"},children:"Date"}),e.jsx("td",{style:{padding:"12px 14px"},children:me((J=a==null?void 0:a[0])==null?void 0:J.createdAt).format("YYYY-MM-DD hh:mm:ss A")})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"12px 14px"},children:"Title"}),e.jsx("td",{style:{padding:"12px 14px"},children:(X=a==null?void 0:a[0])==null?void 0:X.title})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"12px 14px"},children:"Message"}),e.jsx("td",{style:{padding:"12px 14px"},children:e.jsx("div",{className:"html",style:{lineHeight:1.6},dangerouslySetInnerHTML:{__html:(Z=a==null?void 0:a[0])==null?void 0:Z.message}})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"12px 14px"},children:"Message Type"}),e.jsx("td",{style:{padding:"12px 14px"},children:(w=a==null?void 0:a[0])==null?void 0:w.notifyType})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"12px 14px"},children:"Tags"}),e.jsx("td",{style:{padding:"12px 14px"},children:(te=Le((ee=a==null?void 0:a[0])==null?void 0:ee.tags))==null?void 0:te.map((t,n)=>e.jsxs("span",{style:{background:"#0288D1",color:"white",padding:"6px",marginLeft:"2px"},children:["#",t]},n))})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"12px 14px"},children:"Attachment"}),e.jsx("td",{style:{padding:"12px 14px"},children:e.jsx(e.Fragment,{children:(ae=a==null?void 0:a[0])!=null&&ae.attachment?e.jsx(e.Fragment,{children:e.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:"12px"},children:[(se=a==null?void 0:a[0])!=null&&se.attachment.includes("pdf")?e.jsx(e.Fragment,{children:e.jsx(i,{children:e.jsx("img",{src:"https://quickcash.oyefin.com/pdf.png",alt:(de=a==null?void 0:a[0])==null?void 0:de.title,height:"100",width:"100"})})}):e.jsx(e.Fragment,{children:e.jsx(i,{children:(ne=a==null?void 0:a[0])!=null&&ne.attachment.includes("doc")?e.jsx("img",{src:"https://quickcash.oyefin.com/docx.png",alt:(ce=a==null?void 0:a[0])==null?void 0:ce.title,height:"100",width:"100"}):(ie=a==null?void 0:a[0])!=null&&ie.attachment.includes("xlsx")?e.jsx("img",{src:"https://quickcash.oyefin.com/xls.jpg",alt:(re=a==null?void 0:a[0])==null?void 0:re.title,height:"100",width:"100"}):e.jsx("img",{src:`https://quickcash.oyefin.com/notifications/${(le=a==null?void 0:a[0])==null?void 0:le.attachment}`,alt:(oe=a==null?void 0:a[0])==null?void 0:oe.title,height:"200",width:"200",onError:({currentTarget:t})=>{t.onerror=null,t.src="https://quickcash.oyefin.com/otherdocs.png"}})})}),e.jsx(i,{children:e.jsx("a",{target:"_blank",href:`https://quickcash.oyefin.com/notifications/${(pe=a==null?void 0:a[0])==null?void 0:pe.attachment}`,style:{textDecoration:"none",color:"white",background:"purple",cursor:"pointer",padding:"12px 12px"},children:"View"})})]})}):"N/A"})})]})]})})}),e.jsx(Xe,{children:e.jsx(S,{onClick:l,children:"Close"})})]})]})}export{Et as default};
