import{R as n,u as k,r as d,j as t,L as i}from"./index-B9qwR40S.js";import{a as u,B as p,C as w,c as S}from"./App-CFR6fik0.js";import{d as I}from"./LockOutlined-aU1FNwyU.js";import{T as A}from"./ThemeProvider-C7ciiAbi.js";import{G as o}from"./Grid-BIlHrh_s.js";import{P as B}from"./Menu-H6tylDrM.js";import{B as g}from"./Box-DjrMrGfB.js";import{A as T}from"./Avatar-BLdAY2VN.js";import{T as x}from"./Typography-BgIXEw26.js";import{T as h}from"./TextField-DIvH6pZa.js";import{F as P}from"./FormControlLabel-XwWfn4bV.js";import{C as D}from"./Checkbox-CySvLdKD.js";import{B as F}from"./Button-aV3rdW9B.js";import"./createSvgIcon-BUt4voxn.js";import"./createSvgIcon-CcoZBy8v.js";import"./styled-BsGwS7pf.js";import"./TransitionGroupContext-Cv1NJVlO.js";import"./isMuiElement-D5GR-K16.js";import"./ButtonBase-zmZ_D00R.js";import"./Backdrop-Oj7HNN4g.js";import"./utils-DDNWiXs5.js";import"./index-BYwnN-4t.js";import"./useSlot-C5fw4elg.js";import"./FormControl-BMtTfMYN.js";import"./Select-XPPy0NoH.js";import"./Stack-CSx1LiRw.js";import"./styled-BlZJa671.js";import"./createStyled-BGj6BOnT.js";import"./SwitchBase-Y7am25X4.js";const L={authenticated:!!localStorage.getItem("admin"),setAuthenticated:()=>{}},R=n.createContext(L);function E(a){return t.jsxs(x,{variant:"body2",color:"text.secondary",align:"center",...a,children:["Copyright Â© ",t.jsx(i,{color:"inherit",to:"/admin",style:{textDecoration:"none"},children:"Quick Cash"})," ",new Date().getFullYear(),"."]})}const $=S();function pe(){const a=e=>{e.preventDefault();const r=new FormData(e.currentTarget);console.log({email:r.get("email"),password:r.get("password")})},m="api",l=k(),[f,j]=n.useState(""),[b,y]=n.useState(""),{authenticated:q,setAuthenticated:c}=d.useContext(R);d.useEffect(()=>{localStorage.getItem("admintoken")&&C()},[]);const C=async()=>{await u.get(`/${m}/v1/admin/auth`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(e=>{e.data.status==201&&(c(!0),l("/admin/dashboard"))}).catch(e=>{console.log("error",e),s(e.response.data.message,"error")})},v=async()=>{await u.post(`/${m}/v1/admin/login`,{email:f,password:b}).then(e=>{e.status==200&&(c(!0),localStorage.setItem("admin","loggedin"),localStorage.setItem("admintoken",e.data.token),s(`${e.data.data.fname} is Logged In Successfully!!!`,"success"),l("/admin/dashboard"))}).catch(e=>{s(e.response.data.message,"error"),console.log("Login api error",e)})},s=(e,r)=>{r=="error"?p.error(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):p.success(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})};return t.jsx(A,{theme:$,children:t.jsxs(o,{container:!0,component:"main",sx:{height:"100vh"},children:[t.jsx(w,{}),t.jsx(o,{item:!0,xs:!1,sm:4,md:7,sx:{backgroundImage:"url(https://quickcash.oyefin.com/forgotbg.png)",backgroundRepeat:"no-repeat",backgroundColor:e=>e.palette.mode==="light"?e.palette.grey[50]:e.palette.grey[900],backgroundSize:{md:"80%",sm:"100%"},backgroundPosition:{xs:"center",sm:"cover"}}}),t.jsx(o,{item:!0,xs:12,sm:8,md:5,component:B,elevation:6,square:!0,children:t.jsxs(g,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsx(T,{sx:{m:1,bgcolor:"secondary.main"},children:t.jsx(I,{})}),t.jsx(x,{component:"h1",variant:"h5",children:"Admin Sign in"}),t.jsxs(g,{component:"form",noValidate:!0,onSubmit:a,sx:{mt:1},children:[t.jsx(h,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:e=>j(e.target.value),autoFocus:!0}),t.jsx(h,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:e=>y(e.target.value)}),t.jsx(P,{control:t.jsx(D,{value:"remember",color:"primary"}),label:"Remember me"}),t.jsx(F,{type:"button",onClick:()=>v(),fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),t.jsxs(o,{container:!0,children:[t.jsx(o,{item:!0,xs:!0,children:t.jsx(i,{to:"/forgot-password",style:{textDecoration:"none"},children:"Forgot password?"})}),t.jsx(o,{item:!0,children:t.jsx(i,{to:"/",style:{textDecoration:"none"},children:"Return to User Login"})})]}),t.jsx(E,{sx:{mt:5}})]})]})})]})})}export{pe as default};
