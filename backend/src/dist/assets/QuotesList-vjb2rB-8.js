import{R as o,c as Pe,r as J,u as Re,f as Be,j as t}from"./index-B9qwR40S.js";import{a as g,j as v,g as De,p as Ie,B as K}from"./App-CFR6fik0.js";import{h as X}from"./moment-Cl4UOzQZ.js";import{P as I}from"./index-DT2UdaRk.js";import{S as qe,A as Te,c as ze}from"./index-DKLob3r9.js";import{$ as Me}from"./module-BpGHhIWK.js";import{d as Le}from"./Cancel-BMUL7riW.js";import{d as Ae}from"./MoreVert-Iy9KTSaP.js";import{T as _e,a as Fe,d as Z,b as w}from"./FirstPage-CnED-xBk.js";import{d as ee}from"./KeyboardArrowLeft-e3tUOFQz.js";import{d as te}from"./KeyboardArrowRight-C-bhOL4W.js";import{C as Ne}from"./ColorButton-av-QDLqY.js";/* empty css                                  */import{s as ae}from"./styled-BsGwS7pf.js";import{B as Ee}from"./Backdrop-Oj7HNN4g.js";import{C as He}from"./CircularProgress-mVSoIk37.js";import{B as k}from"./Box-DjrMrGfB.js";import{G as r,u as Oe}from"./Grid-BIlHrh_s.js";import{T as q}from"./Tooltip-xwdkk0JG.js";import{M as We,P as Ve,a as Qe}from"./Menu-H6tylDrM.js";import{C as Ye}from"./Card-BGgVOW-e.js";import{C as Ue}from"./CardContent-BJeuC3pn.js";import{T as Ge}from"./Typography-BgIXEw26.js";import{S as Je}from"./Select-XPPy0NoH.js";import{M as d}from"./MenuItem-C_v2NxOH.js";import{C as Ke}from"./CardActions-CCoDHw66.js";import{T as Xe,a as Ze,b as we}from"./TableHead-LvrpkW6e.js";import{T}from"./TableRow-CyhsH7Yh.js";import{T as f}from"./TableCell-B4YREpT2.js";import{T as et}from"./TableBody-D7cXea7d.js";import{I as P}from"./IconButton-Dq6tDNV5.js";import{B as tt}from"./Button-aV3rdW9B.js";import"./index-BYwnN-4t.js";import"./useSlot-C5fw4elg.js";import"./TransitionGroupContext-Cv1NJVlO.js";import"./createSvgIcon-CcoZBy8v.js";import"./Close-_hwyFSb5.js";import"./ButtonBase-zmZ_D00R.js";import"./html2canvas.esm-3NQT9CgR.js";import"./jspdf.es.min-p4cJDUes.js";import"./typeof-QjJsDpFa.js";import"./createSvgIcon-BUt4voxn.js";import"./isMuiElement-D5GR-K16.js";import"./Tablelvl2Context-61ZLNN4C.js";import"./Toolbar-CygE0b_a.js";import"./utils-DDNWiXs5.js";import"./Popper-57e9ovz_.js";import"./Popper-PT2z9mk3.js";import"./dividerClasses-BNeE3VJI.js";import"./listItemTextClasses-BhtcCChC.js";const at=ae(tt)(({theme:n})=>({color:n.palette.getContrastText(Ie[500]),backgroundColor:"silver","&:hover":{backgroundColor:"silver"}}));function se(n){const p=Oe(),{count:u,page:l,rowsPerPage:j,onPageChange:h}=n,m=c=>{h(c,0)},S=c=>{h(c,l-1)},z=c=>{h(c,l+1)},M=c=>{h(c,Math.max(0,Math.ceil(u/j)-1))};return t.jsxs(k,{sx:{flexShrink:0,ml:2.5},children:[t.jsx(P,{onClick:m,disabled:l===0,"aria-label":"first page",children:p.direction==="rtl"?t.jsx(Z,{}):t.jsx(w,{})}),t.jsx(P,{onClick:S,disabled:l===0,"aria-label":"previous page",children:p.direction==="rtl"?t.jsx(te,{}):t.jsx(ee,{})}),t.jsx(P,{onClick:z,disabled:l>=Math.ceil(u/j)-1,"aria-label":"next page",children:p.direction==="rtl"?t.jsx(ee,{}):t.jsx(te,{})}),t.jsx(P,{onClick:M,disabled:l>=Math.ceil(u/j)-1,"aria-label":"last page",children:p.direction==="rtl"?t.jsx(w,{}):t.jsx(Z,{})})]})}se.propTypes={count:I.number.isRequired,onPageChange:I.func.isRequired,page:I.number.isRequired,rowsPerPage:I.number.isRequired};const st=[{id:"quote_number",label:"Quote Number",minWidth:170},{id:"date",label:"Quote Date",minWidth:170},{id:"due_date",label:"Due Date",minWidth:170},{id:"amount",label:"Amount",minWidth:100},{id:"status",label:"Status",minWidth:100},{id:"action",label:"Action",minWidth:120}];function nt(n,p,u,l,j,h,m,S){return{id:n,quote_number:p,quotedate:u,due_date:l,total:j,status:h,action:m,currency:S}}const ot={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4};function na(){const n="api",[p,u]=o.useState(!1),{toPDF:l,targetRef:j}=Me({filename:"quotes.pdf"}),[h,m]=o.useState(!1),S=()=>m(!0),z=()=>m(!1),[M,c]=o.useState(!1),ne=e=>{c(!0),ze(e),C(null)},N=()=>{c(!1)},E=Pe().search;J.useEffect(()=>{const e=new URLSearchParams(E).get("payment_intent"),a=new URLSearchParams(E).get("redirect_status");e&&a&&oe(e,a)},[]);const oe=async(e,a)=>{u(!0),await g.post(`/${n}/v1/stripe/complete`,{transaction_id:e,status:a}).then(s=>{s.data.status==201&&(u(!1),B("/invoice-section"))}).catch(s=>{console.log(s)})},[H,C]=o.useState(null),L=!!H,[ie,re]=o.useState(""),[R,le]=o.useState(""),[A,ce]=o.useState(""),[it,de]=o.useState(""),[rt,pe]=o.useState(""),ue=e=>{var a=e.currentTarget.value.split("-");le(a[0]),ce(a[1]),de(a[2]),re(a[3]),pe(a[4]),C(e.currentTarget)},O=()=>{C(null)},B=Re(),[i]=Be(),[_,W]=o.useState();J.useEffect(()=>{const e=v(localStorage.getItem("token"));D(e.data.id)},[]);const D=async e=>{await g.get(`/${n}/v1/quote/list/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(a=>{a.data.status=="201"&&W(a.data.data)}).catch(a=>{console.log("error",a)})},he=async()=>{var a;const e=v(localStorage.getItem("token"));await g.get(`/${n}/v1/quote/export/${(a=e==null?void 0:e.data)==null?void 0:a.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(s=>{s.data.status=="success"&&b("Excel Report has been generated Successfully","Success"),window.open("https://quickcash.oyefin.com/quotes.xlsx")}).catch(s=>{console.log("error",s)})};let V=[];V=[_==null?void 0:_.map(e=>nt(e._id,e.quote_number,e.invoice_date,e.due_date,e.total,e.status,e._id,e.currency))].sort((e,a)=>e.date<a.date?-1:1);const x=V[0]||[],[F,Q]=o.useState(0),[$,me]=o.useState(5),xe=(e,a)=>{console.log(e),Q(a)},ge=e=>{me(parseInt(e.target.value,10)),Q(0)},b=(e,a)=>{a=="error"?K.error(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):K.success(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},[Y,U]=o.useState(""),[fe,je]=o.useState(""),be=async()=>{var a;const e=v(localStorage.getItem("token"));await g.get(`/${n}/v1/quote/list/${(a=e==null?void 0:e.data)==null?void 0:a.id}?status=${Y}&recurring=${fe}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(s=>{s.data.status=="201"&&(W(s.data.data),m(!1))}).catch(s=>{console.log("error",s)})},ye=async e=>{var a=confirm("Are you sure?");if(a==!0)await g.delete(`/${n}/v1/quote/delete/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(s=>{if(s.data.status=="201"){const y=v(localStorage.getItem("token"));C(null),D(y.data.id),b("Selected Quote has been deleted Successfully","success")}}).catch(s=>{console.log("error",s),b(s.response.data.message,"error")});else return!1},G=()=>{m(!1),je(""),U("");const e=v(localStorage.getItem("token"));D(e.data.id)},ve=ae("div")(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"right",height:"100%","& .ant-empty-img-1":{fill:e.palette.mode==="light"?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:e.palette.mode==="light"?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:e.palette.mode==="light"?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:e.palette.mode==="light"?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:e.palette.mode==="light"?"0.8":"0.08",fill:e.palette.mode==="light"?"#f5f5f5":"#fff"}}));function Ce(){return t.jsxs(ve,{children:[t.jsx("svg",{width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:t.jsxs("g",{fill:"none",fillRule:"evenodd",children:[t.jsxs("g",{transform:"translate(24 31.67)",children:[t.jsx("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),t.jsx("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),t.jsx("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),t.jsx("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),t.jsx("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),t.jsxs("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[t.jsx("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),t.jsx("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),t.jsx(k,{sx:{mt:1},children:"No Data found"})]})}const ke=async()=>{var a;const e=v(localStorage.getItem("token"));await g.get(`/${n}/v1/invoice/settings-inv/${(a=e==null?void 0:e.data)==null?void 0:a.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(s=>{var y;s.data.status=="201"&&(((y=s==null?void 0:s.data)==null?void 0:y.data)==null?(b("Please save invoice settings details first","error"),B("/settings")):B("/quotes/add-quote"))}).catch(s=>{console.log("error",s)})},Se=async e=>{await g.get(`/${n}/v1/quote/reminder-inv/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(a=>{a.data.status=="201"&&(C(null),b("Reminder has been sent on email address","success"))}).catch(a=>{var s,y;b((y=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:y.message,"error"),console.log("error",a)})},$e=async e=>{await g.patch(`/${n}/v1/quote/convert-quote/${e}`,{status:"converted"},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(a=>{if(a.data.status==201){b("Quote Convertd into Invoice successfully","success"),C(null);const s=v(localStorage.getItem("token"));D(s.data.id)}}).catch(a=>{console.log(a)})};return t.jsxs(t.Fragment,{children:[t.jsx(Ee,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:p,onClick:O,children:t.jsx(He,{color:"inherit"})}),t.jsx(qe,{open:M,autoHideDuration:6e3,onClose:N,anchorOrigin:{horizontal:"center",vertical:"top"},children:t.jsx(Te,{onClose:N,severity:"success",variant:"filled",sx:{width:"100%"},children:"Invoice URL Copied!"})}),t.jsxs(k,{sx:{marginTop:{xs:"-10px",md:"12px"},fontSize:"15px"},children:[t.jsxs(r,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"normal",gap:"10px",marginBottom:"12px"},children:[t.jsx(r,{onClick:()=>S(),sx:{cursor:"pointer"},children:t.jsx(q,{title:"Filter",sx:{cursor:"pointer"},placement:"bottom-start",children:t.jsx("img",{src:"https://quickcash.oyefin.com/icons/filter.png",width:45})})}),t.jsx(r,{onClick:he,sx:{cursor:"pointer"},children:t.jsx(q,{title:"Download Excel",sx:{cursor:"pointer"},placement:"bottom-start",children:t.jsx("img",{src:"https://quickcash.oyefin.com/icons/excel.png",width:45})})}),t.jsx(r,{onClick:()=>l(),sx:{cursor:"pointer"},children:t.jsx(q,{title:"Download Pdf",sx:{cursor:"pointer"},placement:"bottom-start",children:t.jsx("img",{src:"https://quickcash.oyefin.com/icons/pdf.png",width:45})})}),t.jsx(r,{onClick:()=>ke(),sx:{cursor:"pointer"},children:t.jsx(q,{title:"Add New Quote",sx:{cursor:"pointer"},placement:"bottom-start",children:t.jsx("img",{src:"https://quickcash.oyefin.com/icons/add.png",width:45})})})]}),t.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:"1px",borderRadius:".5rem",color:"black",fontWeight:"700",background:"white",padding:"3px"},children:[t.jsx("div",{children:t.jsx(We,{open:h,onClose:z,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:t.jsx(k,{sx:ot,children:t.jsxs(Ye,{children:[t.jsxs(Ue,{children:[t.jsx(Ge,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:t.jsxs(r,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[t.jsx(r,{sx:{color:`${i?"white":"black"}`},children:"Filter Options"}),t.jsx(r,{sx:{color:`${i?"white":"black"}`},children:t.jsx(Le,{sx:{cursor:"pointer"},onClick:()=>G()})})]})}),t.jsx("hr",{}),t.jsx("label",{children:"Status:"}),t.jsxs(Je,{fullWidth:!0,sx:{marginBottom:"20px",border:`${i?"1px solid white":""}`},value:Y,onChange:e=>U(e.target.value),children:[t.jsx(d,{value:"",children:"All"}),t.jsx(d,{value:"converted",children:"Converted"}),t.jsx(d,{value:"reject",children:"Rejected"}),t.jsx(d,{value:"accept",children:"Accepted"}),t.jsx(d,{value:"created",children:"Created"})]})]}),t.jsxs(Ke,{sx:{float:"right"},children:[t.jsx(Ne,{onClick:()=>be(),children:"Filter"}),t.jsx(at,{onClick:()=>G(),children:"Reset"})]})]})})})}),t.jsx(k,{sx:{overflow:"auto"},children:t.jsx(k,{sx:{width:"100%",display:"table",tableLayout:"fixed"},children:t.jsx(Xe,{component:Ve,ref:j,children:t.jsxs(Ze,{sx:{minWidth:500},"aria-label":"custom pagination table",children:[t.jsx(we,{children:t.jsx(T,{className:`${i?"avatarDark":"avatarLight"}`,children:st.map(e=>t.jsx(f,{width:"220",style:{padding:"12px",background:"#8657E5",color:"white"},children:e.label},e.id))})}),t.jsxs(et,{children:[($>0?x==null?void 0:x.slice(F*$,F*$+$):x).map(e=>t.jsxs(T,{children:[t.jsx(f,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:e==null?void 0:e.quote_number}),t.jsx(f,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:X(e==null?void 0:e.invoicedate).format("DD-MM-YYYY")}),t.jsx(f,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:X(e==null?void 0:e.due_date).format("DD-MM-YYYY")}),t.jsxs(f,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:[De(e==null?void 0:e.currency),e==null?void 0:e.total]}),t.jsxs(f,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:[(e==null?void 0:e.status)=="created"&&t.jsx(t.Fragment,{children:t.jsx("span",{style:{background:"green",borderRadius:"12px",color:"white",padding:"10px"},children:"Created"})}),(e==null?void 0:e.status)=="converted"&&t.jsx(t.Fragment,{children:t.jsx("span",{style:{background:"purple",borderRadius:"12px",color:"white",padding:"10px"},children:"Converted"})}),(e==null?void 0:e.status)=="accept"&&t.jsx(t.Fragment,{children:t.jsx("span",{style:{background:"magenta",borderRadius:"12px",color:"white",padding:"10px"},children:"Accepted"})}),(e==null?void 0:e.status)=="reject"&&t.jsx(t.Fragment,{children:t.jsx("span",{style:{background:"red",borderRadius:"12px",color:"white",padding:"10px"},children:"Rejected"})})]}),t.jsx(f,{scope:"row",children:t.jsx(r,{sx:{display:"flex",flexDirection:"row",justifyContent:"normal"},children:t.jsxs(r,{children:[t.jsx(P,{"aria-label":"more",value:`${e==null?void 0:e.id}-${e==null?void 0:e.status}-${e==null?void 0:e.recurring}-${e==null?void 0:e.quote_number}-${e==null?void 0:e.createdBy}`,id:`long-button${e==null?void 0:e.id}`,"aria-controls":L?`long-menu${e==null?void 0:e.id}`:void 0,"aria-expanded":L?"true":void 0,"aria-haspopup":"true",sx:{color:`${i?"white":"black"}`},onClick:ue,children:t.jsx(Ae,{})}),t.jsxs(Qe,{id:`long-menu${e==null?void 0:e.id}`,MenuListProps:{"aria-labelledby":`long-button${e==null?void 0:e.id}`},anchorEl:H,open:L,onClose:O,children:[A=="accept"&&t.jsx(t.Fragment,{children:t.jsx(d,{onClick:()=>$e(R),children:t.jsx("span",{className:`${i?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"Convert to Invoice"})})}),A=="created"&&t.jsx(d,{onClick:()=>B(`/edit-quote/${R}`),children:t.jsx("span",{className:`${i?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"Edit"})}),t.jsx(d,{onClick:()=>ne(`https://quickcash.oyefin.com/quote/${ie}`),children:t.jsx("span",{className:`${i?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"Quote URL"})}),t.jsx(d,{onClick:()=>ye(R),children:t.jsx("span",{className:`${i?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"Delete"})}),A=="created"&&t.jsx(t.Fragment,{children:t.jsx(d,{onClick:()=>Se(R),children:t.jsx("span",{className:`${i?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"Reminder"})})})]},e==null?void 0:e.id)]})})})]},e==null?void 0:e.invoice_date)),(x==null?void 0:x.length)==0&&t.jsx(T,{children:t.jsx(f,{colSpan:7,children:t.jsx(Ce,{})})})]}),t.jsx(_e,{sx:{background:`${i?"white":""}`},children:t.jsx(T,{children:t.jsx(Fe,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:7,count:x.length,rowsPerPage:$,page:F,slotProps:{select:{inputProps:{"aria-label":"rows per page"},native:!0}},sx:{color:"black"},onPageChange:xe,onRowsPerPageChange:ge,ActionsComponent:se})})})]})})})})]})]})]})}export{na as default};
