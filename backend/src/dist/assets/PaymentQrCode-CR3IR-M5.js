import{u as _,f as Q,R as T,r as Y,j as t}from"./index-CPyIBKv5.js";import{j as C,a as B,p as E,B as S}from"./App-CPA_Lu-d.js";import{h as F}from"./moment-Cl4UOzQZ.js";import{P}from"./index-CnKBBWDD.js";import{d as G}from"./Edit-xWICtCSo.js";import{d as J}from"./Delete-BmSHH09j.js";import{T as K,a as U,d as $,b as I}from"./FirstPage-CyB0DMsa.js";import{d as M}from"./KeyboardArrowLeft-5C2p3fWB.js";import{d as R}from"./KeyboardArrowRight-Ds7yJ1IK.js";import{s as D}from"./styled-D3btvjLo.js";import{B as j}from"./Box-Cts58nYT.js";import{T as z}from"./Typography-32GqnDkD.js";import{G as X,u as Z}from"./Grid-ijiQ2gXa.js";import{T as w,a as ee,b as te}from"./TableHead-CDbs7t4O.js";import{P as ae}from"./Menu-DzGOcUhD.js";import{T as k}from"./TableRow-CLwSHvJ6.js";import{T as m}from"./TableCell-B98GTLWK.js";import{T as se}from"./TableBody-E-ctUCz8.js";import{S as ie}from"./Switch-BmlPKvO5.js";import{B as oe}from"./Button-mU0fsZ6C.js";import{I as v}from"./IconButton-Dq1QOsvQ.js";import"./createSvgIcon-DK6HOpVs.js";import"./createSvgIcon-CJCtbkVa.js";import"./TransitionGroupContext-DpwKRQDB.js";import"./isMuiElement-CtMSz7xH.js";import"./ButtonBase-lj8ryPQQ.js";import"./Tablelvl2Context-CrQONfEB.js";import"./Toolbar--Cv9kmMg.js";import"./Select-Cu2oDfAu.js";import"./MenuItem-BOkCQE_H.js";import"./dividerClasses-a3rAEu9c.js";import"./listItemTextClasses-DgiHFli8.js";import"./Backdrop-5VrCmbBJ.js";import"./utils-27lUOG69.js";import"./SwitchBase-BFWfvGgQ.js";import"./index-ClFg78Yr.js";const ne=D(oe)(({theme:r})=>({color:r.palette.getContrastText(E[500]),backgroundColor:"#2196f3","&:hover":{backgroundColor:"#2196f3"}}));function q(r){const c=Z(),{count:n,page:s,rowsPerPage:l,onPageChange:p}=r,h=o=>{p(o,0)},g=o=>{p(o,s-1)},i=o=>{p(o,s+1)},u=o=>{p(o,Math.max(0,Math.ceil(n/l)-1))};return t.jsxs(j,{sx:{flexShrink:0,ml:2.5},children:[t.jsx(v,{onClick:h,disabled:s===0,"aria-label":"first page",children:c.direction==="rtl"?t.jsx($,{}):t.jsx(I,{})}),t.jsx(v,{onClick:g,disabled:s===0,"aria-label":"previous page",children:c.direction==="rtl"?t.jsx(R,{}):t.jsx(M,{})}),t.jsx(v,{onClick:i,disabled:s>=Math.ceil(n/l)-1,"aria-label":"next page",children:c.direction==="rtl"?t.jsx(M,{}):t.jsx(R,{})}),t.jsx(v,{onClick:u,disabled:s>=Math.ceil(n/l)-1,"aria-label":"last page",children:c.direction==="rtl"?t.jsx(I,{}):t.jsx($,{})})]})}q.propTypes={count:P.number.isRequired,onPageChange:P.func.isRequired,page:P.number.isRequired,rowsPerPage:P.number.isRequired};const le=[{id:"date",label:"Date",minWidth:170},{id:"title",label:"Title",minWidth:100},{id:"image",label:"Image",minWidth:100},{id:"default",label:"Default",minWidth:100},{id:"action",label:"Action",minWidth:120}];function re(r,c,n,s,l){return{id:r,date:c,title:n,image:s,IsDefault:l}}function Ee(){const r=_(),[c]=Q(),[n,s]=T.useState(),l="api",p=async e=>{var d,b;const a=C(localStorage.getItem("admintoken"));await B.patch(`/${l}/v1/admin/qrcode/update/${(d=e==null?void 0:e.target)==null?void 0:d.value}`,{user:(b=a==null?void 0:a.data)==null?void 0:b.id,isDefault:e.target.checked==!0?"yes":"no"},{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(x=>{if(x.data.status=="201"){y(x.data.message,"success");const V=C(localStorage.getItem("admintoken"));h(V.data.id)}}).catch(x=>{console.log("error",x),y(x.response.data.message,"error")})};Y.useEffect(()=>{const e=C(localStorage.getItem("admintoken"));h(e.data.id)},[]);const h=async e=>{await B.get(`/${l}/v1/admin/qrcode/list/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(a=>{a.data.status=="201"&&s(a.data.data)}).catch(a=>{console.log("error",a)})};let g=[];g=[n==null?void 0:n.map(e=>re(e._id,e.createdAt,e.title,e.image,e.IsDefault))].sort((e,a)=>e.date<a.date?-1:1);const i=g[0]||[],[u,o]=T.useState(0),[f,A]=T.useState(5),H=e=>{o(e)},y=(e,a)=>{a=="error"?S.error(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):S.success(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},L=e=>{A(parseInt(e.target.value,10)),o(0)},O=async e=>{var a=confirm("Are you sure?");if(a==!0)await B.delete(`/${l}/v1/admin/qrcode/delete/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(d=>{if(d.data.status=="201"){const b=C(localStorage.getItem("admintoken"));h(b.data.id),y("Selected Payment QR Code deltails has been deleted Successfully","success")}}).catch(d=>{console.log("error",d),y(d.response.data.message,"error")});else return!1},W=D("div")(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"right",height:"100%","& .ant-empty-img-1":{fill:e.palette.mode==="light"?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:e.palette.mode==="light"?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:e.palette.mode==="light"?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:e.palette.mode==="light"?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:e.palette.mode==="light"?"0.8":"0.08",fill:e.palette.mode==="light"?"#f5f5f5":"#fff"}}));function N(){return t.jsxs(W,{children:[t.jsx("svg",{width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:t.jsxs("g",{fill:"none",fillRule:"evenodd",children:[t.jsxs("g",{transform:"translate(24 31.67)",children:[t.jsx("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),t.jsx("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),t.jsx("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),t.jsx("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),t.jsx("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),t.jsxs("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[t.jsx("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),t.jsx("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),t.jsx(j,{sx:{mt:1},children:"No Data found"})]})}return t.jsx(t.Fragment,{children:t.jsxs(j,{sx:{marginLeft:{md:"7%"},marginTop:"12px",fontSize:"15px",width:{md:"89%"}},children:[t.jsx(z,{children:t.jsx(ne,{onClick:()=>r("/admin/invoices/add-qr-code"),sx:{marginBottom:"10px"},children:"Add QR Code"})}),t.jsx(X,{sx:{display:"flex",flexDirection:"column",gap:"20px",borderRadius:".5rem",color:"black",fontWeight:"700",background:"white",padding:"3px"},children:t.jsx(j,{sx:{overflow:"auto"},children:t.jsx(j,{sx:{width:"100%",display:"table",tableLayout:"fixed"},children:t.jsx(w,{component:ae,children:t.jsxs(ee,{sx:{minWidth:500},"aria-label":"custom pagination table",children:[t.jsx(te,{children:t.jsx(k,{className:`${c?"avatarDark":"avatarLight"}`,children:le.map(e=>t.jsx(m,{style:{minWidth:e.minWidth},children:e.label},e.id))})}),t.jsxs(se,{children:[(f>0?i==null?void 0:i.slice(u*f,u*f+f):i).map(e=>t.jsxs(k,{children:[t.jsx(m,{component:"th",scope:"row",children:F(e==null?void 0:e.date).format("MMMM Do YYYY, h:mm:ss A")}),t.jsx(m,{style:{width:50},component:"th",scope:"row",children:e==null?void 0:e.title}),t.jsx(m,{style:{width:160},component:"th",scope:"row",children:(e==null?void 0:e.image)!=""?t.jsx("img",{crossOrigin:"anonymous",src:`https://quickcash.oyefin.com/qrcode/${e==null?void 0:e.image}`,width:"100%",height:"100%",alt:`paymentqrcode${e==null?void 0:e.title}`}):t.jsx(z,{children:"QR is not available"})}),t.jsx(m,{style:{width:160},component:"th",scope:"row",children:t.jsx(ie,{checked:(e==null?void 0:e.IsDefault)=="yes",value:e==null?void 0:e.id,onChange:p,color:"warning",inputProps:{"aria-label":"controlled"}})}),t.jsxs(m,{component:"th",scope:"row",children:[t.jsx(G,{sx:{cursor:"pointer",marginLeft:"10px"},onClick:()=>r(`/admin/invoices/edit-qrcode/${e==null?void 0:e.id}`)}),t.jsx(J,{sx:{cursor:"pointer",marginLeft:"10px"},onClick:()=>O(e==null?void 0:e.id)})]})]},e==null?void 0:e.date)),(i==null?void 0:i.length)==0&&t.jsx(k,{style:{height:53*i},children:t.jsx(m,{colSpan:7,children:t.jsx(N,{})})})]}),t.jsx(K,{children:t.jsx(k,{children:t.jsx(U,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:7,count:g.length,rowsPerPage:f,page:u,slotProps:{select:{inputProps:{"aria-label":"rows per page"},native:!0}},onPageChange:H,onRowsPerPageChange:L,ActionsComponent:q})})})]})})})})})]})})}export{Ee as default};
