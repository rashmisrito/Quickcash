import{u as B,k as I,R as l,r as T,j as e}from"./index-B9qwR40S.js";import{a as f,n as $,p as q,j as D,B as j}from"./App-CFR6fik0.js";import{d as S}from"./CloudUpload-BCy1sBt0.js";import{d as O}from"./KeyboardBackspace-p3g3FXJu.js";import{d as P}from"./DoneOutlineOutlined-Do4oYN3g.js";import{T as Q}from"./Toolbar-CygE0b_a.js";import{B as F}from"./Box-DjrMrGfB.js";import{T as L}from"./Typography-BgIXEw26.js";import{G as i}from"./Grid-BIlHrh_s.js";import{T as A}from"./TextField-DIvH6pZa.js";import{C as E}from"./Card-BGgVOW-e.js";import{C as H}from"./CardHeader-DfP_sc4l.js";import{A as _}from"./Avatar-BLdAY2VN.js";import{R as z,a as v}from"./RadioGroup-Boq9NS0m.js";import{F as C}from"./FormControlLabel-XwWfn4bV.js";import{s as G}from"./styled-BsGwS7pf.js";import{B as U}from"./Button-aV3rdW9B.js";import"./createSvgIcon-BUt4voxn.js";import"./createSvgIcon-CcoZBy8v.js";import"./TransitionGroupContext-Cv1NJVlO.js";import"./isMuiElement-D5GR-K16.js";import"./ButtonBase-zmZ_D00R.js";import"./FormControl-BMtTfMYN.js";import"./Select-XPPy0NoH.js";import"./Menu-H6tylDrM.js";import"./Backdrop-Oj7HNN4g.js";import"./utils-DDNWiXs5.js";import"./index-BYwnN-4t.js";import"./useSlot-C5fw4elg.js";import"./SwitchBase-Y7am25X4.js";import"./Stack-CSx1LiRw.js";import"./styled-BlZJa671.js";import"./createStyled-BGj6BOnT.js";const W=G(U)(({theme:n})=>({color:n.palette.getContrastText(q[500]),backgroundColor:"#2196f3","&:hover":{backgroundColor:"#2196f3"}}));function Re(){const n=B(),o=I(),[d,m]=l.useState(""),[c,b]=l.useState(""),[a,y]=l.useState({preview:"",raw:""}),p="api";T.useEffect(()=>{w(o==null?void 0:o.id)},[o==null?void 0:o.id]);const w=async t=>{await f.get(`/${p}/v1/admin/qrcode/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(r=>{r.data.status=="201"&&(m(r.data.data.title),x(r.data.data.IsDefault),b(r.data.data.image))}).catch(r=>{console.log("error",r)})},u=(t,r)=>{r=="error"?j.error(t,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):j.success(t,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},N=async t=>{var h;t.preventDefault();const r=D(localStorage.getItem("admintoken"));await f.patch(`/${p}/v1/admin/qrcode/update/${o==null?void 0:o.id}`,{user:(h=r==null?void 0:r.data)==null?void 0:h.id,title:d,qrCodeImage:a==null?void 0:a.raw,isDefault:g},{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(s=>{s.data.status=="201"&&(u(s.data.message,"success"),n("/admin/invoices/payment-qr-codes"))}).catch(s=>{console.log("error",s),u(s.response.data.message,"error")})},[g,x]=l.useState("yes"),k=t=>{x(t.target.value)},R=t=>{t.target.files.length&&y({preview:URL.createObjectURL(t.target.files[0]),raw:t.target.files[0]})};return e.jsx(e.Fragment,{children:e.jsx(Q,{sx:{display:"flex",flexDirection:"column",borderRadius:".5rem",p:"10px",marginLeft:{xs:"0%",md:"7%"},background:"white",width:{xs:"100%",lg:"80%"}},children:e.jsxs(F,{sx:{marginTop:"0%",borderRadius:".5rem"},children:[e.jsx(L,{children:e.jsx(O,{sx:{cursor:"pointer",marginBottom:"10px"},onClick:()=>n("/admin/invoices/payment-qr-codes")})}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsxs(i,{item:!0,xs:12,sm:12,children:[e.jsx("label",{children:"Title"}),e.jsx(A,{required:!0,id:"name",name:"name",fullWidth:!0,onChange:t=>m(t.target.value),sx:{border:"1px solid silver"},value:d,inputProps:{shrink:!0}})]}),e.jsx(i,{item:!0,xs:12,sm:12,children:e.jsxs(E,{sx:{marginBottom:"10px",maxWidth:345},children:[e.jsx(H,{avatar:e.jsx(_,{sx:{bgcolor:$[500]},"aria-label":"recipe",children:"QR"}),title:"Upload Payment QR-Code"}),e.jsxs("div",{className:"Neon Neon-theme-dragdropbox",children:[e.jsx("input",{style:{zIndex:"999",opacity:"0",width:"100%",height:"100%",background:"silver",position:"absolute",right:"0px; left: 0px",marginRight:"auto",marginLeft:"auto"},name:"files[]",id:"filer_input2",type:"file",onChange:R}),c?e.jsx("img",{crossOrigin:"anonymous",src:`https://quickcash.oyefin.com/qrcode/${c}`,alt:"payment QR-Code image",width:"100%",height:"100%"}):a.preview?e.jsx("img",{src:a.preview,alt:"dummy",width:"100%",height:"100%"}):e.jsx("div",{className:"Neon-input-dragDrop",children:e.jsxs("div",{className:"Neon-input-inner",children:[e.jsx("div",{className:"Neon-input-icon",children:e.jsx("i",{className:"fa fa-file-image-o"})}),e.jsx("div",{className:"Neon-input-text"}),e.jsx("a",{className:"Neon-input-choose-btn blue",children:e.jsx(S,{style:{cursor:"pointer"}})})]})})]})]})}),e.jsxs(i,{item:!0,xs:12,sm:12,children:[e.jsx("label",{children:"Default:"}),e.jsxs(z,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:g,onChange:k,children:[e.jsx(C,{value:"yes",control:e.jsx(v,{}),label:"Yes"}),e.jsx(C,{value:"no",control:e.jsx(v,{}),label:"No"})]})]}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(W,{color:"primary",onClick:t=>N(t),children:[e.jsx(P,{sx:{mr:1}}),"Submit"]})})]})]})})})}export{Re as default};
