import{R as i,f as ye,r as U,j as a}from"./index-CoE2VX6x.js";import{a as f,j as be,B as X}from"./App-7Jvq8VZr.js";import{h as ve}from"./moment-Cl4UOzQZ.js";import{P as $}from"./index-Ci1k7pm5.js";import{d as Ce}from"./MoreVert-DH_4KxTz.js";import{T as $e,a as ke,d as Z,b as w}from"./FirstPage-CV41OKBR.js";import{D as Se}from"./DeleteModal-BfrPxm8s.js";import{C as Pe,a as Te}from"./ColorButton-Bu0aDQ81.js";import{d as ee}from"./KeyboardArrowLeft-D-n-rEH5.js";import{d as ae}from"./KeyboardArrowRight-BwY7qTnD.js";import{T as De,a as Be,b as k,c as h}from"./Tr-BUgYyhSd.js";/* empty css                                  */import{B as z}from"./Box-DrvSF1jp.js";import{G as Me,u as ze}from"./Grid-RwPzdMJP.js";import{T as Ee}from"./TableBody--MGYg3LD.js";import{I as j}from"./IconButton-CZlcg0JC.js";import{a as We}from"./Menu-D-pkvpX0.js";import{M as S}from"./MenuItem-BW-lSX80.js";import{D as Re,a as Ae}from"./DialogContent-CRrNBZcC.js";import{D as Le}from"./DialogTitle-C7wzoNZP.js";import{S as te,O as se}from"./Select-C-Fqr0jw.js";import{D as Ne}from"./DialogActions-CHOF4wDw.js";import{s as Ve}from"./styled-CaunRRC8.js";import"./createSvgIcon--VUwzkW7.js";import"./createSvgIcon-CskSDz12.js";import"./TransitionGroupContext-DihpCnG2.js";import"./isMuiElement-D9XtXNGG.js";import"./ButtonBase-DA2QyLs9.js";import"./Tablelvl2Context-RrRn-9WC.js";import"./TableCell-BBG5DTn8.js";import"./Toolbar-NhwhGpkP.js";import"./Close-DW60wq5h.js";import"./Typography-DO58wcCM.js";import"./Button-CAsxmj25.js";import"./Backdrop-CVEWDLdi.js";import"./utils-IyNMls5d.js";import"./dividerClasses-CRl8VoYq.js";import"./listItemTextClasses-tTLZOOAe.js";function ie(l){const o=ze(),{count:m,page:n,rowsPerPage:p,onPageChange:s}=l,u=r=>{s(r,0)},P=r=>{s(r,n-1)},T=r=>{s(r,n+1)},g=r=>{s(r,Math.max(0,Math.ceil(m/p)-1))};return a.jsxs(z,{sx:{flexShrink:0,ml:2.5},children:[a.jsx(j,{onClick:u,disabled:n===0,"aria-label":"first page",children:o.direction==="rtl"?a.jsx(Z,{}):a.jsx(w,{})}),a.jsx(j,{onClick:P,disabled:n===0,"aria-label":"previous page",children:o.direction==="rtl"?a.jsx(ae,{}):a.jsx(ee,{})}),a.jsx(j,{onClick:T,disabled:n>=Math.ceil(m/p)-1,"aria-label":"next page",children:o.direction==="rtl"?a.jsx(ee,{}):a.jsx(ae,{})}),a.jsx(j,{onClick:g,disabled:n>=Math.ceil(m/p)-1,"aria-label":"last page",children:o.direction==="rtl"?a.jsx(w,{}):a.jsx(Z,{})})]})}ie.propTypes={count:$.number.isRequired,onPageChange:$.func.isRequired,page:$.number.isRequired,rowsPerPage:$.number.isRequired};const Fe=[{id:"name",label:"Name",minWidth:100},{id:"type",label:"Type",minWidth:60},{id:"taxrate",label:"Tax Rate",minWidth:100},{id:"date",label:"Modified Date",minWidth:100},{id:"action",label:"Action",minWidth:100}];function Oe(l,o,m,n,p){return{id:l,date:o,type:m,commission:n,value:p}}const Ie=Ve("div")(({theme:l})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"right",height:"100%","& .ant-empty-img-1":{fill:l.palette.mode==="light"?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:l.palette.mode==="light"?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:l.palette.mode==="light"?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:l.palette.mode==="light"?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:l.palette.mode==="light"?"0.8":"0.08",fill:l.palette.mode==="light"?"#f5f5f5":"#fff"}}));function He(){return a.jsxs(Ie,{children:[a.jsx("svg",{width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:a.jsxs("g",{fill:"none",fillRule:"evenodd",children:[a.jsxs("g",{transform:"translate(24 31.67)",children:[a.jsx("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),a.jsx("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),a.jsx("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),a.jsx("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),a.jsx("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),a.jsxs("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[a.jsx("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),a.jsx("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),a.jsx(z,{sx:{mt:1},children:"No Data found"})]})}function Ta(){const l="api",[o,m]=i.useState(!1),[n,p]=i.useState(),[s]=ye();U.useEffect(()=>{g(),T()},[]);const[u,P]=i.useState([]),T=async()=>{await f.get(`/${l}/v1/admin/feetype/list`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(e=>{e.data.status==201&&P(e.data.data)})},g=async()=>{await f.get(`/${l}/v1/admin/feetype/list`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(e=>{e.data.status=="201"&&p(e.data.data)}).catch(e=>{console.log("error",e)})};let r=[];r=[n==null?void 0:n.map(e=>{var t,c,q,Y,G,J,K,Q;return Oe((c=(t=e==null?void 0:e.feedetails)==null?void 0:t[0])==null?void 0:c._id,(Y=(q=e==null?void 0:e.feedetails)==null?void 0:q[0])==null?void 0:Y.createdAt,e.title,(J=(G=e==null?void 0:e.feedetails)==null?void 0:G[0])==null?void 0:J.commissionType,(Q=(K=e==null?void 0:e.feedetails)==null?void 0:K[0])==null?void 0:Q.value)})].sort((e,t)=>e.date<t.date?-1:1);const d=r[0]||[],[D,E]=i.useState(0),[x,le]=i.useState(5),ne=(e,t)=>{console.log("New Page",e),E(t)},oe=e=>{le(parseInt(e.target.value,10)),E(0)},re=i.useRef(null);i.useEffect(()=>{if(o){const{current:e}=re;e!==null&&e.focus()}},[o]);const[de,B]=i.useState(),ce=e=>{I(e),pe(e),v(null),setTimeout(()=>{B(!0)},100)},W=()=>{B(!1)},[M,R]=i.useState(""),[y,A]=i.useState(""),[L,N]=i.useState(""),[V,F]=i.useState(""),pe=async e=>{e!="undefined"&&await f.get(`/${l}/v1/admin/fee/fees/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(t=>{t.data.status==201&&(R(t.data.data.type),A(t.data.data.commissionType),N(t.data.data.value),F(t.data.data.minimumValue))}).catch(t=>{console.log("error",t)})},he=async()=>{var t;const e=be(localStorage.getItem("admintoken"));await f.post(`/${l}/v1/admin/fee/add`,{user:(t=e==null?void 0:e.data)==null?void 0:t.id,type:M,commissionType:y,value:L,minimumValue:y=="fixed"?0:V},{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(c=>{c.data.status==201&&(b(c.data.message,"success"),g(),B(!1))}).catch(c=>{console.log("error",c),b(c.response.data.message,"error")})},b=(e,t)=>{t=="error"?X.error(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):X.success(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},[O,v]=i.useState(null),[me,I]=i.useState(""),ue=!!O,ge=e=>{var t=e.currentTarget.value.split("-");I(t[0]),v(e.currentTarget)},xe=()=>{v(null)},[H,_]=i.useState(!1),[C,fe]=i.useState(!1);U.useEffect(()=>{C&&(_(!1),je(C))},[C]);const je=async e=>{C&&await f.delete(`/myapp/v1/admin/fee/delete/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(t=>{t.data.status==201&&(g(),v(null),b("Selected data has been deleted","success"))}).catch(t=>{console.log(t),b(t.response.data.message,"error")})};return a.jsxs(a.Fragment,{children:[a.jsx(z,{sx:{marginLeft:{md:"7%"},marginTop:{xs:"-10px",md:"12px"},fontSize:"15px",width:{md:"91%"}},children:a.jsx(Me,{sx:{display:"flex",flexDirection:"column",gap:"20px",borderRadius:".5rem",fontWeight:"700",background:`${s?"#183153":"white"}`,color:`${s?"white":"black"}`,padding:"3px"},children:a.jsxs(De,{style:{background:`${s?"":"#F2F3FE"}`,color:`${s?"white":"black"}`},children:[a.jsx(Be,{children:a.jsx(k,{className:`${s?"avatarDark":"avatarLight"}`,children:Fe.map(e=>a.jsx(h,{width:"220",style:{padding:"12px",background:"#8657E5",color:"white"},children:e.label},e.id))})}),a.jsxs(Ee,{children:[(x>0?d==null?void 0:d.slice(D*x,D*x+x):d).map(e=>a.jsxs(k,{children:[a.jsx(h,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:e==null?void 0:e.type}),a.jsx(h,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:e==null?void 0:e.commission}),a.jsx(h,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:e==null?void 0:e.value}),a.jsx(h,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:ve(e==null?void 0:e.date).format("YYYY-MM-DD")}),a.jsxs(h,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:[a.jsx(j,{"aria-label":"more",value:`${e==null?void 0:e.id}-${e==null?void 0:e.status}-${e==null?void 0:e.recurring}-${e==null?void 0:e.invoice_number}`,id:`long-button${e==null?void 0:e.id}`,"aria-controls":o?`long-menu${e==null?void 0:e.id}`:void 0,"aria-expanded":o?"true":void 0,"aria-haspopup":"true",onClick:ge,sx:{color:`${s?"white":"black"}`},children:a.jsx(Ce,{})}),a.jsx(We,{id:`long-menu${e==null?void 0:e.id}`,MenuListProps:{"aria-labelledby":`long-button${e==null?void 0:e.id}`},anchorEl:O,open:ue,onClose:xe,children:a.jsx(S,{onClick:()=>ce(me),children:a.jsx("span",{className:`${s?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"Edit"})})},e==null?void 0:e.id)]})]},e==null?void 0:e.type)),(d==null?void 0:d.length)==0&&a.jsx(k,{children:a.jsx(h,{colSpan:9,children:a.jsx(He,{})})})]}),a.jsx($e,{sx:{background:`${s?"white":""}`,color:"black"},children:a.jsx(k,{children:a.jsx(ke,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:9,count:d.length,rowsPerPage:x,page:D,slotProps:{select:{inputProps:{"aria-label":"rows per page"},native:!0}},onPageChange:ne,onRowsPerPageChange:oe,ActionsComponent:ie})})})]})})}),a.jsxs(Re,{open:de,fullWidth:!0,maxWidth:"md",onClose:W,children:[a.jsx(Le,{sx:{textAlign:"center"},className:`${s?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"Add Fee Structure Details"}),a.jsxs(Ae,{children:[a.jsx("label",{className:`${s?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"Fee Type"}),a.jsx(te,{value:M,onChange:e=>R(e.target.value),fullWidth:!0,style:{marginBottom:"10px",border:`${s?"1px solid white":""}`},children:u==null?void 0:u.map((e,t)=>M==(e==null?void 0:e._id)&&a.jsx(S,{value:e==null?void 0:e._id,children:e==null?void 0:e.title},t))}),a.jsx("label",{className:`${s?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"Commission Type"}),a.jsxs(te,{value:y,onChange:e=>A(e.target.value),fullWidth:!0,style:{color:`${s?"white":"black"}`,marginBottom:"10px",border:`${s?"1px solid white":""}`},children:[a.jsx(S,{value:"fixed",sx:{color:`${s?"white":"black"}`},children:"Fixed"}),a.jsx(S,{value:"percentage",sx:{color:`${s?"white":"black"}`},children:"Percentage"})]}),a.jsx("label",{className:`${s?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"Tax Rate"}),a.jsx(se,{id:"outlined-adornment-weight","aria-describedby":"outlined-weight-helper-text",inputProps:{"aria-label":"weight"},fullWidth:!0,value:L,type:"number",sx:{border:`${s?"1px solid white":""}`},onChange:e=>N(e.target.value)}),y=="percentage"?a.jsxs(a.Fragment,{children:[a.jsx("label",{className:`${s?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"Minimum Value"}),a.jsx(se,{id:"outlined-adornment-weight","aria-describedby":"outlined-weight-helper-text",inputProps:{"aria-label":"weight"},fullWidth:!0,value:V,type:"number",sx:{border:`${s?"1px solid white":""}`},onChange:e=>F(e.target.value)})]}):null]}),a.jsxs(Ne,{children:[a.jsx(Pe,{onClick:()=>he(),children:"Save"}),a.jsx(Te,{onClick:W,children:"Close"})]})]}),H&&a.jsx(Se,{val:H,setDeleteBox:_,setDeleteConfirmation:fe})]})}export{Ta as default};
