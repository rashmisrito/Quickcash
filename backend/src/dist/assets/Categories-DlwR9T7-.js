import{R as n,c as ye,r as U,u as Ce,f as ke,j as t}from"./index-CoE2VX6x.js";import{a as x,j as f,p as ve,B as Y}from"./App-7Jvq8VZr.js";import{h as Se}from"./moment-Cl4UOzQZ.js";import{P as D}from"./index-Ci1k7pm5.js";import{$ as $e}from"./module-CxzJE1h_.js";import{d as Pe}from"./MoreVert-DH_4KxTz.js";import{T as Te,a as Be,d as J,b as K}from"./FirstPage-CV41OKBR.js";import{C as E,a as Me}from"./ColorButton-Bu0aDQ81.js";import{d as Q}from"./KeyboardArrowLeft-D-n-rEH5.js";import{d as X}from"./KeyboardArrowRight-BwY7qTnD.js";/* empty css                                  */import{s as ee}from"./styled-CaunRRC8.js";import{B as De}from"./Backdrop-CVEWDLdi.js";import{C as Ie}from"./CircularProgress-QlYG004I.js";import{B as $}from"./Box-DrvSF1jp.js";import{G as b,u as ze}from"./Grid-RwPzdMJP.js";import{T as Z}from"./TextField-DOBemltq.js";import{T as Re,a as He,b as Le}from"./TableHead-D-IsQckt.js";import{P as Ae,a as Ne}from"./Menu-D-pkvpX0.js";import{T as I}from"./TableRow-Dch-z6rh.js";import{T as y}from"./TableCell-BBG5DTn8.js";import{T as Ee}from"./TableBody--MGYg3LD.js";import{I as P}from"./IconButton-CZlcg0JC.js";import{M as w}from"./MenuItem-BW-lSX80.js";import{D as Oe,a as We}from"./DialogContent-CRrNBZcC.js";import{D as _e}from"./DialogTitle-C7wzoNZP.js";import{D as Fe}from"./DialogActions-CHOF4wDw.js";import{S as Ve}from"./Slide-cuw80ekH.js";import{B as qe}from"./Button-CAsxmj25.js";import"./html2canvas.esm-3NQT9CgR.js";import"./jspdf.es.min-Cttsr1L5.js";import"./typeof-QjJsDpFa.js";import"./createSvgIcon--VUwzkW7.js";import"./createSvgIcon-CskSDz12.js";import"./TransitionGroupContext-DihpCnG2.js";import"./isMuiElement-D9XtXNGG.js";import"./ButtonBase-DA2QyLs9.js";import"./Tablelvl2Context-RrRn-9WC.js";import"./Toolbar-NhwhGpkP.js";import"./Select-C-Fqr0jw.js";import"./utils-IyNMls5d.js";import"./FormControl-DVWaOAoF.js";import"./dividerClasses-CRl8VoYq.js";import"./listItemTextClasses-tTLZOOAe.js";import"./Typography-DO58wcCM.js";const Ge=n.forwardRef(function(r,c){return t.jsx(Ve,{direction:"up",ref:c,...r})});ee(qe)(({theme:l})=>({color:l.palette.getContrastText(ve[500]),backgroundColor:"silver","&:hover":{backgroundColor:"silver"}}));function te(l){const r=ze(),{count:c,page:d,rowsPerPage:C,onPageChange:j}=l,h=p=>{j(p,0)},z=p=>{j(p,d-1)},T=p=>{j(p,d+1)},B=p=>{j(p,Math.max(0,Math.ceil(c/C)-1))};return t.jsxs($,{sx:{flexShrink:0,ml:2.5},children:[t.jsx(P,{onClick:h,disabled:d===0,"aria-label":"first page",children:r.direction==="rtl"?t.jsx(J,{}):t.jsx(K,{})}),t.jsx(P,{onClick:z,disabled:d===0,"aria-label":"previous page",children:r.direction==="rtl"?t.jsx(X,{}):t.jsx(Q,{})}),t.jsx(P,{onClick:T,disabled:d>=Math.ceil(c/C)-1,"aria-label":"next page",children:r.direction==="rtl"?t.jsx(Q,{}):t.jsx(X,{})}),t.jsx(P,{onClick:B,disabled:d>=Math.ceil(c/C)-1,"aria-label":"last page",children:r.direction==="rtl"?t.jsx(K,{}):t.jsx(J,{})})]})}te.propTypes={count:D.number.isRequired,onPageChange:D.func.isRequired,page:D.number.isRequired,rowsPerPage:D.number.isRequired};const Ue=[{id:"date",label:"Created Date",minWidth:170},{id:"category",label:"Category",minWidth:170},{id:"product",label:"Product",minWidth:100},{id:"action",label:"Action",minWidth:120}];function Ye(l,r,c,d){return{id:l,date:r,category:c,product:d}}function Vt(){n.useRef(null);const l="api",[r,c]=n.useState(!1);$e({filename:"invoices.pdf"});const[d,C]=n.useState(!1),[j,h]=n.useState(!1),z=()=>{h(!0)},T=()=>{h(!1),G(!1),S("")};n.useState(!1);const B=ye().search;U.useEffect(()=>{const e=new URLSearchParams(B).get("payment_intent"),a=new URLSearchParams(B).get("redirect_status");e&&a&&p(e,a)},[]);const p=async(e,a)=>{c(!0),await x.post(`/${l}/v1/stripe/complete`,{transaction_id:e,status:a}).then(s=>{s.data.status==201&&(c(!1),re("/invoice-section"))}).catch(s=>{console.log(s)})},[O,k]=n.useState(null),R=!!O,[Je,ae]=n.useState(""),[W,se]=n.useState(""),[Ke,oe]=n.useState(""),[Qe,ne]=n.useState(""),[Xe,ie]=n.useState(""),le=e=>{var a=e.currentTarget.value.split("-");se(a[0]),oe(a[1]),ne(a[2]),ae(a[3]),ie(a[4]),k(e.currentTarget)},_=()=>{k(null)},re=Ce(),[i]=ke(),[H,F]=n.useState();U.useEffect(()=>{const e=f(localStorage.getItem("token"));M(e.data.id)},[]);const M=async e=>{await x.get(`/${l}/v1/category/list/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(a=>{a.data.status=="201"&&F(a.data.data)}).catch(a=>{console.log("error",a)})};let V=[];V=[H==null?void 0:H.map(e=>Ye(e._id,e.createdAt,e.name,e==null?void 0:e.productDetails))].sort((e,a)=>e.date<a.date?-1:1);const g=V[0]||[],[L,q]=n.useState(0),[v,ce]=n.useState(5),de=(e,a)=>{console.log(e),q(a)},pe=e=>{ce(parseInt(e.target.value,10)),q(0)},m=(e,a)=>{a=="error"?Y.error(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):Y.success(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})};n.useState(""),n.useState("");const ge=async e=>{var s;const a=f(localStorage.getItem("token"));await x.get(`/${l}/v1/category/list/${(s=a==null?void 0:a.data)==null?void 0:s.id}?title=${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(o=>{o.data.status=="201"&&(F(o.data.data),C(!1))}).catch(o=>{console.log("error",o)})},he=e=>{k(null),me(e),setTimeout(()=>{h(!0)},100)},[A,G]=n.useState(""),me=async e=>{await x.get(`/${l}/v1/category/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(a=>{var s,o;a.data.status==201&&(G(e),S((o=(s=a==null?void 0:a.data)==null?void 0:s.data)==null?void 0:o.name))}).catch(a=>{var s,o;m((o=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:o.message,"error"),console.log("error",a)})},ue=async()=>{var a;const e=f(localStorage.getItem("token"));await x.patch(`/${l}/v1/category/update/${A}`,{user_id:(a=e==null?void 0:e.data)==null?void 0:a.id,name:N},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(s=>{if(s.data.status=="201"){m("Catgegory data has been updated successfully","success"),k(null),h(!1),S("");const o=f(localStorage.getItem("token"));M(o.data.id)}}).catch(s=>{console.log("error",s),m(s.response.data.message,"error")})},xe=async e=>{var a=confirm("Are you sure?");if(a==!0)await x.delete(`/${l}/v1/category/delete/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(s=>{if(s.data.status=="201"){const o=f(localStorage.getItem("token"));k(null),M(o.data.id),m("Selected Category has been deleted Successfully","success")}}).catch(s=>{var o,u;console.log("error",s),m((u=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:u.message,"error")});else return!1},fe=ee("div")(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"right",height:"100%","& .ant-empty-img-1":{fill:e.palette.mode==="light"?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:e.palette.mode==="light"?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:e.palette.mode==="light"?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:e.palette.mode==="light"?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:e.palette.mode==="light"?"0.8":"0.08",fill:e.palette.mode==="light"?"#f5f5f5":"#fff"}}));function je(){return t.jsxs(fe,{children:[t.jsx("svg",{width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:t.jsxs("g",{fill:"none",fillRule:"evenodd",children:[t.jsxs("g",{transform:"translate(24 31.67)",children:[t.jsx("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),t.jsx("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),t.jsx("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),t.jsx("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),t.jsx("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),t.jsxs("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[t.jsx("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),t.jsx("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),t.jsx($,{sx:{mt:1},children:"No Data found"})]})}const[N,S]=n.useState(""),be=async()=>{var a;const e=f(localStorage.getItem("token"));await x.post(`/${l}/v1/category/add`,{name:N,user:(a=e==null?void 0:e.data)==null?void 0:a.id},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(s=>{var o;if(s.data.status=="201"){h(!1),S(""),m((o=s==null?void 0:s.data)==null?void 0:o.message,"Success");const u=f(localStorage.getItem("token"));M(u.data.id)}}).catch(s=>{var o,u;m((u=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:u.message,"error"),console.log("error",s)})};return t.jsxs(t.Fragment,{children:[t.jsx(De,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:r,onClick:_,children:t.jsx(Ie,{color:"inherit"})}),t.jsx($,{sx:{marginTop:{xs:"-10px",md:"12px"},fontSize:"15px"},children:t.jsx(b,{sx:{display:"flex",flexDirection:"column",gap:"1px",borderRadius:".5rem",color:"black",fontWeight:"700",background:{xs:`${i?"#183153":"white"}`,sm:`${i?"":"white"}`},border:{xs:`${i?"1px solid white":"white"}`,sm:`${i?"1px solid white":"white"}`},padding:"3px"},children:t.jsx($,{sx:{overflow:"auto"},children:t.jsxs($,{sx:{width:"100%",display:"table",tableLayout:"fixed"},children:[t.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",margin:"1%"},children:[t.jsx(b,{children:t.jsx(Z,{onChange:e=>ge(e.target.value),placeholder:"Search",sx:{border:`${i?"1px solid silver":"black"}`,width:"190px"}})}),t.jsx(b,{sx:{display:"flex",justifyContent:"flex-end"},children:t.jsx(E,{sx:{marginBottom:" 12px",padding:"15px"},onClick:z,children:"+"})})]}),t.jsx(Re,{component:Ae,children:t.jsxs(He,{"aria-label":"custom pagination table",children:[t.jsx(Le,{children:t.jsx(I,{className:`${i?"avatarDark":"avatarLight"}`,children:Ue.map(e=>t.jsx(y,{width:"600",style:{padding:"12px",background:"#8657E5",color:"white"},children:e.label},e.id))})}),t.jsxs(Ee,{children:[(v>0?g==null?void 0:g.slice(L*v,L*v+v):g).map(e=>{var a;return t.jsxs(I,{children:[t.jsx(y,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:Se(e==null?void 0:e.date).format("DD-MM-YYYY")}),t.jsx(y,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:e==null?void 0:e.category}),t.jsx(y,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:t.jsx("span",{style:{background:"#6571ff",color:"white",padding:"10px",borderRadius:"10px"},children:(a=e==null?void 0:e.product)==null?void 0:a.length})}),t.jsx(y,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:t.jsx(b,{sx:{display:"flex",flexDirection:"row",justifyContent:"normal"},children:t.jsxs(b,{children:[t.jsx(P,{"aria-label":"more",value:`${e==null?void 0:e.id}-${e==null?void 0:e.status}-${e==null?void 0:e.recurring}-${e==null?void 0:e.invoice_number}-${e==null?void 0:e.createdBy}`,id:`long-button${e==null?void 0:e.id}`,"aria-controls":R?`long-menu${e==null?void 0:e.id}`:void 0,"aria-expanded":R?"true":void 0,"aria-haspopup":"true",onClick:le,sx:{color:`${i?"white":"black"}`},children:t.jsx(Pe,{})}),t.jsxs(Ne,{id:`long-menu${e==null?void 0:e.id}`,MenuListProps:{"aria-labelledby":`long-button${e==null?void 0:e.id}`},anchorEl:O,open:R,onClose:_,children:[t.jsx(w,{onClick:()=>he(W),children:t.jsx("span",{className:`${i?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"Edit"})}),t.jsx(w,{onClick:()=>xe(W),children:t.jsx("span",{className:`${i?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"Delete"})})]},e==null?void 0:e.id)]})})})]},e==null?void 0:e.date)}),(g==null?void 0:g.length)==0&&t.jsx(I,{children:t.jsx(y,{colSpan:7,children:t.jsx(je,{})})})]}),t.jsx(Te,{sx:{background:`${i?"white":""}`},children:t.jsx(I,{children:t.jsx(Be,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:7,count:g.length,rowsPerPage:v,page:L,slotProps:{select:{inputProps:{"aria-label":"rows per page"},native:!0}},sx:{color:"black"},onPageChange:de,onRowsPerPageChange:pe,ActionsComponent:te})})})]})})]})})})}),t.jsxs(Oe,{maxWidth:"sm",fullWidth:!0,open:j,TransitionComponent:Ge,keepMounted:!0,onClose:T,"aria-describedby":"alert-dialog-slide-description",children:[t.jsx(_e,{sx:{color:`${i?"white":"black"}`},children:A?"Edit Category Form":"Add Category Form"}),t.jsxs(We,{children:[t.jsxs("label",{style:{color:`${i?"white":"black"}`},children:["Name: ",t.jsx("span",{style:{color:"red",fontWeight:"900"},children:"*"})]}),t.jsx(Z,{onChange:e=>S(e.target.value),value:N,sx:{border:`${i?"1px solid white":"black"}`,background:`${i?"":"white"}`},fullWidth:!0})]}),t.jsxs(Fe,{children:[A?t.jsx(E,{onClick:ue,children:"Update"}):t.jsx(E,{onClick:be,children:"Save"}),t.jsx(Me,{onClick:T,children:"Cancel"})]})]})]})}export{Vt as default};
