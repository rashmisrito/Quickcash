import{j as e,u as ge,f as je,r as o}from"./index-BupViSio.js";import{i as ye,j as D,a as b,B as O}from"./App-DPd8oDNy.js";import{O as ve}from"./index-BDk4EkgF.js";import{d as Ce}from"./Add-DJ2mjk1f.js";import{d as be}from"./Info-CVbK3x0Z.js";import{u as ke}from"./useAccount-BaAAAVHd.js";import{R as Se}from"./react-country-flag.esm-DwAZ8N3p.js";import{r as Ne}from"./createSvgIcon-B4_0CFOw.js";import{u as $e}from"./useValidation-BFtkzuDM.js";/* empty css                        */import{C as g}from"./ColorButton-BSaJbGxa.js";import{B as E}from"./Box-C145hu5M.js";import{G as t}from"./Grid-B1t4UKB3.js";import{T as De}from"./Tooltip-D_uAeD5l.js";import{D as P,a as _}from"./DialogContent-CA-gSf7a.js";import{D as A}from"./DialogTitle-2aI1i2q0.js";import{D as W}from"./DialogContentText-LmoFygTp.js";import{C as R}from"./CardContent-CIowSveT.js";import{S as L}from"./Stack-BYlHm6FU.js";import{T as we,F as ze}from"./TextField-JtUyMF_l.js";import{S as Be}from"./Select-CUzNhoH_.js";import{M as Fe}from"./MenuItem-BNC-7Aqm.js";import{F as Ie}from"./FormControl-CggpVb1O.js";import{s as Me}from"./styled-BsT2Uje-.js";import"./createSvgIcon-c6Q7LSIT.js";import"./TransitionGroupContext-HDmFy-NO.js";import"./isMuiElement-DCOEWuFR.js";import"./ButtonBase-Cnw-KpJ1.js";import"./Button-CXQLG-lr.js";import"./Menu-DvW-7bCh.js";import"./Backdrop-DtEZozg_.js";import"./utils-4tjU1hxM.js";import"./Popper-ScrkzYlT.js";import"./Popper-BNrCUNgO.js";import"./Typography-C-05GYiH.js";import"./styled-DbqmzKIc.js";import"./createStyled-CGgeouwa.js";import"./dividerClasses-MzOsTcy_.js";import"./listItemTextClasses-o44NHM8x.js";var w={},Te=ye;Object.defineProperty(w,"__esModule",{value:!0});var G=w.default=void 0,Ve=Te(Ne()),He=e;G=w.default=(0,Ve.default)((0,He.jsx)("path",{d:"M14.59 7.41 18.17 11H6v2h12.17l-3.59 3.59L16 18l6-6-6-6zM2 6v12h2V6z"}),"Start");const Oe=Me("div")(({theme:p})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"right",height:"100%","& .ant-empty-img-1":{fill:p.palette.mode==="light"?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:p.palette.mode==="light"?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:p.palette.mode==="light"?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:p.palette.mode==="light"?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:p.palette.mode==="light"?"0.8":"0.08",fill:p.palette.mode==="light"?"#f5f5f5":"#fff"}}));function Pe(){return e.jsxs(Oe,{children:[e.jsx("svg",{width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:e.jsxs("g",{fill:"none",fillRule:"evenodd",children:[e.jsxs("g",{transform:"translate(24 31.67)",children:[e.jsx("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),e.jsx("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),e.jsx("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),e.jsx("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),e.jsx("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),e.jsxs("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[e.jsx("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),e.jsx("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),e.jsx(E,{sx:{mt:1},children:"No Data found"})]})}function Sa(){var H;const p=ge(),{errors:u,validate:x}=$e(),[l]=je(),[q,k]=o.useState(!1),[X,S]=o.useState(!1),y="api",[U,z]=o.useState(!0),[v,J]=o.useState(""),[K,Q]=o.useState(""),[d,Y]=o.useState([]),[Z,ee]=o.useState(""),[N,ae]=o.useState(!1),[C,B]=o.useState(!1),[n,j]=o.useState({number:"",expiry:"",cvc:"",name:"",focus:""});function F(a){const r=a.split("");let s="";return r.forEach((c,i)=>{i==4||i==5||i==6||i>8||i==9?s+="*":s+=c}),s}const $=D(localStorage.getItem("token")),{list:h}=ke((H=$==null?void 0:$.data)==null?void 0:H.id),re=a=>{const{name:r,value:s}=a.target;if(r=="expiry"){const c=se(s);j(i=>({...i,[r]:c}))}else j(c=>({...c,[r]:s}))};function te(a=""){return a.replace(/\D+/g,"")}function se(a){const r=te(a);return r.length>=3?`${r.slice(0,2)}/${r.slice(2,4)}`:r}const ne=()=>{k(!0)},I=()=>{k(!1),j({number:"",expiry:"",cvc:"",name:"",focus:""})},oe=a=>{j(r=>({...r,focus:a.target.name}))},M=a=>{const{name:r,value:s}=a.target,c=x(r,s);console.log(c)},le=()=>{if(!x("name",n.name)&&!x("currency",v)){var a=Math.floor(Math.random()*1e16);z(!1),j({name:n==null?void 0:n.name,number:a,cvc:"123",expiry:"12/30"})}else x("name",n.name)&&x("name",n.name),x("currency",v)&&x("currency",v)},[m,ce]=o.useState(),f=(a,r)=>{r=="error"?O.error(a,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):O.success(a,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})};o.useEffect(()=>{V()},[]);const ie=a=>{S(!0),pe(a)},T=()=>{S(!1)},V=async()=>{var r;const a=D(localStorage.getItem("token"));await b.get(`/${y}/v1/card/list/${(r=a==null?void 0:a.data)==null?void 0:r.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(s=>{s.data.status=="201"&&ce(s.data.data)}).catch(s=>{console.log("error",s),s.response.data.status==403?(localStorage.clear(),p("/")):f(s.response.data.message,"error")})},de=async a=>{var c;var r="";`${n==null?void 0:n.number}`.length<16?r=r+"0":r=n==null?void 0:n.number;const s=D(localStorage.getItem("token"));a.preventDefault(),await b.post(`/${y}/v1/card/add`,{name:n.name,user:(c=s==null?void 0:s.data)==null?void 0:c.id,cardnumber:r,expiry:n.expiry,cvv:n.cvc,account:K,currency:v},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(i=>{i.data.status=="201"&&(f(i.data.message,"success"),V(),k(!1))}).catch(i=>{console.log("error",i),z(!0),f(i.response.data.message,"error")})},pe=async a=>{await b.get(`/${y}/v1/card/${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(r=>{var s,c;((s=r==null?void 0:r.data)==null?void 0:s.status)=="201"&&Y((c=r==null?void 0:r.data)==null?void 0:c.data)}).catch(r=>{console.log("error",r),r.response.data.status==403?(localStorage.clear(),p("/")):f(r.response.data.message,"error")})},xe=a=>{ae(a)},[ue,he]=o.useState(""),me=a=>{he(a);const r=a.split("-");Q(r[0]),J(r[1])},fe=async a=>{await b.patch(`/${y}/v1/card/change-pin`,{pin:Z,cardId:a},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(r=>{r.data.status=="201"&&(f("Card Pin has been updated Successfully","Success"),S(!1))}).catch(r=>{console.log("error",r),f(r.response.data.message,"error")})};return e.jsxs(e.Fragment,{children:[e.jsx(E,{sx:{marginTop:{xs:"-12px",md:"12px"},fontSize:"15px"},children:e.jsx(t,{sx:{display:"flex",flexDirection:"column",gap:"10px"},children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:"20px",height:"auto",borderRadius:".5rem",color:"black",fontWeight:"700",border:`${l?"2px solid lightblue":"white"}`,background:`${l?"transparent":"white"}`,padding:"10px 12px"},children:[e.jsxs(t,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:"20px"},children:[e.jsx(g,{variant:"contained",onClick:ne,startIcon:e.jsx(Ce,{}),children:"Add Card"}),e.jsx(g,{variant:"contained",onClick:()=>p("/cards-list"),startIcon:e.jsx(G,{}),children:"Action"})]}),e.jsxs(t,{container:!0,sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"center"},className:`${l?"avatarDark":"avatarLight"}`,children:[m==null?void 0:m.map((a,r)=>e.jsx(o.Fragment,{children:e.jsx(t,{item:!0,xs:12,sm:6,md:8,lg:4,margin:1,children:e.jsx(De,{title:`Click over card to view ${C&&C==(a==null?void 0:a.cardNumber)?"front side":"back side"}`,placement:"top-start",arrow:!0,children:e.jsx("div",{className:"card-container",children:e.jsxs("div",{className:`card-vertical ${C&&C==(a==null?void 0:a.cardNumber)?"card-verticalflip":""}`,children:[e.jsxs("div",{className:"card-front",children:[e.jsx(t,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},onClick:()=>xe(a==null?void 0:a.cardNumber),children:e.jsx(be,{sx:{fontSize:"19px",cursor:"pointer",color:"white"}})}),e.jsxs("article",{className:"card-front-content",style:{cursor:"pointer"},onClick:()=>B(a==null?void 0:a.cardNumber),children:[e.jsxs(t,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:"-16px"},children:[e.jsx(t,{children:e.jsx("img",{src:"https://quickcash.oyefin.com/icons/chip.png"})}),e.jsx(t,{sx:{fontSize:"19px"},children:e.jsx(Se,{countryCode:a==null?void 0:a.currency.substring(0,2),svg:!0,style:{width:"2em",height:"2em",borderRadius:"50%"},cdnUrl:"https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.4.3/flags/1x1/",cdnSuffix:"svg",title:h==null?void 0:h.country})})]}),e.jsx(t,{sx:{fontSize:{xs:"16px",md:"23px"},marginTop:"10px",fontFamily:'"Consolas", "Courier", monospace',marginBottom:"10px",display:"flex",flexDirection:"row"},children:N?N==a.cardNumber?N.replace(/\W/gi,"").replace(/(.{4})/g,"$1 "):F(a.cardNumber.replace(/\W/gi,"").replace(/(.{4})/g,"$1 ")):F(a.cardNumber.replace(/\W/gi,"").replace(/(.{4})/g,"$1 "))}),e.jsxs(t,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[e.jsx(t,{children:a==null?void 0:a.name}),e.jsxs(t,{sx:{display:"flex",flexDirection:"column",justifyContent:"normal",gap:"10px"},children:[e.jsx(t,{sx:{fontSize:{xs:"12px",md:"16px"},marginTop:"-12px"},children:"valid thru"}),e.jsx(t,{sx:{fontSize:{xs:"12px",md:"16px"},marginTop:"-26px"},children:a==null?void 0:a.expiry})]})]})]})]}),e.jsxs("div",{className:"card-back",style:{cursor:"pointer"},onClick:()=>B("back"),children:[e.jsx(t,{sx:{background:"black",height:"36px",marginTop:"20px"}}),e.jsxs(t,{className:"rccs__signature",children:[e.jsx(t,{sx:{color:"black",display:"flex",padding:"6px",flexDirection:"row",justifyContent:"flex-end"},children:a==null?void 0:a.cvv}),e.jsx(t,{sx:{display:"flex",flexDirection:"column",gap:"5px",marginTop:"12px"},children:e.jsx(t,{children:e.jsx(g,{onClick:()=>ie(a==null?void 0:a._id),children:"Set Pin"})})})]})]})]})})})},r)},r)),(m==null?void 0:m.length)==0&&e.jsx(e.Fragment,{children:e.jsx(Pe,{})})]})]})})}),e.jsxs(P,{open:q,onClose:I,children:[e.jsx(A,{children:e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(t,{className:`${l?"avatarDark":"avatarLight"}`,children:"Card"}),e.jsx(t,{sx:{cursor:"pointer"},className:`${l?"avatarDark":"avatarLight"}`,onClick:I,children:"X"})]})}),e.jsxs(_,{sx:{background:`${l?"":"white"}`},children:[e.jsx(W,{sx:{marginBottom:"10px"},children:e.jsx("p",{style:{color:`${l?"white":"black"}`},children:"Add card details here in order to save your card"})}),e.jsxs(R,{component:L,spacing:3,sx:{height:"auto",justifyContent:"center",padding:0},children:[e.jsx(ve,{number:n.number,expiry:n.expiry,cvc:n.cvc,name:n.name}),e.jsxs(t,{container:!0,children:[e.jsxs(t,{item:!0,xs:12,children:[e.jsx("label",{children:"Name"}),e.jsx(we,{fullWidth:!0,name:"name",type:"text",size:"medium",value:n.name,onChange:re,onFocus:oe,onBlur:M,error:!!u.name,helperText:u.name,sx:{border:`${l?"1px solid silver":""}`}})]}),e.jsxs(t,{item:!0,xs:12,children:[e.jsx("label",{htmlFor:"Currency",children:"Currency"}),e.jsx(Be,{value:ue,name:"currency",onBlur:M,error:!!u.currency,onChange:a=>me(a.target.value),sx:{border:`${l?"1px solid silver":""}`,color:`${l?"white":"black"}`},fullWidth:!0,children:h==null?void 0:h.map((a,r)=>e.jsx(Fe,{sx:{color:`${l?"white":"black"}`},value:`${a==null?void 0:a._id}-${a==null?void 0:a.currency}`,children:a==null?void 0:a.currency},r))}),e.jsx(Ie,{fullWidth:!0,error:!!u.currency,children:u.currency&&e.jsx(ze,{children:u.currency})})]})]}),U?e.jsx(g,{size:"large",sx:{fontWeight:"bold"},onClick:()=>le(),children:"Generate"}):e.jsx(g,{size:"large",sx:{fontWeight:"bold"},onClick:a=>de(a),children:"Submit"})]})]})]}),e.jsxs(P,{fullWidth:!0,open:X,onClose:T,children:[e.jsx(A,{children:e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(t,{className:`${l?"avatarDark":"avatarLight"}`,children:"Set Pin"}),e.jsx(t,{sx:{cursor:"pointer"},onClick:T,children:"X"})]})}),e.jsxs(_,{sx:{background:"white"},children:[e.jsx(W,{sx:{marginBottom:"10px"}}),e.jsxs(R,{component:L,spacing:2,sx:{height:"auto",color:"black",justifyContent:"center",padding:0},children:[e.jsxs("label",{htmlFor:"Card Name",children:["Card Name : ",d==null?void 0:d.name]}),e.jsxs("label",{htmlFor:"Card Number",children:["Card Number : ",d==null?void 0:d.cardNumber]}),e.jsxs("label",{htmlFor:"Old Pin",children:["Old PIN : ",d==null?void 0:d.pin]}),e.jsx("label",{htmlFor:"PIN",children:"PIN"}),e.jsx("input",{style:{width:"100%",height:"40px",border:"1px solid silver"},id:"cvv",type:"number",onInput:a=>{ee(a.target.value=Math.max(0,parseInt(a.target.value)).toString().slice(0,3))}}),e.jsx(g,{onClick:()=>fe(d==null?void 0:d._id),children:"Submit"})]})]})]})]})}export{Sa as default};
