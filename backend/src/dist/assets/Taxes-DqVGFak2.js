import{u as Q,f as U,R as x,r as X,j as a}from"./index-BupViSio.js";import{j as k,a as I,p as Z,B as R}from"./App-DPd8oDNy.js";import{h as w}from"./moment-Cl4UOzQZ.js";import{P}from"./index-CZIhv1cI.js";import{d as ee}from"./Edit-Cg1NOBjd.js";import{d as ae}from"./Delete-DYDSn5-8.js";import{T as te,a as se,d as z,b as A}from"./FirstPage-DafKzz44.js";import{d as le}from"./MoreVert-DQaXlb9L.js";import{d as N}from"./KeyboardArrowLeft-DJUTOiq8.js";import{d as H}from"./KeyboardArrowRight-DM_Btd75.js";import{s as V}from"./styled-BsT2Uje-.js";import{B as f}from"./Box-C145hu5M.js";import{G as ie,u as ne}from"./Grid-B1t4UKB3.js";import{T as oe}from"./Typography-C-05GYiH.js";import{T as re,a as ce,b as de}from"./TableHead-DBhOuWRv.js";import{P as me,a as he}from"./Menu-DvW-7bCh.js";import{T as $}from"./TableRow-BuTu7wTS.js";import{T as m}from"./TableCell-D4qT0LE-.js";import{T as pe}from"./TableBody-BnpjdO8Z.js";import{S as ue}from"./Switch-D0FrrYCt.js";import{I as j}from"./IconButton-D5JlACbC.js";import{M as L}from"./MenuItem-BNC-7Aqm.js";import{B as ge}from"./Button-CXQLG-lr.js";import"./createSvgIcon-B4_0CFOw.js";import"./createSvgIcon-c6Q7LSIT.js";import"./TransitionGroupContext-HDmFy-NO.js";import"./isMuiElement-DCOEWuFR.js";import"./ButtonBase-Cnw-KpJ1.js";import"./Tablelvl2Context-DXCjwM50.js";import"./Toolbar-UV7IiOHB.js";import"./Select-CUzNhoH_.js";import"./Backdrop-DtEZozg_.js";import"./utils-4tjU1hxM.js";import"./SwitchBase-wpRYB9-y.js";import"./index-a_FsHuo7.js";import"./dividerClasses-MzOsTcy_.js";import"./listItemTextClasses-o44NHM8x.js";const xe=V(ge)(({theme:o})=>({color:o.palette.getContrastText(Z[500]),backgroundColor:"#2196f3","&:hover":{backgroundColor:"#2196f3"}}));function O(o){const i=ne(),{count:s,page:l,rowsPerPage:c,onPageChange:h}=o,T=n=>{h(n,0)},b=n=>{h(n,l-1)},y=n=>{h(n,l+1)},p=n=>{h(n,Math.max(0,Math.ceil(s/c)-1))};return a.jsxs(f,{sx:{flexShrink:0,ml:2.5},children:[a.jsx(j,{onClick:T,disabled:l===0,"aria-label":"first page",children:i.direction==="rtl"?a.jsx(z,{}):a.jsx(A,{})}),a.jsx(j,{onClick:b,disabled:l===0,"aria-label":"previous page",children:i.direction==="rtl"?a.jsx(H,{}):a.jsx(N,{})}),a.jsx(j,{onClick:y,disabled:l>=Math.ceil(s/c)-1,"aria-label":"next page",children:i.direction==="rtl"?a.jsx(N,{}):a.jsx(H,{})}),a.jsx(j,{onClick:p,disabled:l>=Math.ceil(s/c)-1,"aria-label":"last page",children:i.direction==="rtl"?a.jsx(A,{}):a.jsx(z,{})})]})}O.propTypes={count:P.number.isRequired,onPageChange:P.func.isRequired,page:P.number.isRequired,rowsPerPage:P.number.isRequired};const fe=[{id:"date",label:"Date",minWidth:170},{id:"name",label:"Name",minWidth:100},{id:"value",label:"Value",minWidth:100},{id:"default",label:"Default",minWidth:100},{id:"action",label:"Action",minWidth:120}];function je(o,i,s,l,c){return{id:o,date:i,name:s,value:l,IsDefault:c}}function ta(){const o=Q(),i="api",[s]=U(),[l,c]=x.useState(),[h,T]=x.useState(""),[b,y]=x.useState(null),p=!!b,n=e=>{var t=e.currentTarget.value.split("-");T(t[0]),y(e.currentTarget)},W=()=>{y(null)},_=async e=>{var d,C;const t=k(localStorage.getItem("token"));await I.patch(`/${i}/v1/tax/update/${(d=e==null?void 0:e.target)==null?void 0:d.value}`,{user:(C=t==null?void 0:t.data)==null?void 0:C.id,isDefault:e.target.checked==!0?"yes":"no"},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(g=>{if(g.data.status=="201"){v(g.data.message,"success");const K=k(localStorage.getItem("token"));S(K.data.id)}}).catch(g=>{console.log("error",g),v(g.response.data.message,"error")})};X.useEffect(()=>{const e=k(localStorage.getItem("token"));S(e.data.id)},[]);const S=async e=>{await I.get(`/${i}/v1/tax/list/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(t=>{t.data.status=="201"&&c(t.data.data)}).catch(t=>{console.log("error",t)})};let M=[];M=[l==null?void 0:l.map(e=>je(e._id,e.createdAt,e.Name,e.taxvalue,e.IsDefault))].sort((e,t)=>e.date<t.date?-1:1);const r=M[0]||[],[B,D]=x.useState(0),[u,E]=x.useState(5),q=e=>{D(e)},v=(e,t)=>{t=="error"?R.error(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):R.success(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},Y=e=>{E(parseInt(e.target.value,10)),D(0)},F=async e=>{var t=confirm("Are you sure?");if(t==!0)await I.delete(`/${i}/v1/tax/delete/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(d=>{if(d.data.status=="201"){const C=k(localStorage.getItem("token"));S(C.data.id),v("Selected tax deltails has been deleted Successfully","success")}}).catch(d=>{console.log("error",d),v(d.response.data.message,"error")});else return!1},G=V("div")(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"right",height:"100%","& .ant-empty-img-1":{fill:e.palette.mode==="light"?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:e.palette.mode==="light"?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:e.palette.mode==="light"?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:e.palette.mode==="light"?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:e.palette.mode==="light"?"0.8":"0.08",fill:e.palette.mode==="light"?"#f5f5f5":"#fff"}}));function J(){return a.jsxs(G,{children:[a.jsx("svg",{width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:a.jsxs("g",{fill:"none",fillRule:"evenodd",children:[a.jsxs("g",{transform:"translate(24 31.67)",children:[a.jsx("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),a.jsx("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),a.jsx("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),a.jsx("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),a.jsx("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),a.jsxs("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[a.jsx("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),a.jsx("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),a.jsx(f,{sx:{mt:1},children:"No Data found"})]})}return a.jsx(a.Fragment,{children:a.jsx(f,{sx:{fontSize:"15px"},children:a.jsxs(ie,{sx:{display:"flex",flexDirection:"column",gap:"20px",borderRadius:".5rem",color:"black",fontWeight:"700",background:{xs:`${s?"#183153":"white"}`,sm:`${s?"":"white"}`},border:{xs:`${s?"1px solid white":"white"}`,sm:`${s?"1px solid white":"white"}`},padding:"1px 1px"},children:[a.jsx(oe,{children:a.jsx(xe,{onClick:()=>o("/invoices/add-tax"),children:"Add Tax"})}),a.jsx(f,{sx:{overflow:"auto"},children:a.jsx(f,{sx:{width:"100%",display:"table",tableLayout:"fixed"},children:a.jsx(re,{component:me,children:a.jsxs(ce,{sx:{minWidth:500},"aria-label":"custom pagination table",children:[a.jsx(de,{children:a.jsx($,{className:`${s?"avatarDark":"avatarLight"}`,children:fe.map(e=>a.jsx(m,{style:{minWidth:e.minWidth},children:e.label},e.id))})}),a.jsxs(pe,{children:[(u>0?r==null?void 0:r.slice(B*u,B*u+u):r).map(e=>a.jsxs($,{children:[a.jsx(m,{component:"th",scope:"row",children:w(e==null?void 0:e.date).format("MMMM Do YYYY, h:mm:ss A")}),a.jsx(m,{style:{width:50},component:"th",scope:"row",children:e==null?void 0:e.name}),a.jsx(m,{style:{width:160},component:"th",scope:"row",children:e==null?void 0:e.value}),a.jsx(m,{style:{width:160},component:"th",scope:"row",children:a.jsx(ue,{checked:(e==null?void 0:e.IsDefault)=="yes",value:e==null?void 0:e.id,onChange:_,color:"warning",inputProps:{"aria-label":"controlled"}})}),a.jsxs(m,{component:"th",scope:"row",children:[a.jsx(j,{"aria-label":"more",value:`${e==null?void 0:e.id}-${e==null?void 0:e.status}-${e==null?void 0:e.recurring}-${e==null?void 0:e.invoice_number}`,id:`long-button${e==null?void 0:e.id}`,"aria-controls":p?`long-menu${e==null?void 0:e.id}`:void 0,"aria-expanded":p?"true":void 0,"aria-haspopup":"true",sx:{color:`${s?"white":"black"}`},onClick:n,children:a.jsx(le,{})}),a.jsxs(he,{id:`long-menu${e==null?void 0:e.id}`,MenuListProps:{"aria-labelledby":`long-button${e==null?void 0:e.id}`},anchorEl:b,open:p,onClose:W,children:[a.jsx(L,{children:a.jsx("span",{className:`${s?"avatarDarkSecondaryExtra":"avatarLight"}`,children:a.jsx(ee,{sx:{cursor:"pointer"},onClick:()=>o(`/invoices/edit-tax/${h}`)})})}),a.jsx(L,{children:a.jsx("span",{className:`${s?"avatarDarkSecondaryExtra":"avatarLight"}`,children:a.jsx(ae,{sx:{cursor:"pointer"},onClick:()=>F(e==null?void 0:e.id)})})})]},e==null?void 0:e.id)]})]},e==null?void 0:e.date)),(r==null?void 0:r.length)==0&&a.jsx($,{style:{height:53*r},children:a.jsx(m,{colSpan:7,children:a.jsx(J,{})})})]}),a.jsx(te,{sx:{background:`${s?"white":""}`},children:a.jsx($,{children:a.jsx(se,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:7,count:M.length,rowsPerPage:u,page:B,slotProps:{select:{inputProps:{"aria-label":"rows per page"},native:!0}},sx:{color:"black"},onPageChange:q,onRowsPerPageChange:Y,ActionsComponent:O})})})]})})})})]})})})}export{ta as default};
