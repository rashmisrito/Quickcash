import{k as O,u as $,r as s,f as I,j as e}from"./index-D-Z3PEJc.js";import{j as W,a as R,B as D}from"./App-C5vhFMem.js";import{h as E}from"./moment-Cl4UOzQZ.js";import{S as q}from"./react-select.esm-G3pP4oVf.js";import{C as F}from"./ColorButton-NPYyAwOA.js";import{d as H}from"./KeyboardBackspace-CmaCv-u4.js";import{d as z}from"./DoneOutlineOutlined-CWexy3FU.js";import{B as T}from"./Box-DCyzdUAE.js";import{T as U}from"./Toolbar-BVWD1vu2.js";import{T as G}from"./Typography-XE6xpzxH.js";import{G as r}from"./Grid-Bu6buGuE.js";import{T as i}from"./TextField-RtVheVmu.js";import"./defineProperty-DJACW-dl.js";import"./typeof-QjJsDpFa.js";import"./TransitionGroupContext-PLEewXdM.js";import"./ButtonBase-DppN0Hkz.js";import"./styled-ibrWRFOc.js";import"./Button-paA1xTrW.js";import"./createSvgIcon-B8UspgM4.js";import"./createSvgIcon-CLxdQzf4.js";import"./isMuiElement-CB7WGySX.js";import"./FormControl-Bhzdesby.js";import"./Select-EloRlcax.js";import"./Menu-BTdQhGPK.js";import"./Backdrop-r2QkIdSB.js";import"./utils-CzilLcR2.js";function ve(){const l=O(),n=$(),[m,d]=s.useState(""),[k]=I(),[w,_]=s.useState(),[u,c]=s.useState(""),[p,x]=s.useState(""),[h,b]=s.useState(""),[f,g]=s.useState(""),[j,v]=s.useState(""),[C,A]=s.useState([]),S="api",P=W(localStorage.getItem("token"));s.useEffect(()=>{B(l.id)},[l.id]);const B=async t=>{await R.get(`/${S}/v1/member/details/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(a=>{a.data.status=="201"&&(g(a.data.data[0].username),c(a.data.data[0].mobile),d(a.data.data[0].email),v(a.data.data[0].date_from),x(a.data.data[0].date_to),b(a.data.data[0].comment),A(a.data.data[0].permissionlist))}).catch(a=>{console.log("error",a)})},N=[{value:"cards",label:"CARDS"},{value:"payments",label:"PAYMENTS"},{value:"members",label:"MEMBERS"},{value:"statements",label:"STATEMENTS"},{value:"profile",label:"PROFILE"}],y=()=>{let t=[];if(C.length>0)return C.map(a=>{t.push({value:a,label:a.toUpperCase()})}),t},Y=t=>{_(Array.isArray(t)?t.map(a=>a.value):[])},L=async t=>{var a;t.preventDefault(),await R.patch(`/${S}/v1/member/update`,{username:f.replace(" ",""),user:(a=P.data)==null?void 0:a.id,member_id:l.id,mobile:u,email:m,date_from:j,date_to:p,comment:h,permissionlist:w},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(o=>{o.data.status=="201"&&(M(o.data.message,"success"),n("/members"))}).catch(o=>{console.log("error",o),M(o.response.data.message,"error")})},M=(t,a)=>{a=="error"?D.error(t,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):D.success(t,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})};return e.jsxs(e.Fragment,{children:[e.jsx(T,{sx:{marginTop:"0%",borderRadius:".5rem",marginLeft:{md:"7%"},width:{xs:"100%",md:"87%"}},children:e.jsx(H,{className:`${k?"avatarDark":"avatarLight"}`,onClick:()=>n("/members"),sx:{cursor:"pointer"}})}),e.jsx(U,{sx:{display:"flex",flexDirection:"column",borderRadius:".5rem",p:"10px",marginLeft:{md:"7%"},background:"white",width:{lg:"80%"}},children:e.jsxs(T,{sx:{marginTop:"0%",borderRadius:".5rem",width:{xs:"100%",md:"87%"}},children:[e.jsx(G,{variant:"h6",gutterBottom:!0,children:"Edit Member"}),e.jsxs(r,{container:!0,spacing:3,children:[e.jsxs(r,{item:!0,xs:12,sm:6,children:[e.jsx("label",{children:"UserName"}),e.jsx(i,{required:!0,id:"accountname",name:"accountname",value:f,onChange:t=>g(t.target.value),fullWidth:!0,sx:{border:"1px solid silver",borderRadius:"9px"}})]}),e.jsxs(r,{item:!0,xs:12,sm:6,sx:{position:"relative",zIndex:"1000"},children:[e.jsx("label",{children:"Permissions"}),y()&&e.jsx(q,{options:N,name:"name",id:"name",isMulti:!0,classNamePrefix:"select",defaultValue:y(),onChange:t=>Y(t),className:"permission__Select",placeholder:"Choose permission"})]}),e.jsxs(r,{item:!0,xs:12,sm:6,children:[e.jsx("label",{children:"Phone Number"}),e.jsx(i,{required:!0,id:"mobile",name:"mobile",fullWidth:!0,value:u,onChange:t=>c(t.target.value),sx:{border:"1px solid silver",borderRadius:"9px"}})]}),e.jsxs(r,{item:!0,xs:12,sm:6,children:[e.jsx("label",{children:"Email"}),e.jsx(i,{required:!0,id:"email",name:"email",value:m,fullWidth:!0,onChange:t=>d(t.target.value),sx:{border:"1px solid silver",borderRadius:"9px"}})]}),e.jsxs(r,{item:!0,xs:12,sm:12,children:[e.jsx("span",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:"Account Access Date Range"}),e.jsx("hr",{})]}),e.jsxs(r,{item:!0,xs:12,sm:6,children:[e.jsx("label",{children:"From"}),e.jsx(i,{required:!0,id:"iban",name:"iban",type:"date",value:E(j).format("YYYY-MM-DD"),fullWidth:!0,onChange:t=>v(t.target.value),sx:{border:"1px solid silver",borderRadius:"9px"}})]}),e.jsxs(r,{item:!0,xs:12,sm:6,children:[e.jsx("label",{children:"To"}),e.jsx(i,{required:!0,id:"iban",name:"iban",type:"date",value:E(p).format("YYYY-MM-DD"),fullWidth:!0,onChange:t=>x(t.target.value),sx:{border:"1px solid silver",borderRadius:"9px"}})]}),e.jsxs(r,{item:!0,xs:12,children:[e.jsx("label",{children:"Comments (Optional)"}),e.jsx(i,{id:"address2",name:"address2",fullWidth:!0,value:h,onChange:t=>b(t.target.value),multiline:!0,minRows:"5",autoComplete:"shipping address-line2",sx:{border:"1px solid silver",borderRadius:"9px"}})]}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(F,{color:"primary",onClick:t=>L(t),children:[e.jsx(z,{sx:{mr:1}}),"Submit"]})})]})]})})]})}export{ve as default};
