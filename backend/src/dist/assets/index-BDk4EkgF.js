import{R as s}from"./index-BupViSio.js";var Z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},K={visa:{niceType:"Visa",type:"visa",patterns:[4],gaps:[4,8,12],lengths:[16,18,19],code:{name:"CVV",size:3}},mastercard:{niceType:"Mastercard",type:"mastercard",patterns:[[51,55],[2221,2229],[223,229],[23,26],[270,271],2720],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},"american-express":{niceType:"American Express",type:"american-express",patterns:[34,37],gaps:[4,10],lengths:[15],code:{name:"CID",size:4}},"diners-club":{niceType:"Diners Club",type:"diners-club",patterns:[[300,305],36,38,39],gaps:[4,10],lengths:[14,16,19],code:{name:"CVV",size:3}},discover:{niceType:"Discover",type:"discover",patterns:[6011,[644,649],65],gaps:[4,8,12],lengths:[16,19],code:{name:"CID",size:3}},jcb:{niceType:"JCB",type:"jcb",patterns:[2131,1800,[3528,3589]],gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVV",size:3}},unionpay:{niceType:"UnionPay",type:"unionpay",patterns:[620,[624,626],[62100,62182],[62184,62187],[62185,62197],[62200,62205],[622010,622999],622018,[622019,622999],[62207,62209],[622126,622925],[623,626],6270,6272,6276,[627700,627779],[627781,627799],[6282,6289],6291,6292,810,[8110,8131],[8132,8151],[8152,8163],[8164,8171]],gaps:[4,8,12],lengths:[14,15,16,17,18,19],code:{name:"CVN",size:3}},maestro:{niceType:"Maestro",type:"maestro",patterns:[493698,[5e5,504174],[504176,506698],[506779,508999],[56,59],63,67,6],gaps:[4,8,12],lengths:[12,13,14,15,16,17,18,19],code:{name:"CVC",size:3}},elo:{niceType:"Elo",type:"elo",patterns:[401178,401179,438935,457631,457632,431274,451416,457393,504175,[506699,506778],[509e3,509999],627780,636297,636368,[650031,650033],[650035,650051],[650405,650439],[650485,650538],[650541,650598],[650700,650718],[650720,650727],[650901,650978],[651652,651679],[655e3,655019],[655021,655058]],gaps:[4,8,12],lengths:[16],code:{name:"CVE",size:3}},mir:{niceType:"Mir",type:"mir",patterns:[[2200,2204]],gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVP2",size:3}},hiper:{niceType:"Hiper",type:"hiper",patterns:[637095,63737423,63743358,637568,637599,637609,637612],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},hipercard:{niceType:"Hipercard",type:"hipercard",patterns:[606282],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}}},A={},N={};Object.defineProperty(N,"__esModule",{value:!0}),N.clone=void 0,N.clone=function(e){return e?JSON.parse(JSON.stringify(e)):null};var T={};Object.defineProperty(T,"__esModule",{value:!0}),T.matches=void 0,T.matches=function(e,t){return Array.isArray(t)?function(r,n,o){var d=String(n).length,l=r.substr(0,d),m=parseInt(l,10);return n=parseInt(String(n).substr(0,l.length),10),o=parseInt(String(o).substr(0,l.length),10),m>=n&&m<=o}(e,t[0],t[1]):function(r,n){return(n=String(n)).substring(0,r.length)===r.substring(0,n.length)}(e,t)},Object.defineProperty(A,"__esModule",{value:!0}),A.addMatchingCardsToResults=void 0;var Q=N,W=T;A.addMatchingCardsToResults=function(e,t,r){var n,o;for(n=0;n<t.patterns.length;n++){var d=t.patterns[n];if(W.matches(e,d)){var l=Q.clone(t);o=Array.isArray(d)?String(d[0]).length:String(d).length,e.length>=o&&(l.matchStrength=o),r.push(l);break}}};var I={};Object.defineProperty(I,"__esModule",{value:!0}),I.isValidInputType=void 0,I.isValidInputType=function(e){return typeof e=="string"||e instanceof String};var V={};Object.defineProperty(V,"__esModule",{value:!0}),V.findBestMatch=void 0,V.findBestMatch=function(e){return function(t){var r=t.filter(function(n){return n.matchStrength}).length;return r>0&&r===t.length}(e)?e.reduce(function(t,r){return t?Number(t.matchStrength)<Number(r.matchStrength)?r:t:r}):null};var O=Z&&Z.__assign||function(){return O=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},O.apply(this,arguments)},$=K,ee=A,te=I,re=V,R=N,S={},p={VISA:"visa",MASTERCARD:"mastercard",AMERICAN_EXPRESS:"american-express",DINERS_CLUB:"diners-club",DISCOVER:"discover",JCB:"jcb",UNIONPAY:"unionpay",MAESTRO:"maestro",ELO:"elo",MIR:"mir",HIPER:"hiper",HIPERCARD:"hipercard"},q=[p.VISA,p.MASTERCARD,p.AMERICAN_EXPRESS,p.DINERS_CLUB,p.DISCOVER,p.JCB,p.UNIONPAY,p.MAESTRO,p.ELO,p.MIR,p.HIPER,p.HIPERCARD],v=R.clone(q);function k(e){return S[e]||$[e]}function w(e,t){t===void 0&&(t=!1);var r=v.indexOf(e);if(!t&&r===-1)throw new Error('"'+e+'" is not a supported card type.');return r}function g(e){var t=[];if(!te.isValidInputType(e))return t;if(e.length===0)return v.map(function(n){return R.clone(k(n))});v.forEach(function(n){var o=k(n);ee.addMatchingCardsToResults(e,o,t)});var r=re.findBestMatch(t);return r?[r]:t}g.getTypeInfo=function(e){return R.clone(k(e))},g.removeCard=function(e){var t=w(e);v.splice(t,1)},g.addCard=function(e){var t=w(e.type,!0);S[e.type]=e,t===-1&&v.push(e.type)},g.updateCard=function(e,t){var r=S[e]||$[e];if(!r)throw new Error('"'+e+"\" is not a recognized type. Use `addCard` instead.'");if(t.type&&r.type!==t.type)throw new Error("Cannot overwrite type parameter.");var n=R.clone(r);n=O(O({},n),t),S[n.type]=n},g.changeOrder=function(e,t){var r=w(e);v.splice(r,1),v.splice(t,0,e)},g.resetModifications=function(){v=R.clone(q),S={}},g.types=p;var f=g,ne={niceType:"Dankort",type:"dankort",patterns:[5019],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},ae={niceType:"Laser",type:"laser",patterns:[6706,6771,6709],gaps:[4,8,12],lengths:[16,19],code:{name:"CVV",size:3}},se={niceType:"Visa Electron",type:"visa-electron",patterns:[4026,417500,4405,4508,4844,49137],gaps:[4,8,12],lengths:[16],code:{name:"CVV",size:3}},ce=function(e){var t,r,n=String(e).replace(/[\s]/g,""),o=n.length,d=!1,l=0;if(!/^[0-9]+$/.test(n))return!1;for(var m=o;m>0;m--){if(t=parseInt(n.charAt(m-1)),d){switch(r=2*t){case 10:r=1;break;case 12:r=3;break;case 14:r=5;break;case 16:r=7;break;case 18:r=9}l+=r}else l+=t;d=!d}return l!==0&&l%10==0},ie=function(e){var t=f(e.toString().trim().replace(" ",""));if(t.length===1){var r=t.shift();return(r==null?void 0:r.type)||"unknown"}return"unknown"},j=function(){return f.updateCard(f.types.MAESTRO,{patterns:[493698,[5e3,5018],[502e3,506698],[506779,508999],[56,59],63,67,6]}),f.updateCard(f.types.HIPERCARD,{patterns:[384100,384140,384160,606282,637095,637568]}),f.addCard(ne),f.addCard(ae),f.addCard(se),Object.values(f.types).concat(["dankort","laser","visa-electron"])},E={amex:["amex","americanexpress","american-express"],dinersclub:["diners","dinersclub","diners-club"],visaelectron:["visaelectron","visa-electron"]};function le(e){var t=e.acceptedCards,r=t===void 0?[]:t,n=e.number,o=e.issuer,d=e.preview,l=d!==void 0&&d,m=e.expiry,z=e.cvc,y=e.focused,P=e.locale,F=P===void 0?{valid:"valid thru"}:P,D=e.name,L=e.placeholders,G=L===void 0?{name:"YOUR NAME HERE"}:L,x=e.callback,B=s.useState(j()),h=B[0],H=B[1],U=s.useMemo(function(){return r!=null&&r.length?h.filter(function(c){return r.includes(c)}):h},[r,h]),_=s.useMemo(function(){var c="unknown";if(n){var a=ie(n);U.includes(a)&&(c=a)}var i=16;return E.amex.includes(c)?i=15:E!=null&&E.dinersclub.includes(c)?i=14:["hipercard","mastercard","visa"].includes(c)&&(i=19),{issuer:c,maxLength:i}},[n,U]),b=s.useMemo(function(){return l&&o?o.toLowerCase():_.issuer},[_.issuer,o,l]),C=s.useMemo(function(){var c=l?19:_.maxLength,a=typeof n=="number"?n.toString():String(n).replace(/[A-Za-z]| /g,"");for(isNaN(parseInt(a,10))&&!l&&(a=""),c>16&&(c=a.length<=16?16:c),a.length>c&&(a=a.slice(0,c));a.length<c;)a+="•";if(E.amex.includes(b)||E.dinersclub.includes(b)){var i=[0,4,10],u=[4,6,5];a="".concat(a.substr(i[0],u[0])," ").concat(a.substr(i[1],u[1])," ").concat(a.substr(i[2],u[2]))}else if(a.length>16)i=[0,4,8,12],u=[4,7],a="".concat(a.substr(i[0],u[0])," ").concat(a.substr(i[1],u[0])," ").concat(a.substr(i[2],u[0])," ").concat(a.substr(i[3],u[1]));else for(var M=1;M<c/4;M++){var X=4*M+(M-1);a="".concat(a.slice(0,X)," ").concat(a.slice(X))}return a},[_.maxLength,b,n,l]),J=s.useMemo(function(){var c,a=typeof m=="number"?m.toString():m,i="",u="";for(a.includes("/")?(i=(c=a.split("/"))[0],u=c[1]):a.length&&(i=a.substr(0,2),u=a.substr(2,6));i.length<2;)i+="•";for(u.length>2&&(u=u.substr(2,4));u.length<2;)u+="•";return"".concat(i,"/").concat(u)},[m]),Y=s.useCallback(function(c){if(c.length)H(h.filter(function(i){return c.includes(i)}));else{var a=j();H(a)}},[h]);return s.useEffect(function(){C!==n&&typeof x=="function"&&x(_,ce(String(n))),j().toString()!==h.toString()&&Y(r)},[r,x,_,C,Y,n,h]),s.createElement("div",{key:"Cards",className:"rccs"},s.createElement("div",{className:["rccs__card","rccs__card--".concat(b),y==="cvc"&&b!=="american-express"?"rccs__card--flipped":""].join(" ").trim()},s.createElement("div",{className:"rccs__card--front"},s.createElement("div",{className:"rccs__card__background"}),s.createElement("div",{className:"rccs__issuer"}),s.createElement("div",{className:["rccs__cvc__front",y==="cvc"?"rccs--focused":""].join(" ").trim()},z),s.createElement("div",{className:["rccs__number",C.replace(/ /g,"").length>16?"rccs__number--large":"",y==="number"?"rccs--focused":"",C.substr(0,1)!=="•"?"rccs--filled":""].join(" ").trim()},C),s.createElement("div",{className:["rccs__name",y==="name"?"rccs--focused":"",D?"rccs--filled":""].join(" ").trim()},D||G.name),s.createElement("div",{className:["rccs__expiry",y==="expiry"?"rccs--focused":"",J.substr(0,1)!=="•"?"rccs--filled":""].join(" ").trim()},s.createElement("div",{className:"rccs__expiry__valid"},F.valid),s.createElement("div",{className:"rccs__expiry__value"},J)),s.createElement("div",{className:"rccs__chip"})),s.createElement("div",{className:"rccs__card--back"},s.createElement("div",{className:"rccs__card__background"}),s.createElement("div",{className:"rccs__stripe"}),s.createElement("div",{className:"rccs__signature"}),s.createElement("div",{className:["rccs__cvc",y==="cvc"?"rccs--focused":""].join(" ").trim()},z),s.createElement("div",{className:"rccs__issuer"}))))}export{le as O};
