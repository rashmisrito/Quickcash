import{u as P,R as s,r as w,j as t,L as f}from"./index-BupViSio.js";import{C as D,c as E,a as p,B as d}from"./App-DPd8oDNy.js";import{A as H}from"./AuthContext-oA3uKCC_.js";import{d as I}from"./LockOutlined-DcHw7ibt.js";import{u as M}from"./useValidation-BFtkzuDM.js";import{T as V}from"./ThemeProvider-Dszv9aih.js";import{C as q}from"./Container-jt8m3qta.js";import{B as h}from"./Box-C145hu5M.js";import{A as F}from"./Avatar-BkVhrvtn.js";import{T as j}from"./Typography-C-05GYiH.js";import{T as l}from"./TextField-JtUyMF_l.js";import{B as x}from"./Button-CXQLG-lr.js";import{G as g}from"./Grid-B1t4UKB3.js";import"./createSvgIcon-B4_0CFOw.js";import"./createSvgIcon-c6Q7LSIT.js";import"./styled-BsT2Uje-.js";import"./TransitionGroupContext-HDmFy-NO.js";import"./isMuiElement-DCOEWuFR.js";import"./ButtonBase-Cnw-KpJ1.js";import"./Menu-DvW-7bCh.js";import"./Backdrop-DtEZozg_.js";import"./utils-4tjU1hxM.js";import"./styled-DbqmzKIc.js";import"./createStyled-CGgeouwa.js";import"./index-a_FsHuo7.js";import"./useSlot-DKrrUoc4.js";import"./FormControl-CggpVb1O.js";import"./Select-CUzNhoH_.js";function R(r){return t.jsxs(j,{variant:"body2",color:"text.secondary",align:"center",...r,children:["Copyright Â© ",t.jsx(f,{color:"inherit",to:"/",style:{textDecoration:"none"},children:"Neo Connect"})," ",new Date().getFullYear(),"."]})}const G=E();function je(){const{errors:r,validate:a}=M(),v=P(),m="api",[C,b]=s.useState(""),[o,y]=s.useState(""),[S,T]=s.useState(""),{authenticated:N,setAuthenticated:B}=w.useContext(H),[c,u]=s.useState(!1),k=async()=>{a("email",o)?a("email",o)&&i(r.email,"error"):await p.post(`/${m}/v1/member/validate`,{email:o,username:S}).then(e=>{e.status==200&&u(!0)}).catch(e=>{i(e.response.data.message,"error"),console.log("Login api error",e)})},i=(e,n)=>{n=="error"?d.error(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):d.success(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},O=async()=>{a("email",o)?a("email",o)&&i(r.email,"error"):await p.post(`/${m}/v1/member/login`,{email:o,otp:C}).then(e=>{e.status==200&&(u(!1),localStorage.setItem("token",e.data.token),B(!0),i(e.data.message,"success"),v("/home"))}).catch(e=>{i(e.response.data.message,"error"),console.log("Member Login api error",e)})},A=e=>{const{name:n,value:W}=e.target,L=a(n,W);console.log(L)};return t.jsx(V,{theme:G,children:t.jsxs(q,{component:"main",maxWidth:"xs",children:[t.jsx(D,{}),t.jsxs(h,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsx(F,{sx:{m:1,bgcolor:"secondary.main"},children:t.jsx(I,{})}),t.jsx(j,{component:"h1",variant:"h5",children:"Member Sign in"}),t.jsxs(h,{component:"form",noValidate:!0,sx:{mt:1},children:[t.jsx(l,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:e=>y(e.target.value),onBlur:A,error:!!r.email,helperText:r.email}),t.jsx(l,{margin:"normal",required:!0,fullWidth:!0,name:"username",label:"Username",type:"text",id:"username",onChange:e=>T(e.target.value)}),c?t.jsx(l,{margin:"normal",required:!0,fullWidth:!0,name:"otp",label:"OTP",type:"text",id:"otp",onChange:e=>b(e.target.value)}):null,c?t.jsx(x,{type:"button",onClick:()=>O(),fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Proceed"}):t.jsx(x,{type:"button",onClick:()=>k(),fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),t.jsx(g,{container:!0,children:t.jsx(g,{item:!0,xs:!0,children:t.jsx(f,{to:"/",style:{textDecoration:"none"},children:"Switch to user login?"})})})]})]}),t.jsx(R,{sx:{mt:8,mb:4}})]})})}export{je as default};
