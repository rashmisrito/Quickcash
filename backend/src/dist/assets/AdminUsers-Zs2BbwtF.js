import{f as oe,R as g,r as x,j as a}from"./index-CPyIBKv5.js";import{a as k,p as le,B as w}from"./App-CPA_Lu-d.js";import{h as H}from"./moment-Cl4UOzQZ.js";import{P as S}from"./index-CnKBBWDD.js";import{T as ne,a as de,d as q,b as Y}from"./FirstPage-CyB0DMsa.js";import{d as ce}from"./ModeEditOutline-CTqJxeE2.js";import{d as V}from"./KeyboardArrowLeft-5C2p3fWB.js";import{d as _}from"./KeyboardArrowRight-Ds7yJ1IK.js";import{T as me,a as he,b as D,c as d}from"./Tr-bHCce7K1.js";/* empty css                                  */import{C as pe}from"./ColorButton-p_8AmmsY.js";import{B as N}from"./Box-Cts58nYT.js";import{T as ue}from"./Typography-32GqnDkD.js";import{G as ge,u as xe}from"./Grid-ijiQ2gXa.js";import{T as fe}from"./TableBody-E-ctUCz8.js";import{D as be,a as je}from"./DialogContent-DGobNMNn.js";import{D as ve}from"./DialogTitle-LBj4pwAt.js";import{T as C}from"./TextField-CGe-lY_w.js";import{S as ye}from"./Select-Cu2oDfAu.js";import{M as G}from"./MenuItem-BOkCQE_H.js";import{D as ke}from"./DialogActions-CGO26BuF.js";import{s as U}from"./styled-D3btvjLo.js";import{B as Ce}from"./Button-mU0fsZ6C.js";import{I as A}from"./IconButton-Dq1QOsvQ.js";import"./Tablelvl2Context-CrQONfEB.js";import"./Menu-DzGOcUhD.js";import"./Backdrop-5VrCmbBJ.js";import"./utils-27lUOG69.js";import"./TransitionGroupContext-DpwKRQDB.js";import"./createSvgIcon-CJCtbkVa.js";import"./ButtonBase-lj8ryPQQ.js";import"./TableCell-B98GTLWK.js";import"./Toolbar--Cv9kmMg.js";import"./createSvgIcon-DK6HOpVs.js";import"./isMuiElement-CtMSz7xH.js";import"./FormControl-Cfr3bcUw.js";import"./dividerClasses-a3rAEu9c.js";import"./listItemTextClasses-DgiHFli8.js";const $=U(Ce)(({theme:t})=>({color:t.palette.getContrastText(le[500]),backgroundColor:"#2E3192","&:hover":{backgroundColor:"#2E3192"}}));function J(t){const o=xe(),{count:m,page:i,rowsPerPage:n,onPageChange:l}=t,h=r=>{l(r,0)},f=r=>{l(r,i-1)},b=r=>{l(r,i+1)},j=r=>{l(r,Math.max(0,Math.ceil(m/n)-1))};return a.jsxs(N,{sx:{flexShrink:0,ml:2.5},children:[a.jsx(A,{onClick:h,disabled:i===0,"aria-label":"first page",children:o.direction==="rtl"?a.jsx(q,{}):a.jsx(Y,{})}),a.jsx(A,{onClick:f,disabled:i===0,"aria-label":"previous page",children:o.direction==="rtl"?a.jsx(_,{}):a.jsx(V,{})}),a.jsx(A,{onClick:b,disabled:i>=Math.ceil(m/n)-1,"aria-label":"next page",children:o.direction==="rtl"?a.jsx(V,{}):a.jsx(_,{})}),a.jsx(A,{onClick:j,disabled:i>=Math.ceil(m/n)-1,"aria-label":"last page",children:o.direction==="rtl"?a.jsx(Y,{}):a.jsx(q,{})})]})}J.propTypes={count:S.number.isRequired,onPageChange:S.func.isRequired,page:S.number.isRequired,rowsPerPage:S.number.isRequired};const $e=[{id:"date",label:"Date",minWidth:170},{id:"username",label:"Username",minWidth:120},{id:"email",label:"Email",minWidth:100},{id:"mobile",label:"Mobile",minWidth:100},{id:"autoresetpassword",label:"Password Expire Date",minWidth:100},{id:"status",label:"Status",minWidth:100},{id:"action",label:"Actions",minWidth:30}];function Pe(t,o,m,i,n,l,h){return{id:t,date:o,username:m,email:i,mobile:n,autoresetpassword:l,status:h}}const Se=U("div")(({theme:t})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"right",height:"100%","& .ant-empty-img-1":{fill:t.palette.mode==="light"?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:t.palette.mode==="light"?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:t.palette.mode==="light"?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:t.palette.mode==="light"?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:t.palette.mode==="light"?"0.8":"0.08",fill:t.palette.mode==="light"?"#f5f5f5":"#fff"}}));function De(){return a.jsxs(Se,{children:[a.jsx("svg",{width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:a.jsxs("g",{fill:"none",fillRule:"evenodd",children:[a.jsxs("g",{transform:"translate(24 31.67)",children:[a.jsx("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),a.jsx("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),a.jsx("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),a.jsx("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),a.jsx("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),a.jsxs("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[a.jsx("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),a.jsx("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),a.jsx(N,{sx:{mt:1},children:"No Data found"})]})}function ha(){const[t]=oe(),[o,m]=g.useState(),i="api";x.useEffect(()=>{T()},[]);const[n,l]=x.useState(""),[h,f]=x.useState(""),[b,j]=x.useState(""),[r,M]=x.useState(""),[R,I]=x.useState(""),K=async()=>{await k.post(`/${i}/v1/admin/register`,{fname:n,lname:h,email:b,mobile:r,autoResetTime:z,status:!0,password:Math.random().toString(36).slice(2,7)},{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(e=>{e.data.status==201&&(v(e.data.message,"success"),T(),p(!1))}).catch(e=>{console.log("error",e),v(e.response.data.message,"error")})},Q=async()=>{await k.patch(`/${i}/v1/admin/update-profile`,{user_id:u,fname:n,lname:h,email:b,mobile:r,autoResetTime:z,status:R},{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(e=>{e.data.status==201&&(v(e.data.message,"success"),T(),p(!1),P(""))}).catch(e=>{console.log("error",e),v(e.response.data.message,"error")})},v=(e,s)=>{s=="error"?w.error(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):w.success(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},T=async()=>{await k.get(`/${i}/v1/admin/adminsList`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(e=>{e.data.status=="201"&&m(e.data.data)}).catch(e=>{console.log("error",e)})};let E=[];E=[o==null?void 0:o.map(e=>Pe(e._id,e.createdAt,e.fname,e.email,e.mobile,e.autoresettime,e.status))].sort((e,s)=>e.date<s.date?-1:1);const c=E[0]||[],[W,F]=g.useState(0),[y,X]=g.useState(5),Z=(e,s)=>{console.log("New Page",e),F(s)},ee=e=>{X(parseInt(e.target.value,10)),F(0)},[ae,p]=g.useState(!1),[u,P]=g.useState(""),[z,B]=g.useState(""),te=()=>{p(!0)},se=e=>{P(e),p(!0),ie(e)},ie=async e=>{await k.get(`/${i}/v1/admin/getbyId/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(s=>{s.data.status=="201"&&(l(s.data.data[0].fname),f(s.data.data[0].lname),M(s.data.data[0].mobile),j(s.data.data[0].email),I(s.data.data[0].status),B(s.data.data[0].autoresettime))}).catch(s=>{console.log("error",s)})},re=async e=>{confirm("Are you sure?")==!0&&await k.patch(`/${i}/v1/admin/generatePassword/${e}`,{password:Math.random().toString(36).slice(2,7)},{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(L=>{L.data.status=="201"&&(p(!1),P(""),v("Password is generated and sent to the Registered Email","Success"))}).catch(L=>{console.log("error",L)})},O=()=>{p(!1),P(""),l(""),f(""),j(""),M(""),B("")};return a.jsxs(a.Fragment,{children:[a.jsxs(N,{sx:{marginLeft:{md:"7%"},marginTop:{xs:"0px",md:"12px"},fontSize:"15px",width:{md:"90%"}},children:[a.jsx(ue,{children:a.jsx(pe,{onClick:te,sx:{marginBottom:"12px"},children:"Add Admin"})}),a.jsx(ge,{sx:{display:"flex",flexDirection:"column",gap:"20px",borderRadius:".5rem",color:"black",fontWeight:"700",background:`${t?"":"white"}`,padding:"3px 3px"},children:a.jsxs(me,{sx:{minWidth:500},"aria-label":"custom pagination table",children:[a.jsx(he,{children:a.jsx(D,{className:`${t?"avatarDark":"avatarLight"}`,children:$e.map(e=>a.jsx(d,{width:"220",style:{padding:"12px",background:"#8657E5",color:"white"},children:e.label},e.id))})}),a.jsxs(fe,{children:[(y>0?c==null?void 0:c.slice(W*y,W*y+y):c).map(e=>a.jsxs(D,{children:[a.jsx(d,{style:{padding:"12px",fontSize:"14px",fontWeight:"400",color:`${t?"white":"black"}`},scope:"row",children:H(e==null?void 0:e.date).format("YYYY-MM-DD")}),a.jsx(d,{style:{padding:"12px",fontSize:"14px",fontWeight:"400",color:`${t?"white":"black"}`},scope:"row",children:e==null?void 0:e.username}),a.jsx(d,{style:{padding:"12px",fontSize:"14px",fontWeight:"400",color:`${t?"white":"black"}`},scope:"row",children:e==null?void 0:e.email}),a.jsx(d,{style:{padding:"12px",fontSize:"14px",fontWeight:"400",color:`${t?"white":"black"}`},scope:"row",children:e==null?void 0:e.mobile}),a.jsx(d,{style:{padding:"12px",fontSize:"14px",fontWeight:"400",color:`${t?"white":"black"}`},scope:"row",children:e==null?void 0:e.autoresetpassword}),a.jsx(d,{style:{padding:"12px",fontSize:"14px",fontWeight:"400",color:`${t?"white":"black"}`},scope:"row",children:e!=null&&e.status?"Active":"In Active"}),a.jsx(d,{style:{padding:"12px",fontSize:"14px",fontWeight:"400",color:`${t?"white":"black"}`},scope:"row",children:a.jsx($,{onClick:()=>se(e==null?void 0:e.id),children:a.jsx(ce,{})})})]},e==null?void 0:e.date)),(c==null?void 0:c.length)==0&&a.jsx(D,{children:a.jsx(d,{colSpan:7,children:a.jsx(De,{})})})]}),a.jsx(ne,{sx:{background:`${t?"white":""}`},children:a.jsx(D,{children:a.jsx(de,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:7,count:c.length,rowsPerPage:y,page:W,slotProps:{select:{inputProps:{"aria-label":"rows per page"},native:!0}},onPageChange:Z,onRowsPerPageChange:ee,ActionsComponent:J})})})]})})]}),a.jsxs(be,{open:ae,onClose:O,children:[a.jsxs(ve,{className:`${t?"avatarDark":"avatarLight"}`,children:[u?"Update":"Add"," Admin"]}),a.jsxs(je,{children:[a.jsx("label",{className:`${t?"avatarDark":"avatarLight"}`,children:"First Name"}),a.jsx(C,{autoFocus:!0,required:!0,margin:"dense",id:"fname",name:"fname",type:"text",value:n,sx:{border:`${t?"1px solid white":""}`},onChange:e=>l(e.target.value),fullWidth:!0}),a.jsx("label",{className:`${t?"avatarDark":"avatarLight"}`,children:"Last Name"}),a.jsx(C,{autoFocus:!0,required:!0,margin:"dense",id:"lname",name:"lname",type:"text",value:h,sx:{border:`${t?"1px solid white":""}`},onChange:e=>f(e.target.value),fullWidth:!0}),a.jsx("label",{className:`${t?"avatarDark":"avatarLight"}`,children:"Email"}),a.jsx(C,{autoFocus:!0,required:!0,margin:"dense",id:"name",name:"email",type:"email",sx:{border:`${t?"1px solid white":""}`},value:b,onChange:e=>j(e.target.value),fullWidth:!0}),a.jsx("label",{className:`${t?"avatarDark":"avatarLight"}`,children:"Mobile"}),a.jsx(C,{autoFocus:!0,required:!0,margin:"dense",id:"mobile",name:"mobile",type:"number",value:r,sx:{border:`${t?"1px solid white":""}`},onChange:e=>M(e.target.value),fullWidth:!0}),a.jsx("label",{className:`${t?"avatarDark":"avatarLight"}`,children:"Auto Reset-Password Date"}),a.jsx(C,{autoFocus:!0,required:!0,margin:"dense",id:"mobile",name:"mobile",type:"date",value:z,sx:{border:`${t?"1px solid white":""}`},inputProps:{min:H().format("YYYY-MM-DD"),className:"avatarDark"},onChange:e=>B(e.target.value),fullWidth:!0}),u&&a.jsxs(a.Fragment,{children:[a.jsx("label",{className:`${t?"avatarDark":"avatarLight"}`,children:"Status"}),a.jsxs(ye,{sx:{border:`${t?"1px solid white":""}`},value:R,fullWidth:!0,onChange:e=>I(e.target.value),children:[a.jsx(G,{value:"true",sx:{color:`${t?"white":"black"}`},children:"Active"}),a.jsx(G,{value:"false",sx:{color:`${t?"white":"black"}`},children:"In Active"})]})]})]}),a.jsxs(ke,{children:[u&&a.jsx($,{onClick:()=>re(u),children:"Generate Password"}),a.jsx($,{onClick:O,children:"Cancel"}),u?a.jsx($,{type:"button",onClick:()=>Q(),children:"Update"}):a.jsx($,{type:"button",onClick:()=>K(),children:"Create"})]})]})]})}export{ha as default};
