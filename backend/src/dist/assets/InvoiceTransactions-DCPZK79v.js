import{R as m,f as F,r as G,j as t}from"./index-BoluCWJx.js";import{a as M,g as B}from"./App-DmzB4KYc.js";import{h as J}from"./moment-Cl4UOzQZ.js";import{P as b}from"./index-BdYMM15t.js";import{$ as K}from"./module-7dQHnX9h.js";import{T as Q,a as U,d as D,b as _}from"./FirstPage-D-q8dQKx.js";import{d as z}from"./KeyboardArrowLeft-BnxO58n6.js";import{d as H}from"./KeyboardArrowRight-D7Z7eVgG.js";import{d as X}from"./Tr-BCamSY7H.js";/* empty css                                  */import{s as Z}from"./styled-BE7uoR5C.js";import{B as y}from"./Box-B48tCTAh.js";import{G as T,u as w}from"./Grid-CDAIVjPl.js";import{T as ee,a as te,b as ae}from"./TableHead-DbUVv1zj.js";import{P as se}from"./Menu-BmC6YJiv.js";import{T as P}from"./TableRow-Bbz_z8gD.js";import{T as h}from"./TableCell-B3mlDA6x.js";import{T as ne}from"./Tooltip-Bty52ea5.js";import{D as ie,a as le}from"./DialogContent-B1MLnFwp.js";import{D as re}from"./DialogTitle-C0yO6l00.js";import{D as oe}from"./DialogActions-BVBfke6I.js";import{B as ce}from"./Button-CGTIOcYX.js";import{S as de}from"./Slide-B2bbl5CG.js";import{I as C}from"./IconButton-CHMrJ6Gi.js";import"./html2canvas.esm-3NQT9CgR.js";import"./jspdf.es.min-DQpM4uqj.js";import"./typeof-QjJsDpFa.js";import"./Tablelvl2Context-DvKfqr-l.js";import"./createSvgIcon-i4Ddu0pI.js";import"./Toolbar-DuU3Na8Z.js";import"./Select-aus-Z7PH.js";import"./TransitionGroupContext-D5Gal4xy.js";import"./ButtonBase-Cc0NCTY7.js";import"./MenuItem-DF424Blq.js";import"./dividerClasses-BTTZbAf4.js";import"./listItemTextClasses-uBM8BSi9.js";import"./createSvgIcon-DDiySQ4J.js";import"./isMuiElement-Bzzx93h0.js";import"./Backdrop-BiRxOpLA.js";import"./utils-PFTex4TT.js";import"./Popper-CWS8uUZI.js";import"./Popper-8-nrn_v4.js";import"./Typography-DPkJNBsU.js";const pe=m.forwardRef(function(s,n){return t.jsx(de,{direction:"up",ref:n,...s})});function O(p){const s=w(),{count:n,page:r,rowsPerPage:x,onPageChange:d}=p,g=i=>{d(i,0)},f=i=>{d(i,r-1)},u=i=>{d(i,r+1)},o=i=>{d(i,Math.max(0,Math.ceil(n/x)-1))};return t.jsxs(y,{sx:{flexShrink:0,ml:2.5},children:[t.jsx(C,{onClick:g,disabled:r===0,"aria-label":"first page",children:s.direction==="rtl"?t.jsx(D,{}):t.jsx(_,{})}),t.jsx(C,{onClick:f,disabled:r===0,"aria-label":"previous page",children:s.direction==="rtl"?t.jsx(H,{}):t.jsx(z,{})}),t.jsx(C,{onClick:u,disabled:r>=Math.ceil(n/x)-1,"aria-label":"next page",children:s.direction==="rtl"?t.jsx(z,{}):t.jsx(H,{})}),t.jsx(C,{onClick:o,disabled:r>=Math.ceil(n/x)-1,"aria-label":"last page",children:s.direction==="rtl"?t.jsx(_,{}):t.jsx(D,{})})]})}O.propTypes={count:b.number.isRequired,onPageChange:b.func.isRequired,page:b.number.isRequired,rowsPerPage:b.number.isRequired};const xe=[{id:"invoice_number",label:"Invoice Number",minWidth:170},{id:"date",label:"Payment Date",minWidth:170},{id:"total",label:"Total",minWidth:100},{id:"amount",label:"Paid Amount",minWidth:100},{id:"type",label:"Transaction Type",minWidth:100}];function he(p,s,n,r,x,d,g,f,u){return{invoiceid:p,tcurr:s,icurr:n,id:r,invoice_number:x,payment_date:d,total:g,paid_amount:f,type:u}}function st(){const p="api";m.useState(!1),K({filename:"invoices.pdf"});const[s]=F(),[n,r]=m.useState(),[x,d]=m.useState(!1),g=()=>{d(!1)};G.useEffect(()=>{f()},[]);const f=async()=>{await M.get(`/${p}/v1/manualPayment/transaction-list`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(e=>{var l,c;((l=e==null?void 0:e.data)==null?void 0:l.status)=="201"&&r((c=e==null?void 0:e.data)==null?void 0:c.data)}).catch(e=>{console.log("error",e)})};let u=[];u=[n==null?void 0:n.map(e=>{var l,c,k,$,R,S,A,I;return he((c=(l=e==null?void 0:e.invoiceDetails)==null?void 0:l[0])==null?void 0:c._id,e==null?void 0:e.fromCurrency,($=(k=e==null?void 0:e.invoiceDetails)==null?void 0:k[0])==null?void 0:$.currency,e._id,(S=(R=e==null?void 0:e.invoiceDetails)==null?void 0:R[0])==null?void 0:S.invoice_number,e==null?void 0:e.dateadded,e==null?void 0:e.amount,(I=(A=e==null?void 0:e.invoiceDetails)==null?void 0:A[0])==null?void 0:I.total,e==null?void 0:e.trans_type)})].sort((e,l)=>e.date<l.date?-1:1);const o=u[0]||[],[i,v]=m.useState(0),[j,V]=m.useState(5),W=(e,l)=>{console.log(e),v(l)},L=e=>{V(parseInt(e.target.value,10)),v(0)},N=Z("div")(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"right",height:"100%","& .ant-empty-img-1":{fill:e.palette.mode==="light"?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:e.palette.mode==="light"?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:e.palette.mode==="light"?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:e.palette.mode==="light"?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:e.palette.mode==="light"?"0.8":"0.08",fill:e.palette.mode==="light"?"#f5f5f5":"#fff"}}));function Y(){return t.jsxs(N,{children:[t.jsx("svg",{width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:t.jsxs("g",{fill:"none",fillRule:"evenodd",children:[t.jsxs("g",{transform:"translate(24 31.67)",children:[t.jsx("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),t.jsx("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),t.jsx("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),t.jsx("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),t.jsx("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),t.jsxs("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[t.jsx("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),t.jsx("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),t.jsx(y,{sx:{mt:1},children:"No Data found"})]})}const[a,q]=m.useState(""),E=async(e,l)=>{l=="ITIOPAY"&&await M.get(`/${p}/v1/invoice/transaction/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(c=>{c.data.status=="201"&&(q(c.data.data),d(!0))}).catch(c=>{console.log("error",c)})};return t.jsxs(t.Fragment,{children:[t.jsx(y,{sx:{marginTop:"12px",fontSize:"15px"},children:t.jsxs(T,{sx:{display:"flex",flexDirection:"column",gap:"1px",borderRadius:".5rem",color:"black",fontWeight:"700",background:{xs:`${s?"#183153":"white"}`,sm:`${s?"":"white"}`},border:{xs:`${s?"1px solid white":"white"}`,sm:`${s?"1px solid white":"white"}`},padding:"3px"},children:[t.jsx(T,{container:!0,sx:{display:"flex",justifyContent:"space-between"}}),t.jsx(y,{sx:{overflow:"auto"},children:t.jsx(y,{sx:{width:"100%",display:"table",tableLayout:"fixed"},children:t.jsx(ee,{component:se,children:t.jsxs(te,{sx:{minWidth:500},"aria-label":"custom pagination table",children:[t.jsx(ae,{children:t.jsx(P,{children:xe.map(e=>t.jsx(h,{style:{padding:"12px",background:"#8657E5",color:"white"},children:e.label},e.id))})}),t.jsxs(X,{children:[(j>0?o==null?void 0:o.slice(i*j,i*j+j):o).map(e=>t.jsxs(P,{children:[t.jsx(h,{style:{padding:"20px",textAlign:"center"},children:t.jsx(T,{sx:{display:"flex",flexDirection:"row",justifyContent:"center"},children:(e==null?void 0:e.type)=="ITIOPAY"?t.jsx(ne,{title:"View Transaction Details",placement:"top",arrow:!0,children:t.jsx(T,{sx:{cursor:"pointer"},onClick:()=>E(e==null?void 0:e.invoiceid,e==null?void 0:e.type),children:e==null?void 0:e.invoice_number})}):e==null?void 0:e.invoice_number})}),t.jsx(h,{style:{padding:"20px",textAlign:"center"},children:J(e==null?void 0:e.payment_date).format("DD-MM-YYYY")}),t.jsxs(h,{style:{padding:"20px",textAlign:"center"},children:[B(e==null?void 0:e.tcurr),e==null?void 0:e.total]}),t.jsx(h,{style:{padding:"20px",textAlign:"center"},children:t.jsxs("span",{style:{background:"green",color:"white",padding:"10px",borderRadius:"10px"},children:[B(e==null?void 0:e.tcurr),e==null?void 0:e.paid_amount]})}),t.jsx(h,{style:{padding:"20px",textAlign:"center"},children:e==null?void 0:e.type})]},e==null?void 0:e.date)),(o==null?void 0:o.length)==0&&t.jsx(P,{children:t.jsx(h,{colSpan:7,children:t.jsx(Y,{})})})]}),t.jsx(Q,{sx:{background:`${s?"white":""}`},children:t.jsx(P,{children:t.jsx(U,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:7,count:o.length,rowsPerPage:j,page:i,slotProps:{select:{inputProps:{"aria-label":"rows per page"},native:!0}},sx:{color:"black"},onPageChange:W,onRowsPerPageChange:L,ActionsComponent:O})})})]})})})})]})}),t.jsxs(ie,{fullWidth:!0,open:x,TransitionComponent:pe,keepMounted:!0,onClose:g,"aria-describedby":"alert-dialog-slide-description",children:[t.jsx(re,{sx:{color:`${s?"white":"black"}`},children:"Transaction Details"}),t.jsx(le,{children:t.jsxs("table",{width:"100%",border:1,style:{borderCollapse:"collapse",color:`${s?"white":"black"}`},children:[t.jsx("tr",{children:t.jsxs("td",{style:{padding:"2%"},children:["Trx: ",a==null?void 0:a.transID]})}),t.jsx("tr",{children:t.jsxs("td",{style:{padding:"2%"},children:["Reference: ",a==null?void 0:a.reference]})}),t.jsx("tr",{children:t.jsxs("td",{style:{padding:"2%"},children:["Payment Date: ",a==null?void 0:a.tdate]})}),t.jsx("tr",{children:t.jsxs("td",{style:{padding:"2%"},children:["Paid Amount: ",a==null?void 0:a.billAmt]})}),t.jsx("tr",{children:t.jsxs("td",{style:{padding:"2%"},children:["Currency: ",a==null?void 0:a.currency]})}),t.jsx("tr",{children:t.jsxs("td",{style:{padding:"2%"},children:["Status: ",a==null?void 0:a.status]})})]})}),t.jsx(oe,{children:t.jsx(ce,{onClick:g,sx:{color:`${s?"white":"black"}`},children:"Close"})})]})]})}export{st as default};
