import{u as P,R as s,r as w,j as t,L as f}from"./index-CGCJRBXs.js";import{C as D,c as E,a as p,B as d}from"./App-XreTAmzn.js";import{A as H}from"./AuthContext-CoaLJxrx.js";import{d as I}from"./LockOutlined-B0pnEVIv.js";import{u as M}from"./useValidation-9lDVHeJg.js";import{T as V}from"./ThemeProvider-DG0StXl1.js";import{C as q}from"./Container-BM6Nr_8U.js";import{B as h}from"./Box-BfZ9aPM0.js";import{A as F}from"./Avatar-DXz0e9-Z.js";import{T as j}from"./Typography-RCjPBWvE.js";import{T as l}from"./TextField-Bhii07AO.js";import{B as x}from"./Button-DmrIAVQi.js";import{G as g}from"./Grid-CN4_8jt6.js";import"./createSvgIcon-DkNK3VsP.js";import"./createSvgIcon-CWJBf_dQ.js";import"./styled-VyqOG4MM.js";import"./TransitionGroupContext-DCu7Y_zK.js";import"./isMuiElement-C_WCXon2.js";import"./ButtonBase--q0F1ziJ.js";import"./Menu-nsvb1963.js";import"./Backdrop-CfdoqMb9.js";import"./utils-vkrW-C7n.js";import"./styled-GPGU4Lp6.js";import"./createStyled-BmMtPbm_.js";import"./index-J02NhpFH.js";import"./useSlot-Cu6FmjDI.js";import"./FormControl-y3ZRJ1PJ.js";import"./Select-hHeL8oeK.js";function R(r){return t.jsxs(j,{variant:"body2",color:"text.secondary",align:"center",...r,children:["Copyright Â© ",t.jsx(f,{color:"inherit",to:"/",style:{textDecoration:"none"},children:"Neo Connect"})," ",new Date().getFullYear(),"."]})}const G=E();function je(){const{errors:r,validate:a}=M(),v=P(),m="api",[C,b]=s.useState(""),[o,y]=s.useState(""),[S,T]=s.useState(""),{authenticated:N,setAuthenticated:B}=w.useContext(H),[c,u]=s.useState(!1),k=async()=>{a("email",o)?a("email",o)&&i(r.email,"error"):await p.post(`/${m}/v1/member/validate`,{email:o,username:S}).then(e=>{e.status==200&&u(!0)}).catch(e=>{i(e.response.data.message,"error"),console.log("Login api error",e)})},i=(e,n)=>{n=="error"?d.error(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):d.success(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},O=async()=>{a("email",o)?a("email",o)&&i(r.email,"error"):await p.post(`/${m}/v1/member/login`,{email:o,otp:C}).then(e=>{e.status==200&&(u(!1),localStorage.setItem("token",e.data.token),B(!0),i(e.data.message,"success"),v("/home"))}).catch(e=>{i(e.response.data.message,"error"),console.log("Member Login api error",e)})},A=e=>{const{name:n,value:W}=e.target,L=a(n,W);console.log(L)};return t.jsx(V,{theme:G,children:t.jsxs(q,{component:"main",maxWidth:"xs",children:[t.jsx(D,{}),t.jsxs(h,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsx(F,{sx:{m:1,bgcolor:"secondary.main"},children:t.jsx(I,{})}),t.jsx(j,{component:"h1",variant:"h5",children:"Member Sign in"}),t.jsxs(h,{component:"form",noValidate:!0,sx:{mt:1},children:[t.jsx(l,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:e=>y(e.target.value),onBlur:A,error:!!r.email,helperText:r.email}),t.jsx(l,{margin:"normal",required:!0,fullWidth:!0,name:"username",label:"Username",type:"text",id:"username",onChange:e=>T(e.target.value)}),c?t.jsx(l,{margin:"normal",required:!0,fullWidth:!0,name:"otp",label:"OTP",type:"text",id:"otp",onChange:e=>b(e.target.value)}):null,c?t.jsx(x,{type:"button",onClick:()=>O(),fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Proceed"}):t.jsx(x,{type:"button",onClick:()=>k(),fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),t.jsx(g,{container:!0,children:t.jsx(g,{item:!0,xs:!0,children:t.jsx(f,{to:"/",style:{textDecoration:"none"},children:"Switch to user login?"})})})]})]}),t.jsx(R,{sx:{mt:8,mb:4}})]})})}export{je as default};
