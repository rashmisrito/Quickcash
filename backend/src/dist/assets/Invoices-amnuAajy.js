import{j as t,R as n,u as De,f as Te,r as Re}from"./index-B9qwR40S.js";import{i as Me,j as S,a as P,g as O,B as K}from"./App-CFR6fik0.js";import{h as Q}from"./moment-Cl4UOzQZ.js";import{P as D}from"./index-DT2UdaRk.js";import{S as Fe,A as _e,c as Ae}from"./index-DKLob3r9.js";import{$ as ze}from"./module-BpGHhIWK.js";import{d as Ie}from"./Cancel-BMUL7riW.js";import{d as Oe}from"./MoreVert-Iy9KTSaP.js";import{T as Be,a as We,d as X,b as Z}from"./FirstPage-CnED-xBk.js";import{r as Ee}from"./createSvgIcon-BUt4voxn.js";import{d as w}from"./KeyboardArrowLeft-e3tUOFQz.js";import{d as ee}from"./KeyboardArrowRight-C-bhOL4W.js";import{C as B,a as He}from"./ColorButton-av-QDLqY.js";import{T as Le,a as qe,b as T,c}from"./Tr-Dbhtf0ak.js";/* empty css                                  */import{s as Ne}from"./styled-BsGwS7pf.js";import{B as R}from"./Box-DjrMrGfB.js";import{G as d,u as Ve}from"./Grid-BIlHrh_s.js";import{T as te}from"./Typography-BgIXEw26.js";import{T as ae}from"./Tooltip-xwdkk0JG.js";import{M as Ye,a as Ue}from"./Menu-H6tylDrM.js";import{C as Ge}from"./Card-BGgVOW-e.js";import{C as Je}from"./CardContent-BJeuC3pn.js";import{S as se}from"./Select-XPPy0NoH.js";import{M as p}from"./MenuItem-C_v2NxOH.js";import{C as Ke}from"./CardActions-CCoDHw66.js";import{T as Qe}from"./TableBody-D7cXea7d.js";import{I as C}from"./IconButton-Dq6tDNV5.js";import{D as Xe,a as Ze}from"./DialogContent-BtrMaPNm.js";import{D as we}from"./DialogTitle-J8WdMaVs.js";import{D as et}from"./DialogContentText-C68TmXG7.js";import{D as tt}from"./DialogActions-DlRCRjin.js";import"./index-BYwnN-4t.js";import"./useSlot-C5fw4elg.js";import"./TransitionGroupContext-Cv1NJVlO.js";import"./createSvgIcon-CcoZBy8v.js";import"./Close-_hwyFSb5.js";import"./ButtonBase-zmZ_D00R.js";import"./html2canvas.esm-3NQT9CgR.js";import"./jspdf.es.min-p4cJDUes.js";import"./typeof-QjJsDpFa.js";import"./Tablelvl2Context-61ZLNN4C.js";import"./TableCell-B4YREpT2.js";import"./Toolbar-CygE0b_a.js";import"./isMuiElement-D5GR-K16.js";import"./Button-aV3rdW9B.js";import"./Popper-57e9ovz_.js";import"./Popper-PT2z9mk3.js";import"./Backdrop-Oj7HNN4g.js";import"./utils-DDNWiXs5.js";import"./dividerClasses-BNeE3VJI.js";import"./listItemTextClasses-BhtcCChC.js";var W={},at=Me;Object.defineProperty(W,"__esModule",{value:!0});var ne=W.default=void 0,st=at(Ee()),nt=t;ne=W.default=(0,st.default)((0,nt.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt");function ie(j){const h=Ve(),{count:m,page:i,rowsPerPage:g,onPageChange:x}=j,u=l=>{x(l,0)},b=l=>{x(l,i-1)},f=l=>{x(l,i+1)},y=l=>{x(l,Math.max(0,Math.ceil(m/g)-1))};return t.jsxs(R,{sx:{flexShrink:0,ml:2.5},children:[t.jsx(C,{onClick:u,disabled:i===0,"aria-label":"first page",children:h.direction==="rtl"?t.jsx(X,{}):t.jsx(Z,{})}),t.jsx(C,{onClick:b,disabled:i===0,"aria-label":"previous page",children:h.direction==="rtl"?t.jsx(ee,{}):t.jsx(w,{})}),t.jsx(C,{onClick:f,disabled:i>=Math.ceil(m/g)-1,"aria-label":"next page",children:h.direction==="rtl"?t.jsx(w,{}):t.jsx(ee,{})}),t.jsx(C,{onClick:y,disabled:i>=Math.ceil(m/g)-1,"aria-label":"last page",children:h.direction==="rtl"?t.jsx(Z,{}):t.jsx(X,{})})]})}ie.propTypes={count:D.number.isRequired,onPageChange:D.func.isRequired,page:D.number.isRequired,rowsPerPage:D.number.isRequired};const it=[{id:"invoice_number",label:"Invoice Number",minWidth:170},{id:"date",label:"Invoice Date",minWidth:170},{id:"due_date",label:"Due Date",minWidth:100},{id:"amount",label:"Amount",minWidth:100},{id:"transaction",label:"Transactions",minWidth:100},{id:"status",label:"Status",minWidth:100},{id:"action",label:"Action",minWidth:120}];function lt(j,h,m,i,g,x,u,b,f,y,l,k){return{id:j,createdBy:h,dueAmount:m,invoice_number:i,date:g,due_date:x,total:u,transaction:b,status:f,action:y,currency:l,recurring:k}}const ot={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4};function oa(){n.useRef(null);const{toPDF:j,targetRef:h}=ze({filename:"invoices.pdf"}),[m,i]=n.useState(!1),g=()=>i(!0),x=()=>i(!1),u="api",[b,f]=n.useState(!1),y=e=>{f(!0),Ae(e),M(null)},l=()=>{f(!1)},[k,M]=n.useState(null),F=!!k,[le,oe]=n.useState(""),[re,ce]=n.useState(""),[$,de]=n.useState(""),[rt,pe]=n.useState(""),he=e=>{var a=e.currentTarget.value.split("-");ce(a[0]),de(a[1]),pe(a[2]),oe(a[3]),M(e.currentTarget)},xe=()=>{M(null)};De();const[s]=Te(),[_,E]=n.useState();Re.useEffect(()=>{const e=S(localStorage.getItem("admintoken"));H(e.data.id)},[]);const H=async e=>{await P.get(`/${u}/v1/admin/invoice/list/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(a=>{a.data.status=="201"&&E(a.data.data)}).catch(a=>{console.log("error",a)})},ue=async()=>{var a;const e=S(localStorage.getItem("admintoken"));await P.get(`/${u}/v1/admin/invoice/export/${(a=e==null?void 0:e.data)==null?void 0:a.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(r=>{r.data.status=="success"&&je("Excel Report has been generated Successfully","Success"),window.open("https://quickcash.oyefin.com/users.xlsx")}).catch(r=>{console.log("error",r)})};let L=[];L=[_==null?void 0:_.map(e=>lt(e._id,e.createdBy,e.dueAmount,e.invoice_number,e.invoice_date,e.due_date,e.total,e.status,e.status,e._id,e.currency,e.recurring))].sort((e,a)=>e.date<a.date?-1:1);const o=L[0]||[],[A,q]=n.useState(0),[v,me]=n.useState(5),ge=(e,a)=>{console.log(e),q(a)},fe=e=>{me(parseInt(e.target.value,10)),q(0)},je=(e,a)=>{a=="error"?K.error(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):K.success(e,{position:"top-center",autoClose:1900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},[N,V]=n.useState(""),[Y,U]=n.useState(""),be=async()=>{var a;const e=S(localStorage.getItem("admintoken"));await P.get(`/${u}/v1/admin/invoice/list/${(a=e==null?void 0:e.data)==null?void 0:a.id}?status=${N}&recurring=${Y}`,{headers:{Authorization:`Bearer ${localStorage.getItem("admintoken")}`}}).then(r=>{r.data.status=="201"&&(E(r.data.data),i(!1))}).catch(r=>{console.log("error",r)})},[z,ye]=n.useState([]),ve=async e=>{await P.get(`/${u}/v1/admin/invoice/transactions/${e}`).then(a=>{a.data.status==201&&ye(a.data.data)}).catch(a=>{console.log("error",a)})},[Ce,G]=n.useState(!1),ke=e=>{ve(e),G(!0)},I=()=>{G(!1)},J=()=>{i(!1),U(""),V("");const e=S(localStorage.getItem("admintoken"));H(e.data.id)},$e=Ne("div")(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"right",height:"100%","& .ant-empty-img-1":{fill:e.palette.mode==="light"?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:e.palette.mode==="light"?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:e.palette.mode==="light"?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:e.palette.mode==="light"?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:e.palette.mode==="light"?"0.8":"0.08",fill:e.palette.mode==="light"?"#f5f5f5":"#fff"}}));function Se(){return t.jsxs($e,{children:[t.jsx("svg",{width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:t.jsxs("g",{fill:"none",fillRule:"evenodd",children:[t.jsxs("g",{transform:"translate(24 31.67)",children:[t.jsx("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),t.jsx("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),t.jsx("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),t.jsx("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),t.jsx("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),t.jsxs("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[t.jsx("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),t.jsx("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),t.jsx(R,{sx:{mt:1},children:"No Data found"})]})}return t.jsxs(t.Fragment,{children:[t.jsx(Fe,{open:b,autoHideDuration:6e3,onClose:l,anchorOrigin:{horizontal:"center",vertical:"top"},children:t.jsx(_e,{onClose:l,severity:"success",variant:"filled",sx:{width:"100%"},children:"Invoice URL Copied!"})}),t.jsxs(R,{sx:{marginLeft:{md:"7%"},marginTop:{xs:"-10px",md:"12px"},fontSize:"15px",width:{md:"89%"}},children:[t.jsxs(d,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"10px"},children:[t.jsx(d,{children:t.jsx(te,{children:t.jsx(B,{onClick:g,children:t.jsx(ne,{})})})}),(o==null?void 0:o.length)>0&&t.jsxs(d,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:"10px"},children:[t.jsx(d,{onClick:ue,sx:{cursor:"pointer"},children:t.jsx(ae,{title:"Download Excel",sx:{cursor:"pointer"},placement:"top-start",children:t.jsx("img",{src:"https://quickcash.oyefin.com/icons/excel.png",width:45})})}),t.jsx(d,{onClick:()=>j(),sx:{cursor:"pointer"},children:t.jsx(ae,{title:"Download Pdf",sx:{cursor:"pointer"},placement:"top-start",children:t.jsx("img",{src:"https://quickcash.oyefin.com/icons/pdf.png",width:41})})})]})]}),t.jsxs(d,{sx:{display:"flex",flexDirection:"column",marginTop:"12px",borderRadius:".5rem",fontWeight:"700",background:`${s?"#183153":"white"}`,color:`${s?"white":"black"}`,padding:"3px"},children:[t.jsx("div",{children:t.jsx(Ye,{open:m,onClose:x,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:t.jsx(R,{sx:ot,children:t.jsxs(Ge,{children:[t.jsxs(Je,{children:[t.jsx(te,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:t.jsxs(d,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[t.jsx(d,{sx:{color:`${s?"white":"black"}`},children:"Filter Options"}),t.jsx(d,{children:t.jsx(Ie,{sx:{cursor:"pointer"},onClick:()=>J()})})]})}),t.jsx("hr",{}),t.jsx("label",{style:{color:`${s?"white":"black"}`},children:"Status:"}),t.jsxs(se,{fullWidth:!0,sx:{marginBottom:"20px",color:`${s?"white":"black"}`,border:`${s?"1px solid white":""}`},value:N,onChange:e=>V(e.target.value),children:[t.jsx(p,{value:"",sx:{color:`${s?"white":"black"}`},children:"All"}),t.jsx(p,{value:"overdue",sx:{color:`${s?"white":"black"}`},children:"Overdue"}),t.jsx(p,{value:"partial",sx:{color:`${s?"white":"black"}`},children:"Partially Paid"}),t.jsx(p,{value:"paid",sx:{color:`${s?"white":"black"}`},children:"Paid"}),t.jsx(p,{value:"unpaid",sx:{color:`${s?"white":"black"}`},children:"Unpaid"})]}),t.jsx("label",{style:{color:`${s?"white":"black"}`},children:"Recurring Status :"}),t.jsxs(se,{fullWidth:!0,sx:{border:`${s?"1px solid white":""}`},value:Y,onChange:e=>U(e.target.value),children:[t.jsx(p,{value:"yes",sx:{color:`${s?"white":"black"}`},children:"On"}),t.jsx(p,{value:"no",sx:{color:`${s?"white":"black"}`},children:"Off"})]})]}),t.jsxs(Ke,{sx:{float:"right"},children:[t.jsx(B,{onClick:()=>be(),children:"Filter"}),t.jsx(He,{onClick:()=>J(),children:"Reset"})]})]})})})}),t.jsxs(Le,{style:{background:`${s?"#183153":"#F2F3FE"}`,color:`${s?"white":"black"}`},children:[t.jsxs("div",{ref:h,children:[t.jsx(qe,{children:t.jsx(T,{className:`${s?"avatarDark":"avatarLight"}`,children:it.map(e=>t.jsx(c,{width:"220",style:{padding:"12px",background:"#8657E5",color:"white"},children:e.label},e.id))})}),t.jsxs(Qe,{children:[(v>0?o==null?void 0:o.slice(A*v,A*v+v):o).map(e=>t.jsxs(T,{children:[t.jsx(c,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:e==null?void 0:e.invoice_number}),t.jsx(c,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:Q(e==null?void 0:e.invoice_date).format("DD-MM-YYYY")}),t.jsx(c,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:Q(e==null?void 0:e.due_date).format("DD-MM-YYYY")}),t.jsxs(c,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:[O(e==null?void 0:e.currency),parseFloat(e==null?void 0:e.total).toFixed(2)]}),t.jsxs(c,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},align:"center",scope:"row",children:[O(e==null?void 0:e.currency),(e==null?void 0:e.dueAmount)>0?parseFloat(e==null?void 0:e.dueAmount).toFixed(2):parseFloat(e==null?void 0:e.total).toFixed(2)]}),t.jsxs(c,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:[((e==null?void 0:e.status)=="paid"||(e==null?void 0:e.status)=="Test"||(e==null?void 0:e.status)=="Approved")&&t.jsx(t.Fragment,{children:t.jsx("span",{style:{background:"green",borderRadius:"12px",color:"white",padding:"10px"},children:"Paid"})}),(e==null?void 0:e.status)=="unpaid"&&t.jsx(t.Fragment,{children:t.jsx("span",{style:{background:"red",borderRadius:"12px",color:"white",padding:"10px"},children:"Unpaid"})}),(e==null?void 0:e.status)=="partial"&&t.jsx(t.Fragment,{children:t.jsx("span",{style:{background:"magenta",borderRadius:"12px",color:"white",padding:"10px"},children:"Partial"})})]}),t.jsxs(c,{style:{padding:"12px",fontSize:"14px",fontWeight:"400"},scope:"row",children:[t.jsx(C,{"aria-label":"more",value:`${e==null?void 0:e.id}-${e==null?void 0:e.status}-${e==null?void 0:e.recurring}-${e==null?void 0:e.invoice_number}`,id:`long-button${e==null?void 0:e.id}`,"aria-controls":F?`long-menu${e==null?void 0:e.id}`:void 0,"aria-expanded":F?"true":void 0,"aria-haspopup":"true",onClick:he,sx:{color:`${s?"white":"black"}`},children:t.jsx(Oe,{})}),t.jsxs(Ue,{id:`long-menu${e==null?void 0:e.id}`,MenuListProps:{"aria-labelledby":`long-button${e==null?void 0:e.id}`},anchorEl:k,open:F,onClose:xe,children:[t.jsx(p,{onClick:()=>y(`https://quickcash.oyefin.com/invoicepdf/${le}`),children:t.jsx("span",{className:`${s?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"Invoice URl"})}),($=="paid"||$=="partial"||$=="Test"||$=="Approved")&&t.jsx(p,{onClick:()=>ke(re),children:t.jsx("span",{className:`${s?"avatarDarkSecondaryExtra":"avatarLight"}`,children:"Transactions"})})]},e==null?void 0:e.id)]})]},e==null?void 0:e.invoice_date)),(o==null?void 0:o.length)==0&&t.jsx(T,{children:t.jsx(c,{colSpan:7,children:t.jsx(Se,{})})})]})]}),t.jsx(Be,{sx:{background:`${s?"white":""}`,color:"black"},children:t.jsx(T,{children:t.jsx(We,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:7,count:o.length,rowsPerPage:v,page:A,slotProps:{select:{inputProps:{"aria-label":"rows per page"},native:!0}},onPageChange:ge,onRowsPerPageChange:fe,ActionsComponent:ie})})})]})]})]}),t.jsxs(Xe,{maxWidth:"lg",open:Ce,onClose:I,PaperProps:{component:"form",onSubmit:e=>{e.preventDefault();const a=new FormData(e.currentTarget),Pe=Object.fromEntries(a.entries()).email;console.log(Pe),I()}},children:[t.jsx(we,{sx:{color:`${s?"white":"black"}`},children:"Transactions Details"}),t.jsx(Ze,{children:t.jsx(et,{children:t.jsxs("table",{border:1,width:"100%",style:{color:`${s?"white":"black"}`},children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:{padding:"10px"},children:"Transaction Date"}),t.jsx("th",{style:{padding:"10px"},children:"Transaction ID"}),t.jsx("th",{style:{padding:"10px"},children:"Payment Mode"}),t.jsx("th",{style:{padding:"10px"},children:"Paid Amount"})]})}),t.jsx("tbody",{children:z==null?void 0:z.map((e,a)=>t.jsxs("tr",{children:[t.jsx("td",{style:{padding:"10px"},children:e==null?void 0:e.dateadded}),t.jsx("td",{style:{padding:"10px"},children:e==null?void 0:e._id}),t.jsx("td",{style:{padding:"10px"},children:e==null?void 0:e.trans_type}),t.jsxs("td",{style:{padding:"10px"},children:[O(e==null?void 0:e.toCurrency),e==null?void 0:e.convertAmount]})]},a))})]})})}),t.jsx(tt,{children:t.jsx(B,{onClick:I,children:"Close"})})]})]})}export{oa as default};
