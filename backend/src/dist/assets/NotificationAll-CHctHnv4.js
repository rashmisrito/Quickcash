import{r as Y,f as G,R as j,j as e}from"./index-CGCJRBXs.js";import{a as I}from"./App-XreTAmzn.js";import{h as U}from"./moment-Cl4UOzQZ.js";import{P as b}from"./index-D4i6MgDl.js";import{T as J,a as K,d as H,b as N}from"./FirstPage-BKQpZ07i.js";import{C as W}from"./ColorButton-DU_nmFNW.js";import{T as Q,a as X,b as k,c as f}from"./Tr-DGe9hdZ0.js";import{d as V}from"./KeyboardArrowLeft-i5DtCEUm.js";import{d as A}from"./KeyboardArrowRight-DTwXVoMT.js";/* empty css                                  */import{d as Z}from"./KeyboardBackspace-BogGLoRI.js";import{s as ee}from"./styled-VyqOG4MM.js";import{T as ae}from"./Typography-RCjPBWvE.js";import{G as d,u as te}from"./Grid-CN4_8jt6.js";import{T as se}from"./TableBody-kXsojO-5.js";import{B as L}from"./Box-BfZ9aPM0.js";import{I as P}from"./IconButton-DdTwUNw0.js";import"./Tablelvl2Context-B2jmvGEu.js";import"./Menu-nsvb1963.js";import"./Backdrop-CfdoqMb9.js";import"./utils-vkrW-C7n.js";import"./TransitionGroupContext-DCu7Y_zK.js";import"./createSvgIcon-CWJBf_dQ.js";import"./ButtonBase--q0F1ziJ.js";import"./TableCell-BSK8M-MP.js";import"./Toolbar-m-EyFJSu.js";import"./Select-hHeL8oeK.js";import"./MenuItem-DT3WvV_t.js";import"./dividerClasses-CL_qDVcm.js";import"./listItemTextClasses-BWrrQlVX.js";import"./createSvgIcon-DkNK3VsP.js";import"./isMuiElement-C_WCXon2.js";import"./Button-DmrIAVQi.js";function _(t){const o=te(),{count:h,page:l,rowsPerPage:g,onPageChange:x}=t,c=p=>{x(p,0)},u=p=>{x(p,l-1)},y=p=>{x(p,l+1)},m=p=>{x(p,Math.max(0,Math.ceil(h/g)-1))};return e.jsxs(L,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(P,{onClick:c,disabled:l===0,"aria-label":"first page",children:o.direction==="rtl"?e.jsx(H,{}):e.jsx(N,{})}),e.jsx(P,{onClick:u,disabled:l===0,"aria-label":"previous page",children:o.direction==="rtl"?e.jsx(A,{}):e.jsx(V,{})}),e.jsx(P,{onClick:y,disabled:l>=Math.ceil(h/g)-1,"aria-label":"next page",children:o.direction==="rtl"?e.jsx(V,{}):e.jsx(A,{})}),e.jsx(P,{onClick:m,disabled:l>=Math.ceil(h/g)-1,"aria-label":"last page",children:o.direction==="rtl"?e.jsx(N,{}):e.jsx(H,{})})]})}_.propTypes={count:b.number.isRequired,onPageChange:b.func.isRequired,page:b.number.isRequired,rowsPerPage:b.number.isRequired};const ie=[{id:"date",label:"Date",minWidth:170},{id:"title",label:"Title",minWidth:170},{id:"tag",label:"Tags",minWidth:100},{id:"action",label:"Action",minWidth:120}];function ne(t,o,h,l,g){return{id:t,date:o,title:h,tag:l,read:g}}const le=ee("div")(({theme:t})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"right",height:"100%","& .ant-empty-img-1":{fill:t.palette.mode==="light"?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:t.palette.mode==="light"?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:t.palette.mode==="light"?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:t.palette.mode==="light"?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:t.palette.mode==="light"?"0.8":"0.08",fill:t.palette.mode==="light"?"#f5f5f5":"#fff"}}));function re(){return e.jsxs(le,{children:[e.jsx("svg",{width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:e.jsxs("g",{fill:"none",fillRule:"evenodd",children:[e.jsxs("g",{transform:"translate(24 31.67)",children:[e.jsx("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),e.jsx("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),e.jsx("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),e.jsx("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),e.jsx("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),e.jsxs("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[e.jsx("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),e.jsx("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),e.jsx(L,{sx:{mt:1},children:"No Data found"})]})}const De=()=>{var C,$,T,M,z,B;Y.useEffect(()=>{g()},[]);const[t]=G(),[o,h]=j.useState([]),l="api",g=async()=>{var a="",s="";localStorage.getItem("admintoken")?(a="admin-all",s=`Bearer ${localStorage.getItem("admintoken")}`):localStorage.getItem("token")&&(a="user-all",s=`Bearer ${localStorage.getItem("token")}`),await I.get(`/${l}/v1/admin/notification/${a}`,{headers:{Authorization:s}}).then(n=>{var r;n.data.status=="201"&&h((r=n==null?void 0:n.data)==null?void 0:r.data)}).catch(n=>{console.log("error",n)})};let x=[];x=[o==null?void 0:o.map(a=>ne(a==null?void 0:a._id,a==null?void 0:a.createdAt,a==null?void 0:a.title,a==null?void 0:a.tags,a==null?void 0:a.read))].sort((a,s)=>a.date<s.date?-1:1);const c=x[0]||[],[u,y]=j.useState(0),[m,p]=j.useState(5),w=(a,s)=>{console.log("New Page",a),y(s)},D=a=>{p(parseInt(a.target.value,10)),y(0)};function F(a){if(a){var s=a[0].split(",");return s}}const[i,q]=j.useState(""),[S,v]=j.useState(!1),O=async a=>{a!=""&&(E(a),v(!0))},E=async a=>{var s="",n="";localStorage.getItem("admintoken")?(s="admingetData",n=`Bearer ${localStorage.getItem("admintoken")}`):localStorage.getItem("token")&&(s="user",n=`Bearer ${localStorage.getItem("token")}`),await I.get(`/${l}/v1/admin/notification/${s}/${a}`,{headers:{Authorization:n}}).then(r=>{var R;r.data.status=="201"&&q((R=r==null?void 0:r.data)==null?void 0:R.data)}).catch(r=>{console.log("error",r)})};return e.jsxs("div",{style:{marginTop:"-2%"},children:[e.jsx(ae,{sx:{color:`${t?"white":"black"}`},children:e.jsx("h2",{children:"Notifications"})}),S?null:e.jsx(e.Fragment,{children:e.jsx(d,{sx:{display:"flex",flexDirection:"column",gap:"20px",borderRadius:".5rem",color:"black",fontWeight:"700",background:{xs:`${t?"#183153":"white"}`,sm:`${t?"":"white"}`},border:{xs:`${t?"1px solid white":"white"}`,sm:`${t?"1px solid white":"white"}`},padding:"3px"},children:e.jsxs(Q,{style:{background:`${t?"":"white"}`,color:`${t?"white":"black"}`},children:[e.jsx(X,{children:e.jsx(k,{children:ie.map(a=>e.jsx(f,{width:"360",style:{padding:"12px",background:"#8657E5",color:"white"},children:a.label},a.id))})}),e.jsxs(se,{children:[(m>0?c==null?void 0:c.slice(u*m,u*m+m):c).map(a=>{var s;return e.jsxs(k,{children:[e.jsx(f,{style:{padding:"6px",fontSize:"14px",fontWeight:"400"},scope:"row",children:U(a==null?void 0:a.date).format("YYYY-MM-DD")}),e.jsx(f,{style:{padding:"6px",fontSize:"14px",fontWeight:"400"},scope:"row",children:a==null?void 0:a.title}),e.jsx(f,{style:{padding:"6px",fontSize:"14px",fontWeight:"400"},scope:"row",children:(s=F(a==null?void 0:a.tag))==null?void 0:s.map((n,r)=>e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{background:"#0288D1",color:"white",padding:"6px",marginLeft:"2px"},children:["#",n]},r),e.jsx("br",{}),e.jsx("br",{})]}))}),e.jsx(f,{style:{padding:"6px",fontSize:"14px",fontWeight:"400"},scope:"row",children:e.jsx(d,{sx:{display:"flex",flexDirection:"row",gap:"12px"},children:e.jsx(d,{children:e.jsx(W,{onClick:()=>O(a==null?void 0:a.id),children:"View"})})})})]},a==null?void 0:a.id)}),(c==null?void 0:c.length)==0&&e.jsx(k,{children:e.jsx(f,{colSpan:7,children:e.jsx(re,{})})})]}),e.jsx(J,{sx:{background:`${t?"white":""}`},children:e.jsx(k,{children:e.jsx(K,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:7,count:c.length,rowsPerPage:m,page:u,slotProps:{select:{inputProps:{"aria-label":"rows per page"},native:!0}},onPageChange:w,onRowsPerPageChange:D,ActionsComponent:_})})})]})})}),S?e.jsxs(e.Fragment,{children:[e.jsxs(W,{size:"large",color:"primary",onClick:()=>v(!S),children:[e.jsx(Z,{sx:{mr:1}}),"Back"]}),e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:12,sx:{marginTop:"30px"},children:(C=i==null?void 0:i[0])==null?void 0:C.title}),e.jsx(d,{item:!0,xs:12,children:e.jsx(d,{sx:{display:"flex",flexDirection:"row",gap:"12px"},children:(T=($=i==null?void 0:i[0])==null?void 0:$.tags)==null?void 0:T.map((a,s)=>e.jsx(e.Fragment,{children:e.jsxs(d,{sx:{background:"#2196F3",padding:"12px",borderRadius:"10px 12px",color:"white"},children:["#",a]},s)}))})}),e.jsx(d,{item:!0,xs:12,children:e.jsx("div",{className:"html",style:{lineHeight:1.6},dangerouslySetInnerHTML:{__html:(M=i==null?void 0:i[0])==null?void 0:M.message}})}),e.jsx(d,{item:!0,xs:12,children:(z=i==null?void 0:i[0])!=null&&z.attachment?e.jsx("img",{src:`https://quickcash.oyefin.com/notifications/${(B=i==null?void 0:i[0])==null?void 0:B.attachment}`,height:"300px"}):null})]})]}):null]})};export{De as default};
